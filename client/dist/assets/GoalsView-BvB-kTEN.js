import{c as j,az as pe,aA as he,aB as be,B as le,au as ye,aC as K,aD as _e,a as c,G as $e,h as V,ae as ke,_ as U,I as O,b,d as F,w as r,j as a,g as t,K as u,k as S,l as we,aE as xe,aF as se,aG as E,Q as q,m as I,L as N,n as qe,s as Y,t as X,r as D,E as re,i as C,M as ie,N as ne,q as ee,ar as De,aq as Se,ah as Ce,aH as Ae,J,o as Ge,aI as Ve,aJ as Fe}from"./index-wRLNoSK_.js";import{Q as $,a as z}from"./QInput-DsmJXSEa.js";import{Q as k,u as te}from"./use-quasar-DdmeiJJS.js";import{Q as R}from"./QDialog-BYuOmwN6.js";import{Q as ce}from"./QCardActions-CXuEaoKC.js";import{Q as Ne}from"./QPage-CcoiKmni.js";import{C as ae}from"./ClosePopup-Dpv5Y6cu.js";import{Q as Qe,b as Be}from"./QSelect-Bwf8Y-zP.js";import{Q as de}from"./QLinearProgress-BYM9Ri4C.js";import{Q as ze}from"./QForm-ukj-ikqg.js";const H=j({name:"QTab",props:pe,emits:he,setup(e,{slots:o,emit:d}){const{renderTab:m}=be(e,o,d);return()=>m("div")}}),Ie={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function Te(){const{props:e,proxy:{$q:o}}=le(),d=ye(_e,K);if(d===K)return console.error("QPageSticky needs to be child of QLayout"),K;const m=c(()=>{const v=e.position;return{top:v.indexOf("top")!==-1,right:v.indexOf("right")!==-1,bottom:v.indexOf("bottom")!==-1,left:v.indexOf("left")!==-1,vertical:v==="top"||v==="bottom",horizontal:v==="left"||v==="right"}}),i=c(()=>d.header.offset),p=c(()=>d.right.offset),s=c(()=>d.footer.offset),f=c(()=>d.left.offset),h=c(()=>{let v=0,x=0;const l=m.value,g=o.lang.rtl===!0?-1:1;l.top===!0&&i.value!==0?x=`${i.value}px`:l.bottom===!0&&s.value!==0&&(x=`${-s.value}px`),l.left===!0&&f.value!==0?v=`${g*f.value}px`:l.right===!0&&p.value!==0&&(v=`${-g*p.value}px`);const y={transform:`translate(${v}, ${x})`};return e.offset&&(y.margin=`${e.offset[1]}px ${e.offset[0]}px`),l.vertical===!0?(f.value!==0&&(y[o.lang.rtl===!0?"right":"left"]=`${f.value}px`),p.value!==0&&(y[o.lang.rtl===!0?"left":"right"]=`${p.value}px`)):l.horizontal===!0&&(i.value!==0&&(y.top=`${i.value}px`),s.value!==0&&(y.bottom=`${s.value}px`)),y}),n=c(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function w(v){const x=$e(v.default);return V("div",{class:n.value,style:h.value},e.expand===!0?x:[V("div",x)])}return{$layout:d,getStickyContent:w}}const Ze=j({name:"QPageSticky",props:Ie,setup(e,{slots:o}){const{getStickyContent:d}=Te();return()=>d(o)}}),Pe=["top","middle","bottom"],M=j({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>Pe.includes(e)}},setup(e,{slots:o}){const d=c(()=>e.align!==void 0?{verticalAlign:e.align}:null),m=c(()=>{const i=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(i!==void 0?` text-${i}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>V("div",{class:m.value,style:d.value,role:"status","aria-label":e.label},ke(o.default,e.label!==void 0?[e.label]:[]))}}),Ee=O({name:"GoalCard",props:{goal:{type:Object,required:!0}},emits:["click","edit","delete","menu"],setup(e){const o=c(()=>{switch(e.goal.status){case"completed":return"positive";case"overdue":return"negative";default:return"primary"}}),d=c(()=>e.goal.current_amount/e.goal.target_amount*100),m=c(()=>{switch(e.goal.status){case"completed":return"check_circle";case"overdue":return"warning";default:return"schedule"}}),i=c(()=>{switch(e.goal.status){case"completed":return"Erreicht";case"overdue":return"ÃœberfÃ¤llig";default:return"In Bearbeitung"}}),p=c(()=>e.goal.status==="completed"?"positive":"primary"),s=c(()=>e.goal.status==="overdue"?"goal-card-overdue":"");return{statusColor:o,statusIcon:m,statusText:i,progressColor:p,statusClass:s,formatDate:n=>new Date(n).toLocaleDateString("de-DE"),progressPercentage:d,formatNumber:n=>new Intl.NumberFormat("de-DE").format(n)}}}),Me=e=>(Y("data-v-73109ccf"),e=e(),X(),e),je={class:"row items-center no-wrap q-mb-sm"},Ue={class:"col"},Oe={class:"text-h6 text-weight-bold text-primary"},Le={class:"col-auto"},Ke={class:"row q-gutter-xs q-mb-md"},Je={class:"q-mb-md"},Re={class:"row justify-between items-center q-mb-xs"},He=Me(()=>t("div",{class:"text-caption text-grey-6"},"Fortschritt",-1)),We={class:"text-caption text-weight-bold text-primary"},Ye={class:"row justify-between"},Xe={class:"text-caption text-grey-6"},et={class:"text-caption text-grey-6"},tt={class:"row items-center justify-between"},at={class:"row items-center"},ot={class:"text-caption text-grey-6"};function st(e,o,d,m,i,p){return b(),F(k,{class:qe(["goal-card cursor-pointer bg-card",e.statusClass]),onClick:o[3]||(o[3]=s=>e.$emit("click",e.goal))},{default:r(()=>[a($,{class:"q-pa-md"},{default:r(()=>[t("div",je,[t("div",Ue,[t("div",Oe,u(e.goal.title),1)]),t("div",Le,[a(S,{flat:"",round:"",icon:"more_vert",size:"sm",color:"grey-6",onClick:o[2]||(o[2]=we(s=>e.$emit("menu",e.goal),["stop"]))},{default:r(()=>[a(Qe,{"auto-close":"",class:"goal-card-menu"},{default:r(()=>[a(xe,{class:"goal-menu-list"},{default:r(()=>[a(se,{clickable:"",onClick:o[0]||(o[0]=s=>e.$emit("edit",e.goal)),class:"goal-edit-item"},{default:r(()=>[a(E,{avatar:""},{default:r(()=>[a(q,{name:"edit",size:"xs"})]),_:1}),a(E,null,{default:r(()=>[I("Bearbeiten")]),_:1})]),_:1}),a(se,{clickable:"",onClick:o[1]||(o[1]=s=>e.$emit("delete",e.goal)),class:"goal-delete-item"},{default:r(()=>[a(E,{avatar:""},{default:r(()=>[a(q,{name:"delete",size:"xs"})]),_:1}),a(E,null,{default:r(()=>[I("LÃ¶schen")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])]),t("div",Ke,[a(M,{color:e.statusColor,icon:e.statusIcon,class:"text-caption text-weight-medium"},{default:r(()=>[I(u(e.statusText),1)]),_:1},8,["color","icon"]),e.goal.category_name?(b(),F(M,{key:0,outline:"",color:"accent",class:"text-caption"},{default:r(()=>[I(u(e.goal.category_name),1)]),_:1})):N("",!0)]),t("div",Je,[t("div",Re,[He,t("div",We,u(e.progressPercentage.toFixed(1))+"% ",1)]),a(de,{value:e.goal.progress_percentage/100,color:e.progressColor,size:"8px",rounded:"",class:"q-mb-xs"},null,8,["value","color"]),t("div",Ye,[t("div",Xe," â‚¬"+u(e.formatNumber(e.goal.current_amount)),1),t("div",et," â‚¬"+u(e.formatNumber(e.goal.target_amount)),1)])]),t("div",tt,[t("div",at,[a(q,{name:"event",size:"xs",color:"grey-6",class:"q-mr-xs"}),t("div",ot," Bis "+u(e.formatDate(e.goal.target_date)),1)]),a(q,{name:"trending_up",size:"sm",color:e.progressPercentage>=50?"positive":"primary"},null,8,["color"])])]),_:1})]),_:1},8,["class"])}const lt=U(Ee,[["render",st],["__scopeId","data-v-73109ccf"]]),rt=O({name:"GoalCreator",props:{userId:{type:Number,required:!0},editGoal:{type:Object,default:null}},emits:["saved","cancel"],setup(e,{emit:o}){const d=te(),m=D(!1),i=D({title:"",target_amount:"",current_amount:"0",target_date:"",category_id:null,description:""}),p=[{title:"Notgroschen",target_amount:3e3,category:"Sparen",description:"3 NettogehÃ¤lter als Sicherheit"},{title:"Urlaubsgeld",target_amount:1500,category:"Sparen",description:"FÃ¼r den nÃ¤chsten Sommerurlaub"},{title:"Smartphone",target_amount:800,category:"Technik",description:"Aktuelles Modell ersetzen"},{title:"Auto-Reparatur",target_amount:1200,category:"Auto",description:"JÃ¤hrliche Wartungskosten"}],s=c(()=>[{label:"Sparen",value:11},{label:"Investition",value:12},{label:"Urlaub",value:13},{label:"Auto",value:14},{label:"Technik",value:15},{label:"Sonstiges",value:16}]),f=c(()=>{if(!i.value.target_amount||!i.value.target_date)return 0;const l=parseFloat(i.value.target_amount),g=parseFloat(i.value.current_amount)||0,y=l-g,G=new Date,Q=new Date(i.value.target_date),Z=(Q.getFullYear()-G.getFullYear())*12+(Q.getMonth()-G.getMonth());return Z>0?(y/Z).toFixed(2):y.toFixed(2)}),h=c(()=>{if(!i.value.target_amount)return 0;const l=parseFloat(i.value.target_amount),g=parseFloat(i.value.current_amount)||0;return l>0?g/l*100:0}),n=l=>{const g=s.value.find(y=>y.label===l.category);i.value={title:l.title,target_amount:l.target_amount.toString(),current_amount:"0",target_date:w(90),category_id:g?g.value:null,description:l.description}},w=l=>{const g=new Date;return g.setDate(g.getDate()+l),g.toISOString().split("T")[0]},v=l=>new Intl.NumberFormat("de-DE").format(l),x=async()=>{m.value=!0;try{const l=e.editGoal?`http://localhost:3000/api/goals/${e.editGoal.id}`:"http://localhost:3000/api/goals";if((await fetch(l,{method:e.editGoal?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId,title:i.value.title,targetAmount:parseFloat(i.value.target_amount),currentAmount:parseFloat(i.value.current_amount)||0,targetDate:i.value.target_date,categoryId:i.value.category_id,description:i.value.description})})).ok)o("saved");else throw new Error("Failed to save goal")}catch{d.notify({type:"negative",message:"Fehler beim Speichern des Ziels"})}finally{m.value=!1}};return re(()=>e.editGoal,l=>{l?i.value={title:l.title,target_amount:l.target_amount.toString(),current_amount:l.current_amount.toString(),target_date:l.target_date.split("T")[0],category_id:l.category_id,description:l.description||""}:i.value={title:"",target_amount:"",current_amount:"0",target_date:"",category_id:null,description:""}},{immediate:!0}),{loading:m,formData:i,goalSuggestions:p,categoryOptions:s,monthlySaving:f,currentProgress:h,applySuggestion:n,submitGoal:x,formatNumber:v}}}),L=e=>(Y("data-v-e1bb05d8"),e=e(),X(),e),it={class:"text-h5 text-weight-bold text-dark"},nt={key:0,class:"q-mb-lg"},ct=L(()=>t("div",{class:"text-subtitle1 text-weight-medium text-dark q-mb-sm"}," Schnellauswahl ",-1)),dt={class:"row q-col-gutter-sm"},ut={class:"text-caption text-weight-bold text-dark"},mt={class:"text-h6 text-primary"},gt={class:"row q-col-gutter-sm"},vt={class:"col-6"},ft={class:"col-6"},pt=L(()=>t("div",{class:"text-subtitle2 text-weight-medium text-dark q-mb-sm"}," Sparplan ",-1)),ht={class:"row justify-between items-center q-mb-sm"},bt=L(()=>t("div",{class:"text-caption text-grey-7"},"Monatliche Sparrate:",-1)),yt={class:"text-h6 text-primary"},_t={key:0,class:"q-mt-md"},$t={class:"row justify-between items-center q-mb-xs"},kt=L(()=>t("div",{class:"text-caption text-grey-7"},"Fortschritt:",-1)),wt={class:"text-caption text-weight-bold text-primary"},xt={class:"row justify-end q-gutter-sm q-mt-lg"};function qt(e,o,d,m,i,p){return b(),F(k,{class:"creator-card bg-surface"},{default:r(()=>[a($,{class:"q-pb-none"},{default:r(()=>[t("div",it,u(e.editGoal?"Ziel bearbeiten":"Neues Sparziel"),1)]),_:1}),a($,{class:"q-pt-md"},{default:r(()=>[a(ze,{onSubmit:e.submitGoal,class:"q-gutter-y-md"},{default:r(()=>[e.editGoal?N("",!0):(b(),C("div",nt,[ct,t("div",dt,[(b(!0),C(ie,null,ne(e.goalSuggestions,(s,f)=>(b(),C("div",{key:f,class:"col-6"},[a(k,{class:"cursor-pointer suggestion-card bg-card",onClick:h=>e.applySuggestion(s)},{default:r(()=>[a($,{class:"text-center q-pa-sm"},{default:r(()=>[a(q,{name:"savings",size:"md",color:"primary",class:"q-mb-xs"}),t("div",ut,u(s.title),1),t("div",mt," â‚¬"+u(e.formatNumber(s.target_amount)),1),a(M,{label:s.category,color:"accent"},null,8,["label"])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))])])),a(z,{modelValue:e.formData.title,"onUpdate:modelValue":o[0]||(o[0]=s=>e.formData.title=s),label:"Ziel-Titel",placeholder:"z.B. Neues Auto, Urlaub, Notgroschen...",rules:[s=>!!s||"Titel ist erforderlich"],filled:"",class:"input-field",color:"primary",dark:e.$q.dark.isActive},null,8,["modelValue","rules","dark"]),t("div",gt,[t("div",vt,[a(z,{modelValue:e.formData.target_amount,"onUpdate:modelValue":o[1]||(o[1]=s=>e.formData.target_amount=s),label:"Zielbetrag (â‚¬)",type:"number",rules:[s=>!!s||"Zielbetrag ist erforderlich",s=>s>0||"Betrag muss positiv sein"],filled:"",class:"input-field",color:"primary",dark:e.$q.dark.isActive},null,8,["modelValue","rules","dark"])]),t("div",ft,[a(z,{modelValue:e.formData.current_amount,"onUpdate:modelValue":o[2]||(o[2]=s=>e.formData.current_amount=s),label:"Aktueller Betrag (â‚¬)",type:"number",filled:"",class:"input-field",color:"primary",dark:e.$q.dark.isActive},null,8,["modelValue","dark"])])]),a(z,{modelValue:e.formData.target_date,"onUpdate:modelValue":o[3]||(o[3]=s=>e.formData.target_date=s),label:"Ziel-Datum",type:"date",rules:[s=>!!s||"Datum ist erforderlich"],filled:"",class:"input-field",color:"primary",dark:e.$q.dark.isActive},null,8,["modelValue","rules","dark"]),a(Be,{modelValue:e.formData.category_id,"onUpdate:modelValue":o[4]||(o[4]=s=>e.formData.category_id=s),options:e.categoryOptions,label:"Kategorie","emit-value":"","map-options":"",filled:"",class:"input-field",color:"primary",dark:e.$q.dark.isActive},null,8,["modelValue","options","dark"]),a(z,{modelValue:e.formData.description,"onUpdate:modelValue":o[5]||(o[5]=s=>e.formData.description=s),label:"Beschreibung",type:"textarea",rows:"2",filled:"",class:"input-field",color:"primary",dark:e.$q.dark.isActive},null,8,["modelValue","dark"]),e.formData.target_amount&&e.formData.target_date?(b(),F(k,{key:1,flat:"",class:"bg-info-card"},{default:r(()=>[a($,{class:"q-pa-md"},{default:r(()=>[pt,t("div",ht,[bt,t("div",yt,"â‚¬"+u(e.monthlySaving),1)]),e.currentProgress>0?(b(),C("div",_t,[t("div",$t,[kt,t("div",wt,u(e.currentProgress.toFixed(1))+"% ",1)]),a(de,{value:e.currentProgress/100,color:"primary",size:"6px",rounded:""},null,8,["value"])])):N("",!0)]),_:1})]),_:1})):N("",!0),t("div",xt,[ee(a(S,{label:"Abbrechen",color:"grey-6",flat:"",onClick:o[6]||(o[6]=s=>e.$emit("cancel")),class:"cancel-button"},null,512),[[ae]]),a(S,{label:e.editGoal?"Aktualisieren":"Erstellen",type:"submit",color:"primary",loading:e.loading,class:"action-button"},null,8,["label","loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}const Dt=U(rt,[["render",qt],["__scopeId","data-v-e1bb05d8"]]),St={...De,min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,rounded:Boolean,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean},W=50,ue=2*W,me=ue*Math.PI,Ct=Math.round(me*1e3)/1e3,At=j({name:"QCircularProgress",props:{...St,value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean},setup(e,{slots:o}){const{proxy:{$q:d}}=le(),m=Se(e),i=c(()=>{const l=(d.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(d.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-l}deg)`:`rotate3d(0, 0, 1, ${l-90}deg)`}}),p=c(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),s=c(()=>ue/(1-e.thickness/2)),f=c(()=>`${s.value/2} ${s.value/2} ${s.value} ${s.value}`),h=c(()=>Ce(e.value,e.min,e.max)),n=c(()=>e.max-e.min),w=c(()=>e.thickness/2*s.value),v=c(()=>{const l=(e.max-h.value)/n.value,g=e.rounded===!0&&h.value<e.max&&l<.25?w.value/2*(1-l/.25):0;return me*l+g});function x({thickness:l,offset:g,color:y,cls:G,rounded:Q}){return V("circle",{class:"q-circular-progress__"+G+(y!==void 0?` text-${y}`:""),style:p.value,fill:"transparent",stroke:"currentColor","stroke-width":l,"stroke-dasharray":Ct,"stroke-dashoffset":g,"stroke-linecap":Q,cx:s.value,cy:s.value,r:W})}return()=>{const l=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&l.push(V("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:W-w.value/2,cx:s.value,cy:s.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&l.push(x({cls:"track",thickness:w.value,offset:0,color:e.trackColor})),l.push(x({cls:"circle",thickness:w.value,offset:v.value,color:e.color,rounded:e.rounded===!0?"round":void 0}));const g=[V("svg",{class:"q-circular-progress__svg",style:i.value,viewBox:f.value,"aria-hidden":"true"},l)];return e.showValue===!0&&g.push(V("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},o.default!==void 0?o.default():[V("div",h.value)])),V("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:m.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:h.value},Ae(o.internal,g))}}}),Gt=O({name:"GoalDetails",props:{goal:{type:Object,required:!0}},emits:["close","updated"],setup(e,{emit:o}){const d=te(),m=D(e.goal.current_amount),i=c(()=>e.goal.current_amount/e.goal.target_amount*100),p=c(()=>e.goal.status==="completed"?"positive":"primary"),s=c(()=>(e.goal.target_amount-e.goal.current_amount).toFixed(2)),f=c(()=>{const l=new Date,y=new Date(e.goal.target_date)-l;return Math.ceil(y/(1e3*60*60*24))}),h=c(()=>{const l=e.goal.target_amount-e.goal.current_amount;return f.value>0?(l/f.value).toFixed(2):"0.00"}),n=c(()=>i.value<25?"Du hast einen groÃŸartigen Start! Weiter so! ðŸš€":i.value<50?"Du bist auf dem besten Weg! Bleib dran! ðŸ’ª":i.value<75?"Schon mehr als die HÃ¤lfte geschafft! ðŸ¤©":"Fast geschafft! Das letzte StÃ¼ck ist am schwersten! ðŸŽ¯"),w=l=>new Date(l).toLocaleDateString("de-DE"),v=l=>new Intl.NumberFormat("de-DE").format(l),x=async()=>{try{(await fetch(`http://localhost:3000/api/goals/${e.goal.id}/amount`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentAmount:parseFloat(m.value)})})).ok&&(d.notify({type:"positive",message:"Betrag erfolgreich aktualisiert",position:"top"}),o("updated"))}catch{d.notify({type:"negative",message:"Fehler beim Aktualisieren"})}};return re(()=>e.goal,l=>{m.value=l.current_amount}),{currentAmount:m,progress:i,progressColor:p,remainingAmount:s,daysRemaining:f,dailySaving:h,motivationMessage:n,formatDate:w,formatNumber:v,updateCurrentAmount:x}}}),A=e=>(Y("data-v-5a2f22bd"),e=e(),X(),e),Vt={class:"text-h5 text-weight-bold text-dark"},Ft={key:0,class:"text-caption text-grey-7 q-mt-xs"},Nt={class:"row justify-center q-mb-lg"},Qt={class:"relative-position",style:{width:"140px",height:"140px"}},Bt={class:"text-center"},zt={class:"text-h5 text-weight-bold text-primary"},It=A(()=>t("div",{class:"text-caption text-grey-7"},"erreicht",-1)),Tt={class:"row justify-between items-center q-mb-lg"},Zt={class:"text-center"},Pt=A(()=>t("div",{class:"text-caption text-grey-7"},"Gespart",-1)),Et={class:"text-h4 text-weight-bold text-primary"},Mt={class:"text-center"},jt=A(()=>t("div",{class:"text-caption text-grey-7"},"Ziel",-1)),Ut={class:"text-h4 text-weight-bold text-dark"},Ot={class:"row items-center"},Lt=A(()=>t("div",{class:"col"},[t("div",{class:"text-caption text-weight-medium text-dark"}," Aktuellen Betrag anpassen ")],-1)),Kt={class:"col-auto"},Jt=A(()=>t("span",{class:"text-caption text-grey-7"},"â‚¬",-1)),Rt={class:"row q-col-gutter-sm q-mb-lg"},Ht={class:"col-6"},Wt=A(()=>t("div",{class:"text-caption text-weight-medium text-dark"},"Ziel-Datum",-1)),Yt={class:"text-caption text-grey-7"},Xt={class:"text-caption text-primary text-weight-medium"},ea={class:"col-6"},ta=A(()=>t("div",{class:"text-caption text-weight-medium text-dark"},"TÃ¤glich sparen",-1)),aa={class:"text-caption text-primary text-weight-medium"},oa=A(()=>t("div",{class:"text-caption text-grey-7"},"fÃ¼r Ziel",-1)),sa={key:0,class:"row items-center justify-center q-mb-lg"},la=A(()=>t("div",{class:"text-caption text-grey-7"},"Kategorie:",-1)),ra=A(()=>t("div",{class:"text-caption"},"Noch zu sparen",-1)),ia={class:"text-h5 text-weight-bold"},na={class:"text-caption"};function ca(e,o,d,m,i,p){return b(),F(k,{class:"details-card bg-surface"},{default:r(()=>[a($,{class:"text-center q-pb-none"},{default:r(()=>[t("div",Vt,u(e.goal.title),1),e.goal.description?(b(),C("div",Ft,u(e.goal.description),1)):N("",!0)]),_:1}),a($,{class:"q-pt-md"},{default:r(()=>[t("div",Nt,[t("div",Qt,[a(At,{"show-value":"",value:e.progress,size:"140px",thickness:.22,color:e.progressColor,"track-color":e.$q.dark.isActive?"grey-8":"grey-3",class:"q-mb-md"},{default:r(()=>[t("div",Bt,[t("div",zt,u(e.progress.toFixed(1))+"% ",1),It])]),_:1},8,["value","color","track-color"])])]),t("div",Tt,[t("div",Zt,[Pt,t("div",Et," â‚¬"+u(e.formatNumber(e.goal.current_amount)),1)]),a(q,{name:"arrow_forward",size:"sm",color:e.$q.dark.isActive?"grey-6":"grey-5"},null,8,["color"]),t("div",Mt,[jt,t("div",Ut," â‚¬"+u(e.formatNumber(e.goal.target_amount)),1)])]),a(k,{flat:"",class:"bg-edit-card q-mb-lg"},{default:r(()=>[a($,{class:"q-pa-md"},{default:r(()=>[t("div",Ot,[Lt,t("div",Kt,[a(z,{modelValue:e.currentAmount,"onUpdate:modelValue":[o[0]||(o[0]=s=>e.currentAmount=s),e.updateCurrentAmount],type:"number",dense:"",outlined:"",style:{width:"120px"},class:"amount-input",dark:e.$q.dark.isActive},{prepend:r(()=>[Jt]),_:1},8,["modelValue","onUpdate:modelValue","dark"])])])]),_:1})]),_:1}),t("div",Rt,[t("div",Ht,[a(k,{flat:"",class:"bg-detail-card"},{default:r(()=>[a($,{class:"q-pa-md text-center"},{default:r(()=>[a(q,{name:"event",size:"sm",color:"primary",class:"q-mb-xs"}),Wt,t("div",Yt,u(e.formatDate(e.goal.target_date)),1),t("div",Xt,u(e.daysRemaining)+" Tage ",1)]),_:1})]),_:1})]),t("div",ea,[a(k,{flat:"",class:"bg-detail-card"},{default:r(()=>[a($,{class:"q-pa-md text-center"},{default:r(()=>[a(q,{name:"savings",size:"sm",color:"primary",class:"q-mb-xs"}),ta,t("div",aa," â‚¬"+u(e.dailySaving),1),oa]),_:1})]),_:1})])]),e.goal.category_name?(b(),C("div",sa,[a(q,{name:"category",size:"sm",color:e.$q.dark.isActive?"grey-5":"grey-6",class:"q-mr-sm"},null,8,["color"]),la,a(M,{label:e.goal.category_name,color:"accent",class:"q-ml-sm text-caption"},null,8,["label"])])):N("",!0),a(k,{flat:"",class:"bg-primary text-white q-mb-md"},{default:r(()=>[a($,{class:"text-center q-py-sm"},{default:r(()=>[ra,t("div",ia,"â‚¬"+u(e.formatNumber(e.remainingAmount)),1)]),_:1})]),_:1}),e.progress<100?(b(),F(k,{key:1,flat:"",class:"bg-motivation text-dark"},{default:r(()=>[a($,{class:"text-center q-py-sm"},{default:r(()=>[t("div",na,u(e.motivationMessage),1)]),_:1})]),_:1})):N("",!0)]),_:1}),a(ce,{align:"center",class:"q-pa-md"},{default:r(()=>[ee(a(S,{flat:"",label:"SchlieÃŸen",color:"primary",class:"close-button"},null,512),[[ae]])]),_:1})]),_:1})}const da=U(Gt,[["render",ca],["__scopeId","data-v-5a2f22bd"]]),ua=O({name:"GoalsView",components:{GoalCard:lt,GoalCreator:Dt,GoalDetails:da},setup(){const e=te(),o=D([]),d=D(!0),m=D("active"),i=D(!1),p=D(!1),s=D(!1),f=D(null),h=D(null),n=D(null),w=D(1),v=()=>{e.dark.set(!e.dark.isActive)},x=c(()=>{const _=o.value.filter(T=>T.status==="in_progress").length,B=o.value.filter(T=>T.status==="completed").length,P=o.value.filter(T=>T.status==="overdue").length;return{active:_,completed:B,overdue:P}}),l=c(()=>{switch(m.value){case"active":return o.value.filter(_=>_.status!=="completed");case"completed":return o.value.filter(_=>_.status==="completed");case"overdue":return o.value.filter(_=>_.status==="overdue");default:return o.value}}),g=c(()=>{switch(m.value){case"active":return"Noch keine Ziele";case"completed":return"Keine erreichten Ziele";case"overdue":return"Keine Ã¼berfÃ¤lligen Ziele";default:return"Keine Ziele gefunden"}}),y=c(()=>{switch(m.value){case"active":return"Beginne deine Sparreise, indem du dein erstes Ziel erstellst.";case"completed":return"Du hast noch keine Ziele erfolgreich abgeschlossen.";case"overdue":return"GlÃ¼ckwunsch! Alle Ziele sind aktuell im Zeitplan.";default:return"Keine Ziele in dieser Kategorie vorhanden."}}),G=async()=>{var _;try{d.value=!0;const B=await fetch("http://localhost:3000/api/goals/progress/1"),P=await B.text();(_=B.headers.get("content-type"))!=null&&_.includes("application/json")?o.value=JSON.parse(P):(console.error("Server returned HTML instead of JSON:",P),e.notify({type:"negative",message:"Server-Fehler: Falsches Format",position:"top"}))}catch(B){console.error("Error fetching goals:",B),e.notify({type:"negative",message:"Fehler beim Laden der Ziele",position:"top"})}finally{d.value=!1}},Q=_=>{f.value=_,p.value=!0},Z=_=>{h.value=_,i.value=!0},ge=_=>{n.value=_,s.value=!0},ve=async()=>{try{(await fetch(`http://localhost:3000/api/goals/${n.value.id}`,{method:"DELETE"})).ok&&(e.notify({type:"positive",message:"Ziel erfolgreich gelÃ¶scht",position:"top"}),G())}catch{e.notify({type:"negative",message:"Fehler beim LÃ¶schen des Ziels",position:"top"})}finally{s.value=!1,n.value=null}},fe=()=>{oe(),G(),e.notify({type:"positive",message:h.value?"Ziel aktualisiert":"Ziel erstellt",position:"top"})},oe=()=>{i.value=!1,h.value=null};return Ge(G),{goals:o,loading:d,activeTab:m,showCreateDialog:i,showDetailsDialog:p,showDeleteDialog:s,selectedGoal:f,editingGoal:h,deletingGoal:n,userId:w,stats:x,filteredGoals:l,emptyStateMessage:g,emptyStateDescription:y,openGoalDetails:Q,editGoal:Z,confirmDeleteGoal:ge,deleteGoal:ve,handleGoalSaved:fe,closeDialogs:oe,fetchGoals:G,toggleDarkMode:v}}}),ma={class:"goals-view"},ga={class:"dark-mode-toggle"},va={class:"header-section q-mb-xl"},fa={class:"row items-center justify-between q-mb-lg"},pa=t("div",{class:"col"},[t("div",{class:"header-content"},[t("h1",{class:"text-h3 text-weight-bold text-dark q-mb-xs"}," ðŸŽ¯ Sparziele "),t("p",{class:"text-subtitle1 text-grey-7"}," Verwalte und verfolge deine finanziellen Ziele ")])],-1),ha={class:"col-auto"},ba={class:"row q-col-gutter-md q-mb-lg"},ya={class:"col-12 col-sm-4"},_a={class:"stat-icon bg-primary"},$a={class:"text-h2 text-weight-bold text-primary"},ka=t("div",{class:"text-subtitle2 text-grey-7"},"Aktive Ziele",-1),wa={class:"col-12 col-sm-4"},xa={class:"stat-icon bg-positive"},qa={class:"text-h2 text-weight-bold text-positive"},Da=t("div",{class:"text-subtitle2 text-grey-7"},"Erreicht",-1),Sa={class:"col-12 col-sm-4"},Ca={class:"stat-icon bg-negative"},Aa={class:"text-h2 text-weight-bold text-negative"},Ga=t("div",{class:"text-subtitle2 text-grey-7"},"ÃœberfÃ¤llig",-1),Va={class:"content-section"},Fa={key:0,class:"loading-section text-center q-py-xl"},Na=t("div",{class:"text-h6 text-grey-7 q-mt-md"},"Lade Ziele...",-1),Qa={key:1,class:"goals-grid"},Ba={class:"row q-col-gutter-lg"},za={class:"empty-icon"},Ia={class:"text-h5 text-weight-medium text-grey-7 q-mb-md"},Ta={class:"text-grey-6 q-mb-xl"},Za={class:"warning-icon"},Pa=t("div",{class:"text-h6 text-weight-bold text-dark q-mb-sm"},"Ziel lÃ¶schen",-1),Ea={class:"text-grey-7"},Ma=t("br",null,null,-1);function ja(e,o,d,m,i,p){const s=J("GoalCard"),f=J("GoalCreator"),h=J("GoalDetails");return b(),F(Ne,{class:"q-pa-lg bg-page responsive-page-padding"},{default:r(()=>[t("div",ma,[t("div",ga,[a(S,{round:"",color:e.$q.dark.isActive?"grey-9":"yellow-9",icon:e.$q.dark.isActive?"dark_mode":"light_mode",class:"toggle-btn",onClick:e.toggleDarkMode,size:"lg"},null,8,["color","icon","onClick"])]),t("div",va,[t("div",fa,[pa,t("div",ha,[a(S,{label:"Neues Ziel",icon:"add",color:"primary",class:"create-button",onClick:o[0]||(o[0]=n=>e.showCreateDialog=!0)})])]),t("div",ba,[t("div",ya,[a(k,{class:"stat-card active-stat"},{default:r(()=>[a($,{class:"text-center q-pa-lg"},{default:r(()=>[t("div",_a,[a(q,{name:"trending_up",color:"white"})]),t("div",$a,u(e.stats.active),1),ka]),_:1})]),_:1})]),t("div",wa,[a(k,{class:"stat-card completed-stat"},{default:r(()=>[a($,{class:"text-center q-pa-lg"},{default:r(()=>[t("div",xa,[a(q,{name:"check_circle",color:"white"})]),t("div",qa,u(e.stats.completed),1),Da]),_:1})]),_:1})]),t("div",Sa,[a(k,{class:"stat-card overdue-stat"},{default:r(()=>[a($,{class:"text-center q-pa-lg"},{default:r(()=>[t("div",Ca,[a(q,{name:"warning",color:"white"})]),t("div",Aa,u(e.stats.overdue),1),Ga]),_:1})]),_:1})])]),a(k,{class:"filter-card"},{default:r(()=>[a(Ve,{modelValue:e.activeTab,"onUpdate:modelValue":o[1]||(o[1]=n=>e.activeTab=n),class:"filter-tabs text-primary","indicator-color":"primary",align:"justify"},{default:r(()=>[a(H,{name:"active",icon:"schedule",label:`Aktiv (${e.stats.active+e.stats.overdue})`,class:"text-weight-medium"},null,8,["label"]),a(H,{name:"completed",icon:"check_circle",label:`Erreicht (${e.stats.completed})`,class:"text-weight-medium"},null,8,["label"]),a(H,{name:"overdue",icon:"warning",label:`ÃœberfÃ¤llig (${e.stats.overdue})`,class:"text-weight-medium"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1})]),t("div",Va,[e.loading?(b(),C("div",Fa,[a(Fe,{size:"50px",color:"primary",class:"loading-spinner"}),Na])):e.filteredGoals.length>0?(b(),C("div",Qa,[t("div",Ba,[(b(!0),C(ie,null,ne(e.filteredGoals,n=>(b(),C("div",{key:n.id,class:"col-12 col-md-6 col-lg-4"},[a(s,{goal:n,onClick:w=>e.openGoalDetails(n),onEdit:w=>e.editGoal(n),onDelete:w=>e.confirmDeleteGoal(n)},null,8,["goal","onClick","onEdit","onDelete"])]))),128))])])):(b(),F(k,{key:2,class:"empty-state text-center"},{default:r(()=>[a($,{class:"q-pa-xl"},{default:r(()=>[t("div",za,[a(q,{name:"savings"})]),t("div",Ia,u(e.emptyStateMessage),1),t("p",Ta,u(e.emptyStateDescription),1),e.activeTab==="active"?(b(),F(S,{key:0,label:"Erstes Ziel erstellen",color:"primary",icon:"add",class:"empty-state-button",onClick:o[2]||(o[2]=n=>e.showCreateDialog=!0)})):N("",!0)]),_:1})]),_:1}))]),a(Ze,{position:"bottom-right",offset:[18,18]},{default:r(()=>[a(S,{fab:"",icon:"add",color:"primary",class:"fab-button",onClick:o[3]||(o[3]=n=>e.showCreateDialog=!0)})]),_:1}),a(R,{modelValue:e.showCreateDialog,"onUpdate:modelValue":o[4]||(o[4]=n=>e.showCreateDialog=n),persistent:""},{default:r(()=>[a(f,{userId:e.userId,editGoal:e.editingGoal,onSaved:e.handleGoalSaved,onCancel:e.closeDialogs},null,8,["userId","editGoal","onSaved","onCancel"])]),_:1},8,["modelValue"]),a(R,{modelValue:e.showDetailsDialog,"onUpdate:modelValue":o[6]||(o[6]=n=>e.showDetailsDialog=n)},{default:r(()=>[a(h,{goal:e.selectedGoal,onClose:o[5]||(o[5]=n=>e.showDetailsDialog=!1),onUpdated:e.fetchGoals},null,8,["goal","onUpdated"])]),_:1},8,["modelValue"]),a(R,{modelValue:e.showDeleteDialog,"onUpdate:modelValue":o[7]||(o[7]=n=>e.showDeleteDialog=n)},{default:r(()=>[a(k,{class:"delete-dialog"},{default:r(()=>[a($,{class:"text-center q-pa-xl"},{default:r(()=>{var n;return[t("div",Za,[a(q,{name:"warning"})]),Pa,t("p",Ea,[I(" Bist du sicher, dass du das Ziel"),Ma,t("strong",null,'"'+u((n=e.deletingGoal)==null?void 0:n.title)+'"',1),I(" lÃ¶schen mÃ¶chtest? ")])]}),_:1}),a(ce,{align:"center",class:"q-pb-xl"},{default:r(()=>[ee(a(S,{flat:"",label:"Abbrechen",color:"grey-6",class:"cancel-button"},null,512),[[ae]]),a(S,{label:"LÃ¶schen",color:"negative",onClick:e.deleteGoal,class:"delete-confirm-button"},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),_:1})}const eo=U(ua,[["render",ja]]);export{eo as default};

function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/jspdf.es.min-DxpkvOaK.js","assets/index-wRLNoSK_.js","assets/index-CH8X13T7.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{B as Se,C as Ge,r as h,a as n,ac as He,D as re,ag as We,ab as Ye,A as Je,ah as O,a2 as Ze,h as M,ad as ea,c as aa,E as ta,a3 as la,_ as oa,I as na,b as J,d as ra,w as I,f as sa,S as ia,o as ua,g,j as x,ai as pe,Q as ca,K as F,k as W,i as ee,N as ge,O as xe,M as he,m as ma,q as da,aj as Ce,s as va,t as fa}from"./index-wRLNoSK_.js";import{u as ba,c as ya,Q as se,a as pa}from"./QInput-DsmJXSEa.js";import{b as ie}from"./QSelect-Bwf8Y-zP.js";import{u as ga,Q as ue}from"./use-quasar-DdmeiJJS.js";import{Q as xa}from"./QCardActions-CXuEaoKC.js";import{Q as ha}from"./QDialog-BYuOmwN6.js";import{Q as Ca}from"./QPage-CcoiKmni.js";import{C as ka}from"./ClosePopup-Dpv5Y6cu.js";import{a as ke}from"./axios-DnX1qazU.js";const Me="q-slider__marker-labels",Ma=e=>({value:e}),Sa=({marker:e})=>M("div",{key:e.value,style:e.style,class:e.classes},e.label),_e=[34,37,40,33,39,38],_a={...Je,...ba,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},Ra=["pan","update:modelValue","change"];function Ta({updateValue:e,updatePosition:f,getDragging:T,formAttrs:r}){const{props:a,emit:$,slots:m,proxy:{$q:C}}=Se(),u=Ge(a,C),U=ya(r),V=h(!1),E=h(!1),S=h(!1),q=h(!1),w=n(()=>a.vertical===!0?"--v":"--h"),Y=n(()=>"-"+(a.switchLabelSide===!0?"switched":"standard")),R=n(()=>a.vertical===!0?a.reverse===!0:a.reverse!==(C.lang.rtl===!0)),_=n(()=>isNaN(a.innerMin)===!0||a.innerMin<a.min?a.min:a.innerMin),D=n(()=>isNaN(a.innerMax)===!0||a.innerMax>a.max?a.max:a.innerMax),L=n(()=>a.disable!==!0&&a.readonly!==!0&&_.value<D.value),K=n(()=>{if(a.step===0)return i=>i;const t=(String(a.step).trim().split(".")[1]||"").length;return i=>parseFloat(i.toFixed(t))}),X=n(()=>a.step===0?1:a.step),Q=n(()=>L.value===!0?a.tabindex||0:-1),P=n(()=>a.max-a.min),G=n(()=>D.value-_.value),z=n(()=>ae(_.value)),H=n(()=>ae(D.value)),N=n(()=>a.vertical===!0?R.value===!0?"bottom":"top":R.value===!0?"right":"left"),o=n(()=>a.vertical===!0?"height":"width"),l=n(()=>a.vertical===!0?"width":"height"),s=n(()=>a.vertical===!0?"vertical":"horizontal"),d=n(()=>{const t={role:"slider","aria-valuemin":_.value,"aria-valuemax":D.value,"aria-orientation":s.value,"data-step":a.step};return a.disable===!0?t["aria-disabled"]="true":a.readonly===!0&&(t["aria-readonly"]="true"),t}),c=n(()=>`q-slider q-slider${w.value} q-slider--${V.value===!0?"":"in"}active inline no-wrap `+(a.vertical===!0?"row":"column")+(a.disable===!0?" disabled":" q-slider--enabled"+(L.value===!0?" q-slider--editable":""))+(S.value==="both"?" q-slider--focus":"")+(a.label||a.labelAlways===!0?" q-slider--label":"")+(a.labelAlways===!0?" q-slider--label-always":"")+(u.value===!0?" q-slider--dark":"")+(a.dense===!0?" q-slider--dense q-slider--dense"+w.value:""));function v(t){const i="q-slider__"+t;return`${i} ${i}${w.value} ${i}${w.value}${Y.value}`}function b(t){const i="q-slider__"+t;return`${i} ${i}${w.value}`}const B=n(()=>{const t=a.selectionColor||a.color;return"q-slider__selection absolute"+(t!==void 0?` text-${t}`:"")}),Z=n(()=>b("markers")+" absolute overflow-hidden"),Re=n(()=>b("track-container")),Te=n(()=>v("pin")),we=n(()=>v("label")),$e=n(()=>v("text-container")),Ve=n(()=>v("marker-labels-container")+(a.markerLabelsClass!==void 0?` ${a.markerLabelsClass}`:"")),De=n(()=>"q-slider__track relative-position no-outline"+(a.trackColor!==void 0?` bg-${a.trackColor}`:"")),Le=n(()=>{const t={[l.value]:a.trackSize};return a.trackImg!==void 0&&(t.backgroundImage=`url(${a.trackImg}) !important`),t}),Fe=n(()=>"q-slider__inner absolute"+(a.innerTrackColor!==void 0?` bg-${a.innerTrackColor}`:"")),ce=n(()=>{const t=H.value-z.value,i={[N.value]:`${100*z.value}%`,[o.value]:t===0?"2px":`${100*t}%`};return a.innerTrackImg!==void 0&&(i.backgroundImage=`url(${a.innerTrackImg}) !important`),i});function qe(t){const{min:i,max:y,step:p}=a;let k=i+t*(y-i);if(p>0){const A=(k-_.value)%p;k+=(Math.abs(A)>=p/2?(A<0?-1:1)*p:0)-A}return k=K.value(k),O(k,_.value,D.value)}function ae(t){return P.value===0?0:(t-a.min)/P.value}function Be(t,i){const y=Ze(t),p=a.vertical===!0?O((y.top-i.top)/i.height,0,1):O((y.left-i.left)/i.width,0,1);return O(R.value===!0?1-p:p,z.value,H.value)}const me=n(()=>He(a.markers)===!0?a.markers:X.value),de=n(()=>{const t=[],i=me.value,y=a.max;let p=a.min;do t.push(p),p+=i;while(p<y);return t.push(y),t}),ve=n(()=>{const t=` ${Me}${w.value}-`;return Me+`${t}${a.switchMarkerLabelsSide===!0?"switched":"standard"}${t}${R.value===!0?"rtl":"ltr"}`}),te=n(()=>a.markerLabels===!1?null:Oe(a.markerLabels).map((t,i)=>({index:i,value:t.value,label:t.label||t.value,classes:ve.value+(t.classes!==void 0?" "+t.classes:""),style:{...be(t.value),...t.style||{}}}))),fe=n(()=>({markerList:te.value,markerMap:Ee.value,classes:ve.value,getStyle:be})),Ie=n(()=>{const t=G.value===0?"2px":100*me.value/G.value;return{...ce.value,backgroundSize:a.vertical===!0?`2px ${t}%`:`${t}% 2px`}});function Oe(t){if(t===!1)return null;if(t===!0)return de.value.map(Ma);if(typeof t=="function")return de.value.map(y=>{const p=t(y);return re(p)===!0?{...p,value:y}:{value:y,label:p}});const i=({value:y})=>y>=a.min&&y<=a.max;return Array.isArray(t)===!0?t.map(y=>re(y)===!0?y:{value:y}).filter(i):Object.keys(t).map(y=>{const p=t[y],k=Number(y);return re(p)===!0?{...p,value:k}:{value:k,label:p}}).filter(i)}function be(t){return{[N.value]:`${100*(t-a.min)/P.value}%`}}const Ee=n(()=>{if(a.markerLabels===!1)return null;const t={};return te.value.forEach(i=>{t[i.value]=i}),t});function Pe(){if(m["marker-label-group"]!==void 0)return m["marker-label-group"](fe.value);const t=m["marker-label"]||Sa;return te.value.map(i=>t({marker:i,...fe.value}))}const Ne=n(()=>[[We,Ae,void 0,{[s.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ae(t){t.isFinal===!0?(q.value!==void 0&&(f(t.evt),t.touch===!0&&e(!0),q.value=void 0,$("pan","end")),V.value=!1,S.value=!1):t.isFirst===!0?(q.value=T(t.evt),f(t.evt),e(),V.value=!0,$("pan","start")):(f(t.evt),e())}function ye(){S.value=!1}function je(t){f(t,T(t)),e(),E.value=!0,V.value=!0,document.addEventListener("mouseup",le,!0)}function le(){E.value=!1,V.value=!1,e(!0),ye(),document.removeEventListener("mouseup",le,!0)}function Qe(t){f(t,T(t)),e(!0)}function ze(t){_e.includes(t.keyCode)&&e(!0)}function Ue(t){if(a.vertical===!0)return null;const i=C.lang.rtl!==a.reverse?1-t:t;return{transform:`translateX(calc(${2*i-1} * ${a.thumbSize} / 2 + ${50-100*i}%))`}}function Ke(t){const i=n(()=>E.value===!1&&(S.value===t.focusValue||S.value==="both")?" q-slider--focus":""),y=n(()=>`q-slider__thumb q-slider__thumb${w.value} q-slider__thumb${w.value}-${R.value===!0?"rtl":"ltr"} absolute non-selectable`+i.value+(t.thumbColor.value!==void 0?` text-${t.thumbColor.value}`:"")),p=n(()=>({width:a.thumbSize,height:a.thumbSize,[N.value]:`${100*t.ratio.value}%`,zIndex:S.value===t.focusValue?2:void 0})),k=n(()=>t.labelColor.value!==void 0?` text-${t.labelColor.value}`:""),A=n(()=>Ue(t.ratio.value)),oe=n(()=>"q-slider__text"+(t.labelTextColor.value!==void 0?` text-${t.labelTextColor.value}`:""));return()=>{const ne=[M("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[M("path",{d:a.thumbPath})]),M("div",{class:"q-slider__focus-ring fit"})];return(a.label===!0||a.labelAlways===!0)&&(ne.push(M("div",{class:Te.value+" absolute fit no-pointer-events"+k.value},[M("div",{class:we.value,style:{minWidth:a.thumbSize}},[M("div",{class:$e.value,style:A.value},[M("span",{class:oe.value},t.label.value)])])])),a.name!==void 0&&a.disable!==!0&&U(ne,"push")),M("div",{class:y.value,style:p.value,...t.getNodeData()},ne)}}function Xe(t,i,y,p){const k=[];a.innerTrackColor!=="transparent"&&k.push(M("div",{key:"inner",class:Fe.value,style:ce.value})),a.selectionColor!=="transparent"&&k.push(M("div",{key:"selection",class:B.value,style:t.value})),a.markers!==!1&&k.push(M("div",{key:"marker",class:Z.value,style:Ie.value})),p(k);const A=[ea("div",{key:"trackC",class:Re.value,tabindex:i.value,...y.value},[M("div",{class:De.value,style:Le.value},k)],"slide",L.value,()=>Ne.value)];if(a.markerLabels!==!1){const oe=a.switchMarkerLabelsSide===!0?"unshift":"push";A[oe](M("div",{key:"markerL",class:Ve.value},Pe()))}return A}return Ye(()=>{document.removeEventListener("mouseup",le,!0)}),{state:{active:V,focus:S,preventFocus:E,dragging:q,editable:L,classes:c,tabindex:Q,attributes:d,roundValueFn:K,keyStep:X,trackLen:P,innerMin:_,innerMinRatio:z,innerMax:D,innerMaxRatio:H,positionProp:N,sizeProp:o,isReversed:R},methods:{onActivate:je,onMobileClick:Qe,onBlur:ye,onKeyup:ze,getContent:Xe,getThumbRenderFn:Ke,convertRatioToModel:qe,convertModelToRatio:ae,getDraggingRatio:Be}}}const j={MIN:0,RANGE:1,MAX:2},wa=aa({name:"QRange",props:{..._a,modelValue:{type:Object,default:()=>({min:null,max:null}),validator:e=>"min"in e&&"max"in e},dragRange:Boolean,dragOnlyRange:Boolean,leftLabelColor:String,leftLabelTextColor:String,rightLabelColor:String,rightLabelTextColor:String,leftLabelValue:[String,Number],rightLabelValue:[String,Number],leftThumbColor:String,rightThumbColor:String},emits:Ra,setup(e,{emit:f}){const{proxy:{$q:T}}=Se(),{state:r,methods:a}=Ta({updateValue:G,updatePosition:H,getDragging:z,formAttrs:n(()=>({type:"hidden",name:e.name,value:`${e.modelValue.min}|${e.modelValue.max}`}))}),$=h(null),m=h(0),C=h(0),u=h({min:0,max:0});function U(){u.value.min=e.modelValue.min===null?r.innerMin.value:O(e.modelValue.min,r.innerMin.value,r.innerMax.value),u.value.max=e.modelValue.max===null?r.innerMax.value:O(e.modelValue.max,r.innerMin.value,r.innerMax.value)}ta(()=>`${e.modelValue.min}|${e.modelValue.max}|${r.innerMin.value}|${r.innerMax.value}`,U),U();const V=n(()=>a.convertModelToRatio(u.value.min)),E=n(()=>a.convertModelToRatio(u.value.max)),S=n(()=>r.active.value===!0?m.value:V.value),q=n(()=>r.active.value===!0?C.value:E.value),w=n(()=>{const o={[r.positionProp.value]:`${100*S.value}%`,[r.sizeProp.value]:`${100*(q.value-S.value)}%`};return e.selectionImg!==void 0&&(o.backgroundImage=`url(${e.selectionImg}) !important`),o}),Y=n(()=>{if(r.editable.value!==!0)return{};if(T.platform.is.mobile===!0)return{onClick:a.onMobileClick};const o={onMousedown:a.onActivate};return(e.dragRange===!0||e.dragOnlyRange===!0)&&Object.assign(o,{onFocus:()=>{r.focus.value="both"},onBlur:a.onBlur,onKeydown:N,onKeyup:a.onKeyup}),o});function R(o){return T.platform.is.mobile!==!0&&r.editable.value===!0&&e.dragOnlyRange!==!0?{onFocus:()=>{r.focus.value=o},onBlur:a.onBlur,onKeydown:N,onKeyup:a.onKeyup}:{}}const _=n(()=>e.dragOnlyRange!==!0?r.tabindex.value:null),D=n(()=>T.platform.is.mobile!==!0&&(e.dragRange||e.dragOnlyRange===!0)?r.tabindex.value:null),L=h(null),K=n(()=>R("min")),X=a.getThumbRenderFn({focusValue:"min",getNodeData:()=>({ref:L,key:"tmin",...K.value,tabindex:_.value}),ratio:S,label:n(()=>e.leftLabelValue!==void 0?e.leftLabelValue:u.value.min),thumbColor:n(()=>e.leftThumbColor||e.thumbColor||e.color),labelColor:n(()=>e.leftLabelColor||e.labelColor),labelTextColor:n(()=>e.leftLabelTextColor||e.labelTextColor)}),Q=n(()=>R("max")),P=a.getThumbRenderFn({focusValue:"max",getNodeData:()=>({...Q.value,key:"tmax",tabindex:_.value}),ratio:q,label:n(()=>e.rightLabelValue!==void 0?e.rightLabelValue:u.value.max),thumbColor:n(()=>e.rightThumbColor||e.thumbColor||e.color),labelColor:n(()=>e.rightLabelColor||e.labelColor),labelTextColor:n(()=>e.rightLabelTextColor||e.labelTextColor)});function G(o){(u.value.min!==e.modelValue.min||u.value.max!==e.modelValue.max)&&f("update:modelValue",{...u.value}),o===!0&&f("change",{...u.value})}function z(o){const{left:l,top:s,width:d,height:c}=$.value.getBoundingClientRect(),v=e.dragOnlyRange===!0?0:e.vertical===!0?L.value.offsetHeight/(2*c):L.value.offsetWidth/(2*d),b={left:l,top:s,width:d,height:c,valueMin:u.value.min,valueMax:u.value.max,ratioMin:V.value,ratioMax:E.value},B=a.getDraggingRatio(o,b);return e.dragOnlyRange!==!0&&B<b.ratioMin+v?b.type=j.MIN:e.dragOnlyRange===!0||B<b.ratioMax-v?e.dragRange===!0||e.dragOnlyRange===!0?(b.type=j.RANGE,Object.assign(b,{offsetRatio:B,offsetModel:a.convertRatioToModel(B),rangeValue:b.valueMax-b.valueMin,rangeRatio:b.ratioMax-b.ratioMin})):b.type=b.ratioMax-B<B-b.ratioMin?j.MAX:j.MIN:b.type=j.MAX,b}function H(o,l=r.dragging.value){let s;const d=a.getDraggingRatio(o,l),c=a.convertRatioToModel(d);switch(l.type){case j.MIN:d<=l.ratioMax?(s={minR:d,maxR:l.ratioMax,min:c,max:l.valueMax},r.focus.value="min"):(s={minR:l.ratioMax,maxR:d,min:l.valueMax,max:c},r.focus.value="max");break;case j.MAX:d>=l.ratioMin?(s={minR:l.ratioMin,maxR:d,min:l.valueMin,max:c},r.focus.value="max"):(s={minR:d,maxR:l.ratioMin,min:c,max:l.valueMin},r.focus.value="min");break;case j.RANGE:const v=d-l.offsetRatio,b=O(l.ratioMin+v,r.innerMinRatio.value,r.innerMaxRatio.value-l.rangeRatio),B=c-l.offsetModel,Z=O(l.valueMin+B,r.innerMin.value,r.innerMax.value-l.rangeValue);s={minR:b,maxR:b+l.rangeRatio,min:r.roundValueFn.value(Z),max:r.roundValueFn.value(Z+l.rangeValue)},r.focus.value="both";break}u.value=u.value.min===null||u.value.max===null?{min:s.min||e.min,max:s.max||e.max}:{min:s.min,max:s.max},e.snap!==!0||e.step===0?(m.value=s.minR,C.value=s.maxR):(m.value=a.convertModelToRatio(u.value.min),C.value=a.convertModelToRatio(u.value.max))}function N(o){if(!_e.includes(o.keyCode))return;la(o);const l=([34,33].includes(o.keyCode)?10:1)*r.keyStep.value,s=([34,37,40].includes(o.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*l;if(r.focus.value==="both"){const d=u.value.max-u.value.min,c=O(r.roundValueFn.value(u.value.min+s),r.innerMin.value,r.innerMax.value-d);u.value={min:c,max:r.roundValueFn.value(c+d)}}else{if(r.focus.value===!1)return;{const d=r.focus.value;u.value={...u.value,[d]:O(r.roundValueFn.value(u.value[d]+s),d==="min"?r.innerMin.value:u.value.min,d==="max"?r.innerMax.value:u.value.max)}}}G()}return()=>{const o=a.getContent(w,D,Y,l=>{l.push(X(),P())});return M("div",{ref:$,class:"q-range "+r.classes.value+(e.modelValue.min===null||e.modelValue.max===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue.min+"|"+e.modelValue.max},o)}}}),$a=na({setup(){const e=ga(),f=h([]),T=h([]),r=h(""),a=h(null),$=h([]),m=h({from:"",to:""}),C=h({min:0,max:5e3}),u=h("date_desc"),U=[{label:"Income",value:"Einnahme"},{label:"Expense",value:"Ausgabe"}],V=[{label:"Date (Newest First)",value:"date_desc"},{label:"Date (Oldest First)",value:"date_asc"},{label:"Amount (Highest First)",value:"amount_desc"},{label:"Amount (Lowest First)",value:"amount_asc"}],E=n(()=>T.value.map(o=>({label:o.name,value:o.id}))),S=n(()=>{const o=new Map;return T.value.forEach(l=>o.set(l.id,l.name)),o}),q=(()=>{const o=sa.getToken();if(!o)return null;try{return ia(o).id}catch{return null}})();ua(async()=>{if(!q){f.value=[];return}await Promise.all([w(),Y()])});async function w(){try{const o=await ke.get("http://localhost:3000/categories");T.value=o.data}catch(o){console.error(o)}}async function Y(){try{const o=await ke.get(`http://localhost:3000/transactions/users/${q}`);f.value=o.data.map(l=>({...l,amount:Number(l.amount)||0,dateTs:new Date(l.date).getTime(),date:new Date(l.date).toLocaleDateString()}))}catch(o){console.error(o)}}const R=n(()=>{let o=[...f.value];if(r.value){const l=r.value.toLowerCase();o=o.filter(s=>{var d,c;return((d=s.description)==null?void 0:d.toLowerCase().includes(l))||((c=S.value.get(s.category_id))==null?void 0:c.toLowerCase().includes(l))})}switch(a.value&&(o=o.filter(l=>l.transaction_type===a.value)),$.value.length&&(o=o.filter(l=>$.value.includes(l.category_id))),o=o.filter(l=>l.amount>=C.value.min&&l.amount<=C.value.max),u.value){case"date_asc":o.sort((l,s)=>(l.dateTs||0)-(s.dateTs||0));break;case"date_desc":o.sort((l,s)=>(s.dateTs||0)-(l.dateTs||0));break;case"amount_asc":o.sort((l,s)=>l.amount-s.amount);break;case"amount_desc":o.sort((l,s)=>s.amount-l.amount);break}return o.map(l=>({id:l.id,title:l.description||"No description",category:S.value.get(l.category_id)||"Unknown",amount:l.amount,type:l.transaction_type==="Einnahme"?"income":"expense",currency:l.currency||"€",date:l.date}))}),_=n(()=>{const o={};return R.value.forEach(l=>{o[l.category]||(o[l.category]={category:l.category,income:0,expense:0,transactions:[]}),l.type==="income"?o[l.category].income+=l.amount:o[l.category].expense+=l.amount,o[l.category].transactions.push(l)}),Object.values(o)}),D=h(!1),L=h(null);function K(o){L.value=o,D.value=!0}function X(){r.value="",a.value=null,$.value=[],m.value={from:"",to:""},C.value={min:0,max:5e3},u.value="date_desc"}let Q=null;const P=async()=>{Q||(Q=Promise.all([Ce(()=>import("./jspdf.es.min-DxpkvOaK.js").then(s=>s.j),__vite__mapDeps([0,1,2])),Ce(()=>import("./jspdf.plugin.autotable-bUJAAMeG.js"),[])]));const[o,l]=await Q;return{jsPDF:o.jsPDF,autoTable:l.default||l}};return{searchText:r,transactionType:a,selectedCategories:$,dateRange:m,amountRange:C,sortOption:u,typeOptions:U,sortOptions:V,categoryOptions:E,resetFilters:X,categorySummaries:_,showCategoryDialog:D,activeCategory:L,openCategoryDialog:K,exportCSV:()=>{try{const o=["Date","Description","Category","Type","Amount"],l=R.value.map(v=>({date:v.date,description:v.title,category:v.category,type:v.type==="income"?"Income":"Expense",amount:`${v.type==="income"?"+":"-"}${v.amount} ${v.currency}`}));let s=o.join(",")+`
`;l.forEach(v=>{s+=Object.values(v).map(b=>`"${b}"`).join(",")+`
`});const d=new Blob([s],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");c.href=URL.createObjectURL(d),c.download=`transactions_${new Date().toISOString().slice(0,10)}.csv`,c.click(),e.notify({type:"positive",message:"CSV exported successfully"})}catch(o){console.error(o)}},exportPDF:async()=>{try{const{jsPDF:o,autoTable:l}=await P(),s=new o;s.text("Transaction Report",105,20,{align:"center"});const d=R.value.map(c=>[c.date,c.title,c.category,c.type==="income"?"Income":"Expense",`${c.amount} ${c.currency}`]);l(s,{head:[["Date","Description","Category","Type","Amount"]],body:d,startY:30}),s.save(`transactions_${new Date().toISOString().slice(0,10)}.pdf`),e.notify({type:"positive",message:"PDF report generated successfully"})}catch(o){console.error(o)}},exportCategoryCSV:()=>{try{const o=["Category","Income","Expenses","Balance"],l=_.value.map(v=>({category:v.category,income:v.income.toFixed(2),expenses:v.expense.toFixed(2),balance:(v.income-v.expense).toFixed(2)}));let s=o.join(",")+`
`;l.forEach(v=>{s+=Object.values(v).map(b=>`"${b}"`).join(",")+`
`});const d=new Blob([s],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a");c.href=URL.createObjectURL(d),c.download=`category_report_${new Date().toISOString().slice(0,10)}.csv`,c.click(),e.notify({type:"positive",message:"CSV exported successfully"})}catch(o){console.error(o)}},exportCategoryPDF:async()=>{try{const{jsPDF:o,autoTable:l}=await P(),s=new o;s.text("Category Summary Report",105,20,{align:"center"});const d=_.value.map(c=>[c.category,c.income.toFixed(2),c.expense.toFixed(2),(c.income-c.expense).toFixed(2)]);l(s,{head:[["Category","Income","Expenses","Balance"]],body:d,startY:30}),s.save(`category_report_${new Date().toISOString().slice(0,10)}.pdf`),e.notify({type:"positive",message:"PDF report generated successfully"})}catch(o){console.error(o)}}}}}),Va=e=>(va("data-v-074ba09e"),e=e(),fa(),e),Da={class:"column items-center q-mb-lg"},La={class:"row q-col-gutter-md"},Fa={class:"col-12 col-md-6"},qa={class:"col-12 col-md-3"},Ba={class:"col-12 col-md-3"},Ia={class:"col-12 col-md-6"},Oa={class:"col-12 col-md-6"},Ea=Va(()=>g("div",{class:"text-caption text-center q-mt-xs"},"Amount Range (€)",-1)),Pa={class:"row justify-between q-mt-xs"},Na={class:"text-caption"},Aa={class:"text-caption"},ja={class:"col-12"},Qa={class:"row justify-end q-mb-md"},za={class:"export-actions"},Ua={class:"row q-col-gutter-md justify-center"},Ka={class:"text-h6"},Xa={class:"q-mt-sm"},Ga={style:{color:"green"}},Ha={style:{color:"red"}},Wa={class:"text-h6"};function Ya(e,f,T,r,a,$){return J(),ra(Ca,{class:"q-pa-md transactions-page"},{default:I(()=>[g("div",Da,[x(pe,{color:"primary",class:"full-width q-my-md"})]),x(ue,{flat:"",bordered:"",class:"q-mb-md"},{default:I(()=>[x(se,null,{default:I(()=>[g("div",La,[g("div",Fa,[x(pa,{modelValue:e.searchText,"onUpdate:modelValue":f[0]||(f[0]=m=>e.searchText=m),label:"Search",clearable:"",outlined:"",dense:""},{append:I(()=>[x(ca,{name:"search"})]),_:1},8,["modelValue"])]),g("div",qa,[x(ie,{modelValue:e.transactionType,"onUpdate:modelValue":f[1]||(f[1]=m=>e.transactionType=m),options:e.typeOptions,label:"Transaction Type",outlined:"",dense:"",clearable:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),g("div",Ba,[x(ie,{modelValue:e.sortOption,"onUpdate:modelValue":f[2]||(f[2]=m=>e.sortOption=m),options:e.sortOptions,label:"Sort By",outlined:"",dense:"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),g("div",Ia,[x(ie,{modelValue:e.selectedCategories,"onUpdate:modelValue":f[3]||(f[3]=m=>e.selectedCategories=m),options:e.categoryOptions,label:"Categories",multiple:"",outlined:"",dense:"","use-chips":"","emit-value":"","map-options":""},null,8,["modelValue","options"])]),g("div",Oa,[x(wa,{modelValue:e.amountRange,"onUpdate:modelValue":f[4]||(f[4]=m=>e.amountRange=m),min:0,max:5e3,step:10,label:!1,color:"primary",style:{width:"100%"}},null,8,["modelValue"]),Ea,g("div",Pa,[g("div",Na,F(e.amountRange.min)+" €",1),g("div",Aa,F(e.amountRange.max)+" €",1)])]),g("div",ja,[x(W,{label:"Reset Filters",color:"negative",flat:"",onClick:e.resetFilters,class:"full-width"},null,8,["onClick"])])])]),_:1})]),_:1}),g("div",Qa,[g("div",za,[x(W,{color:"secondary",icon:"picture_as_pdf",label:"Export PDF (Transactions)",onClick:e.exportPDF,class:"q-mr-sm"},null,8,["onClick"]),x(W,{color:"positive",icon:"text_snippet",label:"Export CSV (Transactions)",onClick:e.exportCSV,class:"q-mr-sm"},null,8,["onClick"]),x(W,{color:"primary",icon:"picture_as_pdf",label:"Export PDF (Categories)",onClick:e.exportCategoryPDF,class:"q-mr-sm"},null,8,["onClick"]),x(W,{color:"teal",icon:"text_snippet",label:"Export CSV (Categories)",onClick:e.exportCategoryCSV},null,8,["onClick"])])]),g("div",Ua,[(J(!0),ee(he,null,ge(e.categorySummaries,m=>(J(),ee("div",{class:"col-12 col-sm-6 col-md-4 col-lg-3",key:m.category},[x(ue,{flat:"",bordered:"",class:"my-card",onClick:C=>e.openCategoryDialog(m)},{default:I(()=>[x(se,{class:"text-center"},{default:I(()=>[g("div",Ka,F(m.category),1),g("div",Xa,[g("div",Ga,"Income: +"+F(m.income.toFixed(2))+" €",1),g("div",Ha,"Expenses: -"+F(m.expense.toFixed(2))+" €",1),g("div",{style:xe({color:m.income-m.expense>=0?"green":"red"})}," Balance: "+F((m.income-m.expense).toFixed(2))+" € ",5)])]),_:2},1024)]),_:2},1032,["onClick"])]))),128))]),x(ha,{modelValue:e.showCategoryDialog,"onUpdate:modelValue":f[5]||(f[5]=m=>e.showCategoryDialog=m)},{default:I(()=>[x(ue,{class:"category-dialog-card"},{default:I(()=>[x(se,null,{default:I(()=>{var m,C;return[g("div",Wa,F((m=e.activeCategory)==null?void 0:m.category),1),x(pe,{class:"q-my-sm"}),(J(!0),ee(he,null,ge((C=e.activeCategory)==null?void 0:C.transactions,u=>(J(),ee("div",{key:u.id,class:"q-mb-sm"},[g("div",null,[ma(F(u.date)+" - "+F(u.title)+" - ",1),g("span",{style:xe({color:u.type==="income"?"green":"red"})},F(u.type==="income"?"+":"-")+F(u.amount)+" € ",5)])]))),128))]}),_:1}),x(xa,{align:"right"},{default:I(()=>[da(x(W,{flat:"",label:"Close",color:"primary"},null,512),[[ka]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}const st=oa($a,[["render",Ya],["__scopeId","data-v-074ba09e"]]);export{st as default};

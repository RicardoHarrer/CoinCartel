import{h as f,c as F,a as E,Q as u,_ as R,r as c,u as x,o as S,b as y,d as U,w as a,n as d,e as T,f as z,g as o,i as D,j as s,k as p,l as N,m as w,p as H,q as j,s as G,t as W}from"./index-wRLNoSK_.js";import{Q as _,a as v}from"./QInput-DsmJXSEa.js";import{u as Y,a as J,b as K}from"./use-checkbox-CFw6RUjr.js";import{Q as O}from"./QSpinnerHourglass-WTECqx9U.js";import{Q as q}from"./QCardActions-CXuEaoKC.js";import{u as X,Q as A}from"./use-quasar-DdmeiJJS.js";import{Q as Z}from"./QPage-CcoiKmni.js";import{Q as $}from"./QDialog-BYuOmwN6.js";import{C as ee}from"./ClosePopup-Dpv5Y6cu.js";import{a as oe}from"./axios-DnX1qazU.js";const se=f("div",{key:"svg",class:"q-checkbox__bg absolute"},[f("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[f("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),f("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),te=F({name:"QCheckbox",props:Y,emits:J,setup(i){function t(k,e){const g=E(()=>(k.value===!0?i.checkedIcon:e.value===!0?i.indeterminateIcon:i.uncheckedIcon)||null);return()=>g.value!==null?[f("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[f(u,{class:"q-checkbox__icon",name:g.value})])]:[se]}return K("checkbox",t)}}),le={name:"LoginPage",setup(){const i=c(""),t=c(""),k=c(!1),e=c(!1),g=c(!1),h=c(""),l=c(!1),b=x(),P=x(),n=X(),C=()=>{n.dark.set(!n.dark.isActive)},Q=r=>{r.target.closest(".q-field").classList.add("focused")},V=r=>{r.target.closest(".q-field").classList.remove("focused")},I=()=>{var r;((r=P.query)==null?void 0:r.bank)==="connected"?b.push("/bank-import"):b.push("/chart")},B=async()=>{if(!i.value||!t.value){n.notify({type:"warning",message:"Please fill in all fields.",position:"top"});return}l.value=!0;try{const r=await oe.post("http://localhost:3000/login",{username:i.value,password:t.value}),{token:L}=r.data;z.setToken(L),window.dispatchEvent(new Event("storage")),n.notify({type:"positive",message:"Login successful!",position:"top"}),I()}catch(r){console.error(r),n.notify({type:"negative",message:"Login failed. Please check your credentials.",position:"top"})}finally{l.value=!1}},M=()=>{n.notify({message:"Password reset link sent!",color:"positive",position:"top"}),g.value=!1};return S(()=>{}),{username:i,password:t,showPassword:k,rememberMe:e,showForgotPassword:g,forgotPasswordEmail:h,loading:l,toggleDarkMode:C,loginUser:B,onInputFocus:Q,onInputBlur:V,sendResetLink:M,$q:n}},methods:{goToRegisterPage(){this.$router.push("/register")}}},m=i=>(G("data-v-ff39bb5e"),i=i(),W(),i),ae={class:"svg-background"},ie={width:"100%",height:"100%",viewBox:"0 0 1200 800",preserveAspectRatio:"xMidYMid slice"},re={id:"gradient1",x1:"0%",y1:"0%",x2:"100%",y2:"100%"},ne=["stop-color"],ce=["stop-color"],de={id:"gradient2",x1:"100%",y1:"0%",x2:"0%",y2:"100%"},ge=["stop-color"],fe=["stop-color"],ue=m(()=>o("circle",{class:"svg-shape shape-1",cx:"100",cy:"150",r:"40",fill:"url(#gradient1)"},null,-1)),me=m(()=>o("circle",{class:"svg-shape shape-2",cx:"1100",cy:"300",r:"60",fill:"url(#gradient2)"},null,-1)),ke=m(()=>o("circle",{class:"svg-shape shape-3",cx:"200",cy:"600",r:"50",fill:"url(#gradient1)"},null,-1)),he=m(()=>o("circle",{class:"svg-shape shape-4",cx:"900",cy:"100",r:"45",fill:"url(#gradient2)"},null,-1)),pe={class:"svg-icon icon-1"},_e=["stroke"],ve=["stroke"],be=["fill"],xe=["fill"],ye=["fill"],we=["fill"],qe={class:"svg-icon icon-2"},Ae=["fill","stroke"],Pe=["fill"],Ce=["stroke"],Qe=["stroke"],Ve=["stroke"],Ie=["stroke"],Be={class:"dark-mode-toggle"},Me={class:"logo-container q-mb-md"},Le={class:"input-container q-mb-lg"},Fe={class:"input-container q-mb-lg"},Ee={class:"row justify-between items-center q-mb-lg"},Re=m(()=>o("div",{class:"text-h6"},"Reset Password",-1));function Se(i,t,k,e,g,h){return y(),U(T,{class:d(["login-layout",e.$q.dark.isActive?"bg-dark":"bg-light"])},{default:a(()=>[o("div",ae,[(y(),D("svg",ie,[o("defs",null,[o("linearGradient",re,[o("stop",{offset:"0%","stop-color":e.$q.dark.isActive?"#4361ee":"#667eea","stop-opacity":"0.3"},null,8,ne),o("stop",{offset:"100%","stop-color":e.$q.dark.isActive?"#3a0ca3":"#764ba2","stop-opacity":"0.1"},null,8,ce)]),o("linearGradient",de,[o("stop",{offset:"0%","stop-color":e.$q.dark.isActive?"#4cc9f0":"#f093fb","stop-opacity":"0.2"},null,8,ge),o("stop",{offset:"100%","stop-color":e.$q.dark.isActive?"#7209b7":"#f5576c","stop-opacity":"0.1"},null,8,fe)])]),ue,me,ke,he,o("g",pe,[o("path",{stroke:e.$q.dark.isActive?"rgba(67, 97, 238, 0.4)":"rgba(102, 126, 234, 0.4)","stroke-width":"2",fill:"none",d:"M300 200 Q350 150 400 200 T500 200"},null,8,_e),o("path",{stroke:e.$q.dark.isActive?"rgba(76, 201, 240, 0.4)":"rgba(240, 147, 251, 0.4)","stroke-width":"2",fill:"none",d:"M300 250 Q450 100 500 250"},null,8,ve),o("circle",{cx:"300",cy:"200",r:"3",fill:e.$q.dark.isActive?"#4361ee":"#667eea"},null,8,be),o("circle",{cx:"500",cy:"200",r:"3",fill:e.$q.dark.isActive?"#4361ee":"#667eea"},null,8,xe),o("circle",{cx:"300",cy:"250",r:"3",fill:e.$q.dark.isActive?"#4cc9f0":"#f093fb"},null,8,ye),o("circle",{cx:"500",cy:"250",r:"3",fill:e.$q.dark.isActive?"#4cc9f0":"#f093fb"},null,8,we)]),o("g",qe,[o("rect",{x:"700",y:"400",width:"80",height:"120",rx:"10",fill:e.$q.dark.isActive?"rgba(67, 97, 238, 0.2)":"rgba(102, 126, 234, 0.2)",stroke:e.$q.dark.isActive?"rgba(67, 97, 238, 0.5)":"rgba(102, 126, 234, 0.5)","stroke-width":"1.5"},null,8,Ae),o("rect",{x:"720",y:"420",width:"40",height:"20",rx:"5",fill:e.$q.dark.isActive?"rgba(76, 201, 240, 0.6)":"rgba(240, 147, 251, 0.6)"},null,8,Pe),o("line",{x1:"720",y1:"470",x2:"780",y2:"470",stroke:e.$q.dark.isActive?"rgba(76, 201, 240, 0.8)":"rgba(240, 147, 251, 0.8)","stroke-width":"2"},null,8,Ce),o("line",{x1:"720",y1:"490",x2:"760",y2:"490",stroke:e.$q.dark.isActive?"rgba(76, 201, 240, 0.8)":"rgba(240, 147, 251, 0.8)","stroke-width":"2"},null,8,Qe)]),o("path",{class:"connection-line line-1",d:"M400 200 L600 300",stroke:e.$q.dark.isActive?"rgba(67, 97, 238, 0.2)":"rgba(102, 126, 234, 0.2)","stroke-width":"1.5",fill:"none"},null,8,Ve),o("path",{class:"connection-line line-2",d:"M200 600 L400 500",stroke:e.$q.dark.isActive?"rgba(76, 201, 240, 0.2)":"rgba(240, 147, 251, 0.2)","stroke-width":"1.5",fill:"none"},null,8,Ie)]))]),o("div",Be,[s(p,{round:"",color:e.$q.dark.isActive?"grey-9":"yellow-9",icon:e.$q.dark.isActive?"dark_mode":"light_mode",class:"toggle-btn",onClick:e.toggleDarkMode,size:"lg"},null,8,["color","icon","onClick"])]),s(H,null,{default:a(()=>[s(Z,{class:"flex flex-center"},{default:a(()=>[s(A,{class:d(["login-card q-pa-xl animated-card",{"dark-card":e.$q.dark.isActive}])},{default:a(()=>[s(_,{class:"text-center q-pb-none"},{default:a(()=>[o("div",Me,[s(u,{name:"account_balance_wallet",size:"xl",color:(e.$q.dark.isActive,"primary"),class:"logo-icon"},null,8,["color"])]),o("div",{class:d(["text-h4","q-mb-sm","font-weight-bold",e.$q.dark.isActive?"text-white":"text-dark"])}," Welcome Back ",2),o("div",{class:d(["text-subtitle1","q-mb-lg",e.$q.dark.isActive?"text-grey-4":"text-grey-7"])}," Sign in to manage your finances securely ",2)]),_:1}),s(_,{class:"q-pt-none"},{default:a(()=>[o("div",Le,[s(v,{filled:"",modelValue:e.username,"onUpdate:modelValue":t[0]||(t[0]=l=>e.username=l),label:"Username",type:"text",placeholder:"Enter your username",dark:e.$q.dark.isActive,class:"custom-input",onFocus:e.onInputFocus,onBlur:e.onInputBlur},{prepend:a(()=>[s(u,{name:"person"})]),_:1},8,["modelValue","dark","onFocus","onBlur"])]),o("div",Fe,[s(v,{filled:"",modelValue:e.password,"onUpdate:modelValue":t[2]||(t[2]=l=>e.password=l),label:"Password",type:e.showPassword?"text":"password",placeholder:"Enter your password",dark:e.$q.dark.isActive,class:"custom-input",onFocus:e.onInputFocus,onBlur:e.onInputBlur},{prepend:a(()=>[s(u,{name:"lock"})]),append:a(()=>[s(u,{name:e.showPassword?"visibility_off":"visibility",class:"cursor-pointer",onClick:t[1]||(t[1]=l=>e.showPassword=!e.showPassword)},null,8,["name"])]),_:1},8,["modelValue","type","dark","onFocus","onBlur"])]),o("div",Ee,[s(te,{modelValue:e.rememberMe,"onUpdate:modelValue":t[3]||(t[3]=l=>e.rememberMe=l),label:"Remember me",dark:e.$q.dark.isActive,size:"sm"},null,8,["modelValue","dark"]),o("a",{href:"#",class:d(["text-caption","text-weight-medium",(e.$q.dark.isActive,"text-primary")]),onClick:t[4]||(t[4]=N(l=>e.showForgotPassword=!0,["prevent"]))}," Forgot password? ",2)]),s(p,{label:"Sign In",color:(e.$q.dark.isActive,"primary"),class:"full-width q-mb-lg login-btn",size:"lg",onClick:e.loginUser,loading:e.loading},{loading:a(()=>[s(O,{class:"on-left"}),w(" Signing in... ")]),_:1},8,["color","onClick","loading"]),s(q,{align:"center",class:"q-pa-none"},{default:a(()=>[o("p",{class:d(["text-body2",e.$q.dark.isActive?"text-grey-4":"text-grey-7"])},[w(" Don't have an account? "),o("span",{onClick:t[5]||(t[5]=(...l)=>h.goToRegisterPage&&h.goToRegisterPage(...l)),class:d(["cursor-pointer","text-weight-bold","q-ml-xs",(e.$q.dark.isActive,"text-primary")])}," Sign Up ",2)],2)]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1}),s($,{modelValue:e.showForgotPassword,"onUpdate:modelValue":t[7]||(t[7]=l=>e.showForgotPassword=l)},{default:a(()=>[s(A,{class:"forgot-password-card"},{default:a(()=>[s(_,null,{default:a(()=>[Re]),_:1}),s(_,{class:"q-pt-none"},{default:a(()=>[s(v,{modelValue:e.forgotPasswordEmail,"onUpdate:modelValue":t[6]||(t[6]=l=>e.forgotPasswordEmail=l),label:"Email",type:"email",placeholder:"Enter your email"},null,8,["modelValue"])]),_:1}),s(q,{align:"right"},{default:a(()=>[j(s(p,{flat:"",label:"Cancel",color:"primary"},null,512),[[ee]]),s(p,{label:"Send Reset Link",color:"primary",onClick:e.sendResetLink},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["class"])}const Je=R(le,[["render",Se],["__scopeId","data-v-ff39bb5e"]]);export{Je as default};

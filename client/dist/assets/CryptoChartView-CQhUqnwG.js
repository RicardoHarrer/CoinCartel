import{c as ea,a as de,h as ge,Q as fe,ak as Ca,al as ka,B as La,r as Q,am as Da,an as wa,ao as Ia,E as me,ab as ct,a5 as dt,a4 as ht,a0 as vt,ap as Pa,T as xa,G as Ta,a3 as Ma,_ as Na,I as Ea,J as Va,b as q,i as X,g as M,j as O,k as oe,K as ae,w as Z,L as pe,M as pt,N as ft,o as Oa,d as gt,m as mt,O as Ba,q as yt,s as Ra,t as $a}from"./index-wRLNoSK_.js";import{u as Fa,v as bt,c as za,p as St,d as Ga,a as Wa,r as At,s as Ua,e as Qa,b as Ne,f as Ha}from"./QSelect-Bwf8Y-zP.js";import{u as Ya,a as qa,b as ja}from"./use-checkbox-CFw6RUjr.js";import{Q as _t}from"./QSpace-BJllQCfW.js";import{_ as H,V as ta,e as te,I as Je,W as Ka,X as Ae,Y as Ct,f as aa,i as j,$ as et,q as ve,u as se,t as ra,a0 as Xa,k as kt,a1 as tt,a2 as na,a3 as re,a4 as be,a5 as ia,j as ie,o as Za,y as at,x as oa,a6 as Ja,a7 as er,w as rt,v as sa,a8 as tr,a9 as nt,C as la,h as ua,aa as ar,E as ne,ab as rr,ac as nr,ad as ir,ae as or,af as sr,ag as ca,S as Lt,ah as lr,ai as ur,aj as cr,ak as dr,al as da,am as ha,an as hr,ao as Dt,B as vr,ap as pr,aq as va,ar as pa,as as fr,at as Ee,au as gr,p as ye,r as he,av as mr,aw as wt,ax as fa,ay as yr,H as br,m as it,az as ga,aA as It,aB as Pt,aC as Sr,aD as Ar,aE as _r,aF as Cr,aG as kr,aH as Lr,aI as Dr,aJ as Ve,aK as wr,aL as Ir,aM as Pr,aN as xt,K as xr,L as Tr,Q as Mr,R as Nr,M as Er,N as Vr,T as Or,O as Br,U as Rr}from"./index-Dl6ZBZaz.js";import{Q as ke,a as $r}from"./QInput-DsmJXSEa.js";import{Q as Oe,u as Fr}from"./use-quasar-DdmeiJJS.js";import{u as zr,a as Gr,b as Wr,Q as Ur}from"./QDialog-BYuOmwN6.js";import{Q as Qr}from"./QCardActions-CXuEaoKC.js";import{C as Tt}from"./ClosePopup-Dpv5Y6cu.js";import{a as Be}from"./axios-DnX1qazU.js";var Xe=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.getInitialData=function(a,r){return ta(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(a,r,n){var i=this.coordinateSystem;if(i&&i.clampData){var s=i.clampData(a),o=i.dataToPoint(s);if(n)te(i.getAxes(),function(h,g){if(h.type==="category"&&r!=null){var f=h.getTicksCoords(),_=h.getTickModel().get("alignWithLabel"),S=s[g],A=r[g]==="x1"||r[g]==="y1";if(A&&!_&&(S+=1),f.length<2)return;if(f.length===2){o[g]=h.toGlobalCoord(h.getExtent()[A?1:0]);return}for(var y=void 0,C=void 0,v=1,b=0;b<f.length;b++){var D=f[b].coord,k=b===f.length-1?f[b-1].tickValue+v:f[b].tickValue;if(k===S){C=D;break}else if(k<S)y=D;else if(y!=null&&k>S){C=(D+y)/2;break}b===1&&(v=k-f[0].tickValue)}C==null&&(y?y&&(C=f[f.length-1].coord):C=f[0].coord),o[g]=h.toGlobalCoord(C)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),d=i.getBaseAxis().isHorizontal()?0:1;o[d]+=c+u/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Je);Je.registerClass(Xe);var Hr=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.getInitialData=function(){return ta(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>a&&(a=r),a},e.prototype.brushSelector=function(a,r,n){return n.rect(r.getItemLayout(a))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Ka(Xe.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Xe);const Yr=Hr;var qr=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Mt=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new qr},e.prototype.buildPath=function(a,r){var n=r.cx,i=r.cy,s=Math.max(r.r0||0,0),o=Math.max(r.r,0),l=(o-s)*.5,c=s+l,u=r.startAngle,d=r.endAngle,h=r.clockwise,g=Math.PI*2,f=h?d-u<g:u-d<g;f||(u=d-(h?g:-g));var _=Math.cos(u),S=Math.sin(u),A=Math.cos(d),y=Math.sin(d);f?(a.moveTo(_*s+n,S*s+i),a.arc(_*c+n,S*c+i,l,-Math.PI+u,u,!h)):a.moveTo(_*o+n,S*o+i),a.arc(n,i,o,u,d,!h),a.arc(A*c+n,y*c+i,l,d-Math.PI*2,d-Math.PI,!h),s!==0&&a.arc(n,i,s,d,u,h)},e}(Ae);function jr(t,e){e=e||{};var a=e.isRoundCap;return function(r,n,i){var s=n.position;if(!s||s instanceof Array)return Ct(r,n,i);var o=t(s),l=n.distance!=null?n.distance:5,c=this.shape,u=c.cx,d=c.cy,h=c.r,g=c.r0,f=(h+g)/2,_=c.startAngle,S=c.endAngle,A=(_+S)/2,y=a?Math.abs(h-g)/2:0,C=Math.cos,v=Math.sin,b=u+h*C(_),D=d+h*v(_),k="left",N="top";switch(o){case"startArc":b=u+(g-l)*C(A),D=d+(g-l)*v(A),k="center",N="top";break;case"insideStartArc":b=u+(g+l)*C(A),D=d+(g+l)*v(A),k="center",N="bottom";break;case"startAngle":b=u+f*C(_)+Le(_,l+y,!1),D=d+f*v(_)+De(_,l+y,!1),k="right",N="middle";break;case"insideStartAngle":b=u+f*C(_)+Le(_,-l+y,!1),D=d+f*v(_)+De(_,-l+y,!1),k="left",N="middle";break;case"middle":b=u+f*C(A),D=d+f*v(A),k="center",N="middle";break;case"endArc":b=u+(h+l)*C(A),D=d+(h+l)*v(A),k="center",N="bottom";break;case"insideEndArc":b=u+(h-l)*C(A),D=d+(h-l)*v(A),k="center",N="top";break;case"endAngle":b=u+f*C(S)+Le(S,l+y,!0),D=d+f*v(S)+De(S,l+y,!0),k="left",N="middle";break;case"insideEndAngle":b=u+f*C(S)+Le(S,-l+y,!0),D=d+f*v(S)+De(S,-l+y,!0),k="right",N="middle";break;default:return Ct(r,n,i)}return r=r||{},r.x=b,r.y=D,r.align=k,r.verticalAlign=N,r}}function Kr(t,e,a,r){if(aa(r)){t.setTextConfig({rotation:r});return}else if(j(e)){t.setTextConfig({rotation:0});return}var n=t.shape,i=n.clockwise?n.startAngle:n.endAngle,s=n.clockwise?n.endAngle:n.startAngle,o=(i+s)/2,l,c=a(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=s;break;default:t.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),t.setTextConfig({rotation:u})}function Le(t,e,a){return e*Math.sin(t)*(a?-1:1)}function De(t,e,a){return e*Math.cos(t)*(a?1:-1)}var Re=Math.max,$e=Math.min;function Xr(t,e){var a=t.getArea&&t.getArea();if(nt(t,"cartesian2d")){var r=t.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=e.getLayout("bandWidth");r.isHorizontal()?(a.x-=n,a.width+=n*2):(a.y-=n,a.height+=n*2)}}return a}var Zr=function(t){H(e,t);function e(){var a=t.call(this)||this;return a.type=e.type,a._isFirstFrame=!0,a}return e.prototype.render=function(a,r,n,i){this._model=a,this._removeOnRenderedListener(n),this._updateDrawMode(a);var s=a.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,r,n):this._renderNormal(a,r,n,i))},e.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},e.prototype.incrementalRender=function(a,r){this._progressiveEls=[],this._incrementalRenderLarge(a,r)},e.prototype.eachRendered=function(a){et(this._progressiveEls||this.group,a)},e.prototype._updateDrawMode=function(a){var r=a.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(a,r,n,i){var s=this.group,o=a.getData(),l=this._data,c=a.coordinateSystem,u=c.getBaseAxis(),d;c.type==="cartesian2d"?d=u.isHorizontal():c.type==="polar"&&(d=u.dim==="angle");var h=a.isAnimationEnabled()?a:null,g=Jr(a,c);g&&this._enableRealtimeSort(g,o,n);var f=a.get("clip",!0)||g,_=Xr(c,o);s.removeClipPath();var S=a.get("roundCap",!0),A=a.get("showBackground",!0),y=a.getModel("backgroundStyle"),C=y.get("borderRadius")||0,v=[],b=this._backgroundEls,D=i&&i.isInitSort,k=i&&i.type==="changeAxisOrder";function N(T){var R=we[c.type](o,T),V=sn(c,d,R);return V.useStyle(y.getItemStyle()),c.type==="cartesian2d"?V.setShape("r",C):V.setShape("cornerRadius",C),v[T]=V,V}o.diff(l).add(function(T){var R=o.getItemModel(T),V=we[c.type](o,T,R);if(A&&N(T),!(!o.hasValue(T)||!Bt[c.type](V))){var W=!1;f&&(W=Nt[c.type](_,V));var F=Et[c.type](a,o,T,V,d,h,u.model,!1,S);g&&(F.forceLabelAnimation=!0),Rt(F,o,T,R,V,a,d,c.type==="polar"),D?F.attr({shape:V}):g?Vt(g,h,F,V,T,d,!1,!1):ve(F,{shape:V},a,T),o.setItemGraphicEl(T,F),s.add(F),F.ignore=W}}).update(function(T,R){var V=o.getItemModel(T),W=we[c.type](o,T,V);if(A){var F=void 0;b.length===0?F=N(R):(F=b[R],F.useStyle(y.getItemStyle()),c.type==="cartesian2d"?F.setShape("r",C):F.setShape("cornerRadius",C),v[T]=F);var J=we[c.type](o,T),Y=ya(d,J,c);se(F,{shape:Y},h,T)}var $=l.getItemGraphicEl(R);if(!o.hasValue(T)||!Bt[c.type](W)){s.remove($);return}var p=!1;if(f&&(p=Nt[c.type](_,W),p&&s.remove($)),$?ra($):$=Et[c.type](a,o,T,W,d,h,u.model,!!$,S),g&&($.forceLabelAnimation=!0),k){var m=$.getTextContent();if(m){var L=Xa(m);L.prevValue!=null&&(L.prevValue=L.value)}}else Rt($,o,T,V,W,a,d,c.type==="polar");D?$.attr({shape:W}):g?Vt(g,h,$,W,T,d,!0,k):se($,{shape:W},a,T,null),o.setItemGraphicEl(T,$),$.ignore=p,s.add($)}).remove(function(T){var R=l.getItemGraphicEl(T);R&&kt(R,a,T)}).execute();var B=this._backgroundGroup||(this._backgroundGroup=new tt);B.removeAll();for(var G=0;G<v.length;++G)B.add(v[G]);s.add(B),this._backgroundEls=v,this._data=o},e.prototype._renderLarge=function(a,r,n){this._clear(),Ft(a,this.group),this._updateLargeClip(a)},e.prototype._incrementalRenderLarge=function(a,r){this._removeBackground(),Ft(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(a){var r=a.get("clip",!0)&&na(a.coordinateSystem,!1,a),n=this.group;r?n.setClipPath(r):n.removeClipPath()},e.prototype._enableRealtimeSort=function(a,r,n){var i=this;if(r.count()){var s=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,a,n),this._isFirstFrame=!1;else{var o=function(l){var c=r.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(s.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,o,s,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(a,r,n){var i=[];return a.each(a.mapDimension(r.dim),function(s,o){var l=n(o);l=l??NaN,i.push({dataIndex:o,mappedValue:l,ordinalNumber:s})}),i.sort(function(s,o){return o.mappedValue-s.mappedValue}),{ordinalNumbers:re(i,function(s){return s.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(a,r,n){for(var i=n.scale,s=a.mapDimension(n.dim),o=Number.MAX_VALUE,l=0,c=i.getOrdinalMeta().categories.length;l<c;++l){var u=a.rawIndexOf(s,i.getRawOrdinalNumber(l)),d=u<0?Number.MIN_VALUE:r(a.indexOfRawIndex(u));if(d>o)return!0;o=d}return!1},e.prototype._isOrderDifferentInView=function(a,r){for(var n=r.scale,i=n.getExtent(),s=Math.max(0,i[0]),o=Math.min(i[1],n.getOrdinalMeta().categories.length-1);s<=o;++s)if(a.ordinalNumbers[s]!==n.getRawOrdinalNumber(s))return!0},e.prototype._updateSortWithinSameData=function(a,r,n,i){if(this._isOrderChangedWithinSameData(a,r,n)){var s=this._dataSort(a,n,r);this._isOrderDifferentInView(s,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:s}))}},e.prototype._dispatchInitSort=function(a,r,n){var i=r.baseAxis,s=this._dataSort(a,i,function(o){return a.get(a.mapDimension(r.otherAxis.dim),o)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:s})},e.prototype.remove=function(a,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(a,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(a){var r=this.group,n=this._data;a&&a.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){kt(i,a,be(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(la),Nt={cartesian2d:function(t,e){var a=e.width<0?-1:1,r=e.height<0?-1:1;a<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var n=t.x+t.width,i=t.y+t.height,s=Re(e.x,t.x),o=$e(e.x+e.width,n),l=Re(e.y,t.y),c=$e(e.y+e.height,i),u=o<s,d=c<l;return e.x=u&&s>n?o:s,e.y=d&&l>i?c:l,e.width=u?0:o-s,e.height=d?0:c-l,a<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||d},polar:function(t,e){var a=e.r0<=e.r?1:-1;if(a<0){var r=e.r;e.r=e.r0,e.r0=r}var n=$e(e.r,t.r),i=Re(e.r0,t.r0);e.r=n,e.r0=i;var s=n-i<0;if(a<0){var r=e.r;e.r=e.r0,e.r0=r}return s}},Et={cartesian2d:function(t,e,a,r,n,i,s,o,l){var c=new ia({shape:ie({},r),z2:1});if(c.__dataIndex=a,c.name="item",i){var u=c.shape,d=n?"height":"width";u[d]=0}return c},polar:function(t,e,a,r,n,i,s,o,l){var c=!n&&l?Mt:ua,u=new c({shape:r,z2:1});u.name="item";var d=ma(n);if(u.calculateTextPosition=jr(d,{isRoundCap:c===Mt}),i){var h=u.shape,g=n?"r":"endAngle",f={};h[g]=n?r.r0:r.startAngle,f[g]=r[g],(o?se:ve)(u,{shape:f},i)}return u}};function Jr(t,e){var a=t.get("realtimeSort",!0),r=e.getBaseAxis();if(a&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function Vt(t,e,a,r,n,i,s,o){var l,c;i?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),o||(s?se:ve)(a,{shape:l},e,n,null);var u=e?t.baseAxis.model:null;(s?se:ve)(a,{shape:c},u,n)}function Ot(t,e){for(var a=0;a<e.length;a++)if(!isFinite(t[e[a]]))return!0;return!1}var en=["x","y","width","height"],tn=["cx","cy","r","startAngle","endAngle"],Bt={cartesian2d:function(t){return!Ot(t,en)},polar:function(t){return!Ot(t,tn)}},we={cartesian2d:function(t,e,a){var r=t.getItemLayout(e),n=a?rn(a,r):0,i=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+i*n/2,y:r.y+s*n/2,width:r.width-i*n,height:r.height-s*n}},polar:function(t,e,a){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function an(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function ma(t){return function(e){var a=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+a;default:return r}}}(t)}function Rt(t,e,a,r,n,i,s,o){var l=e.getItemVisual(a,"style");if(o){if(!i.get("roundCap")){var u=t.shape,d=Za(r.getModel("itemStyle"),u,!0);ie(u,d),t.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",c)}t.useStyle(l);var h=r.getShallow("cursor");h&&t.attr("cursor",h);var g=o?s?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":s?n.height>=0?"bottom":"top":n.width>=0?"right":"left",f=at(r);oa(t,f,{labelFetcher:i,labelDataIndex:a,defaultText:Ja(i.getData(),a),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:g});var _=t.getTextContent();if(o&&_){var S=r.get(["label","position"]);t.textConfig.inside=S==="middle"?!0:null,Kr(t,S==="outside"?g:S,ma(s),r.get(["label","rotate"]))}er(_,f,i.getRawValue(a),function(y){return ar(e,y)});var A=r.getModel(["emphasis"]);rt(t,A.get("focus"),A.get("blurScope"),A.get("disabled")),sa(t,r),an(n)&&(t.style.fill="none",t.style.stroke="none",te(t.states,function(y){y.style&&(y.style.fill=y.style.stroke="none")}))}function rn(t,e){var a=t.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var r=t.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,n,i)}var nn=function(){function t(){}return t}(),$t=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new nn},e.prototype.buildPath=function(a,r){for(var n=r.points,i=this.baseDimIdx,s=1-this.baseDimIdx,o=[],l=[],c=this.barWidth,u=0;u<n.length;u+=3)l[i]=c,l[s]=n[u+2],o[i]=n[u+i],o[s]=n[u+s],a.rect(o[0],o[1],l[0],l[1])},e}(Ae);function Ft(t,e,a,r){var n=t.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,s=n.getLayout("largeDataIndices"),o=n.getLayout("size"),l=t.getModel("backgroundStyle"),c=n.getLayout("largeBackgroundPoints");if(c){var u=new $t({shape:{points:c},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=i,u.largeDataIndices=s,u.barWidth=o,u.useStyle(l.getItemStyle()),e.add(u),a&&a.push(u)}var d=new $t({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=i,d.largeDataIndices=s,d.barWidth=o,e.add(d),d.useStyle(n.getVisual("style")),d.style.stroke=null,be(d).seriesIndex=t.seriesIndex,t.get("silent")||(d.on("mousedown",zt),d.on("mousemove",zt)),a&&a.push(d)}var zt=tr(function(t){var e=this,a=on(e,t.offsetX,t.offsetY);be(e).dataIndex=a>=0?a:null},30,!1);function on(t,e,a){for(var r=t.baseDimIdx,n=1-r,i=t.shape.points,s=t.largeDataIndices,o=[],l=[],c=t.barWidth,u=0,d=i.length/3;u<d;u++){var h=u*3;if(l[r]=c,l[n]=i[h+2],o[r]=i[h+r],o[n]=i[h+n],l[n]<0&&(o[n]+=l[n],l[n]=-l[n]),e>=o[0]&&e<=o[0]+l[0]&&a>=o[1]&&a<=o[1]+l[1])return s[u]}return-1}function ya(t,e,a){if(nt(a,"cartesian2d")){var r=e,n=a.getArea();return{x:t?r.x:n.x,y:t?n.y:r.y,width:t?r.width:n.width,height:t?n.height:r.height}}else{var n=a.getArea(),i=e;return{cx:n.cx,cy:n.cy,r0:t?n.r0:i.r0,r:t?n.r:i.r,startAngle:t?i.startAngle:0,endAngle:t?i.endAngle:Math.PI*2}}}function sn(t,e,a){var r=t.type==="polar"?ua:ia;return new r({shape:ya(e,a,t),silent:!0,z2:0})}const ln=Zr;function un(t){t.registerChartView(ln),t.registerSeriesModel(Yr),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,ne(ir,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,rr("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,nr("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,a){var r=e.componentType||"series";a.eachComponent({mainType:r,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}var Gt=or.prototype,Fe=sr.prototype,ba=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){H(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(ba);function ze(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var cn=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ba},e.prototype.buildPath=function(a,r){ze(r)?Gt.buildPath.call(this,a,r):Fe.buildPath.call(this,a,r)},e.prototype.pointAt=function(a){return ze(this.shape)?Gt.pointAt.call(this,a):Fe.pointAt.call(this,a)},e.prototype.tangentAt=function(a){var r=this.shape,n=ze(r)?[r.x2-r.x1,r.y2-r.y1]:Fe.tangentAt.call(this,a);return ca(n,n)},e}(Ae),Ge=["fromSymbol","toSymbol"];function Wt(t){return"_"+t+"Type"}function Ut(t,e,a){var r=e.getItemVisual(a,t);if(!r||r==="none")return r;var n=e.getItemVisual(a,t+"Size"),i=e.getItemVisual(a,t+"Rotate"),s=e.getItemVisual(a,t+"Offset"),o=e.getItemVisual(a,t+"KeepAspect"),l=da(n),c=ha(s||0,l);return r+l+c+(i||"")+(o||"")}function Qt(t,e,a){var r=e.getItemVisual(a,t);if(!(!r||r==="none")){var n=e.getItemVisual(a,t+"Size"),i=e.getItemVisual(a,t+"Rotate"),s=e.getItemVisual(a,t+"Offset"),o=e.getItemVisual(a,t+"KeepAspect"),l=da(n),c=ha(s||0,l),u=hr(r,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,o);return u.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,u.name=t,u}}function dn(t){var e=new cn({name:"line",subPixelOptimize:!0});return Ze(e.shape,t),e}function Ze(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var a=e[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var hn=function(t){H(e,t);function e(a,r,n){var i=t.call(this)||this;return i._createLine(a,r,n),i}return e.prototype._createLine=function(a,r,n){var i=a.hostModel,s=a.getItemLayout(r),o=dn(s);o.shape.percent=0,ve(o,{shape:{percent:1}},i,r),this.add(o),te(Ge,function(l){var c=Qt(l,a,r);this.add(c),this[Wt(l)]=Ut(l,a,r)},this),this._updateCommonStl(a,r,n)},e.prototype.updateData=function(a,r,n){var i=a.hostModel,s=this.childOfName("line"),o=a.getItemLayout(r),l={shape:{}};Ze(l.shape,o),se(s,l,i,r),te(Ge,function(c){var u=Ut(c,a,r),d=Wt(c);if(this[d]!==u){this.remove(this.childOfName(c));var h=Qt(c,a,r);this.add(h)}this[d]=u},this),this._updateCommonStl(a,r,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(a,r,n){var i=a.hostModel,s=this.childOfName("line"),o=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,c=n&&n.selectLineStyle,u=n&&n.labelStatesModels,d=n&&n.emphasisDisabled,h=n&&n.focus,g=n&&n.blurScope;if(!n||a.hasItemOption){var f=a.getItemModel(r),_=f.getModel("emphasis");o=_.getModel("lineStyle").getLineStyle(),l=f.getModel(["blur","lineStyle"]).getLineStyle(),c=f.getModel(["select","lineStyle"]).getLineStyle(),d=_.get("disabled"),h=_.get("focus"),g=_.get("blurScope"),u=at(f)}var S=a.getItemVisual(r,"style"),A=S.stroke;s.useStyle(S),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=o,s.ensureState("blur").style=l,s.ensureState("select").style=c,te(Ge,function(D){var k=this.childOfName(D);if(k){k.setColor(A),k.style.opacity=S.opacity;for(var N=0;N<Lt.length;N++){var B=Lt[N],G=s.getState(B);if(G){var T=G.style||{},R=k.ensureState(B),V=R.style||(R.style={});T.stroke!=null&&(V[k.__isEmptyBrush?"stroke":"fill"]=T.stroke),T.opacity!=null&&(V.opacity=T.opacity)}}k.markRedraw()}},this);var y=i.getRawValue(r);oa(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(D,k){return i.getFormattedLabel(D,k,a.dataType)}},inheritColor:A||"#000",defaultOpacity:S.opacity,defaultText:(y==null?a.getName(r):isFinite(y)?lr(y):y)+""});var C=this.getTextContent();if(C){var v=u.normal;C.__align=C.style.align,C.__verticalAlign=C.style.verticalAlign,C.__position=v.get("position")||"middle";var b=v.get("distance");j(b)||(b=[b,b]),C.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),rt(this,h,g,d)},e.prototype.highlight=function(){ur(this)},e.prototype.downplay=function(){cr(this)},e.prototype.updateLayout=function(a,r){this.setLinePoints(a.getItemLayout(r))},e.prototype.setLinePoints=function(a){var r=this.childOfName("line");Ze(r.shape,a),r.dirty()},e.prototype.beforeUpdate=function(){var a=this,r=a.childOfName("fromSymbol"),n=a.childOfName("toSymbol"),i=a.getTextContent();if(!r&&!n&&(!i||i.ignore))return;for(var s=1,o=this.parent;o;)o.scaleX&&(s/=o.scaleX),o=o.parent;var l=a.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),d=l.pointAt(c),h=dr([],d,u);ca(h,h);function g(G,T){var R=G.__specifiedRotation;if(R==null){var V=l.tangentAt(T);G.attr("rotation",(T===1?-1:1)*Math.PI/2-Math.atan2(V[1],V[0]))}else G.attr("rotation",R)}if(r&&(r.setPosition(u),g(r,0),r.scaleX=r.scaleY=s*c,r.markRedraw()),n&&(n.setPosition(d),g(n,1),n.scaleX=n.scaleY=s*c,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var f=void 0,_=void 0,S=i.__labelDistance,A=S[0]*s,y=S[1]*s,C=c/2,v=l.tangentAt(C),b=[v[1],-v[0]],D=l.pointAt(C);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var k=v[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var N=-Math.atan2(v[1],v[0]);d[0]<u[0]&&(N=Math.PI+N),i.rotation=N}var B=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":B=-y,_="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":B=y,_="top";break;default:B=0,_="middle"}switch(i.__position){case"end":i.x=h[0]*A+d[0],i.y=h[1]*y+d[1],f=h[0]>.8?"left":h[0]<-.8?"right":"center",_=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":i.x=-h[0]*A+u[0],i.y=-h[1]*y+u[1],f=h[0]>.8?"right":h[0]<-.8?"left":"center",_=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=A*k+u[0],i.y=u[1]+B,f=v[0]<0?"right":"left",i.originX=-A*k,i.originY=-B;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=D[0],i.y=D[1]+B,f="center",i.originY=-B;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-A*k+d[0],i.y=d[1]+B,f=v[0]>=0?"right":"left",i.originX=A*k,i.originY=-B;break}i.scaleX=i.scaleY=s,i.setStyle({verticalAlign:i.__verticalAlign||_,align:i.__align||f})}},e}(tt);const vn=hn;var pn=function(){function t(e){this.group=new tt,this._LineCtor=e||vn}return t.prototype.updateData=function(e){var a=this;this._progressiveEls=null;var r=this,n=r.group,i=r._lineData;r._lineData=e,i||n.removeAll();var s=Ht(e);e.diff(i).add(function(o){a._doAdd(e,o,s)}).update(function(o,l){a._doUpdate(i,e,l,o,s)}).remove(function(o){n.remove(i.getItemGraphicEl(o))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(a,r){a.updateLayout(e,r)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Ht(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,a){this._progressiveEls=[];function r(o){!o.isGroup&&!fn(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var i=a.getItemLayout(n);if(We(i)){var s=new this._LineCtor(a,n,this._seriesScope);s.traverse(r),this.group.add(s),a.setItemGraphicEl(n,s),this._progressiveEls.push(s)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){et(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,a,r){var n=e.getItemLayout(a);if(We(n)){var i=new this._LineCtor(e,a,r);e.setItemGraphicEl(a,i),this.group.add(i)}},t.prototype._doUpdate=function(e,a,r,n,i){var s=e.getItemGraphicEl(r);if(!We(a.getItemLayout(n))){this.group.remove(s);return}s?s.updateData(a,n,i):s=new this._LineCtor(a,n,i),a.setItemGraphicEl(n,s),this.group.add(s)},t}();function fn(t){return t.animators&&t.animators.length>0}function Ht(t){var e=t.hostModel,a=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:at(e)}}function Yt(t){return isNaN(t[0])||isNaN(t[1])}function We(t){return t&&!Yt(t[0])&&!Yt(t[1])}const gn=pn;var mn=function(){function t(){}return t.prototype._hasEncodeRule=function(e){var a=this.getEncode();return a&&a.get(e)!=null},t.prototype.getInitialData=function(e,a){var r,n=a.getComponent("xAxis",this.get("xAxisIndex")),i=a.getComponent("yAxis",this.get("yAxisIndex")),s=n.get("type"),o=i.get("type"),l;s==="category"?(e.layout="horizontal",r=n.getOrdinalMeta(),l=!this._hasEncodeRule("x")):o==="category"?(e.layout="vertical",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,d=this._baseAxisDim=c[u],h=c[1-u],g=[n,i],f=g[u].get("type"),_=g[1-u].get("type"),S=e.data;if(S&&l){var A=[];te(S,function(v,b){var D;j(v)?(D=v.slice(),v.unshift(b)):j(v.value)?(D=ie({},v),D.value=D.value.slice(),v.value.unshift(b)):D=v,A.push(D)}),e.data=A}var y=this.defaultValueDimensions,C=[{name:d,type:Dt(f),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:Dt(_),dimsDef:y.slice()}];return vr(this,{coordDimensions:C,dimensionsCount:y.length+1,encodeDefaulter:ne(pr,C,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),yn=["itemStyle","borderColor"],bn=["itemStyle","borderColor0"],Sn=["itemStyle","borderColorDoji"],An=["itemStyle","color"],_n=["itemStyle","color0"];function ot(t,e){return e.get(t>0?An:_n)}function st(t,e){return e.get(t===0?Sn:t>0?yn:bn)}var Cn={seriesType:"candlestick",plan:va(),performRawSeries:!0,reset:function(t,e){if(!e.isSeriesFiltered(t)){var a=t.pipelineContext.large;return!a&&{progress:function(r,n){for(var i;(i=r.next())!=null;){var s=n.getItemModel(i),o=n.getItemLayout(i).sign,l=s.getItemStyle();l.fill=ot(o,s),l.stroke=st(o,s)||l.fill;var c=n.ensureUniqueItemVisual(i,"style");ie(c,l)}}}}}};const kn=Cn;var Ln=["color","borderColor"],Dn=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},e.prototype.incrementalPrepareRender=function(a,r,n){this._clear(),this._updateDrawMode(a)},e.prototype.incrementalRender=function(a,r,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,r):this._incrementalRenderNormal(a,r)},e.prototype.eachRendered=function(a){et(this._progressiveEls||this.group,a)},e.prototype._updateDrawMode=function(a){var r=a.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(a){var r=a.getData(),n=this._data,i=this.group,s=r.getLayout("isSimpleBox"),o=a.get("clip",!0),l=a.coordinateSystem,c=l.getArea&&l.getArea();this._data||i.removeAll(),r.diff(n).add(function(u){if(r.hasValue(u)){var d=r.getItemLayout(u);if(o&&qt(c,d))return;var h=Ue(d,u,!0);ve(h,{shape:{points:d.ends}},a,u),Qe(h,r,u,s),i.add(h),r.setItemGraphicEl(u,h)}}).update(function(u,d){var h=n.getItemGraphicEl(d);if(!r.hasValue(u)){i.remove(h);return}var g=r.getItemLayout(u);if(o&&qt(c,g)){i.remove(h);return}h?(se(h,{shape:{points:g.ends}},a,u),ra(h)):h=Ue(g),Qe(h,r,u,s),i.add(h),r.setItemGraphicEl(u,h)}).remove(function(u){var d=n.getItemGraphicEl(u);d&&i.remove(d)}).execute(),this._data=r},e.prototype._renderLarge=function(a){this._clear(),jt(a,this.group);var r=a.get("clip",!0)?na(a.coordinateSystem,!1,a):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(a,r){for(var n=r.getData(),i=n.getLayout("isSimpleBox"),s;(s=a.next())!=null;){var o=n.getItemLayout(s),l=Ue(o);Qe(l,n,s,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(a,r){jt(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(a){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(la),wn=function(){function t(){}return t}(),In=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new wn},e.prototype.buildPath=function(a,r){var n=r.points;this.__simpleBox?(a.moveTo(n[4][0],n[4][1]),a.lineTo(n[6][0],n[6][1])):(a.moveTo(n[0][0],n[0][1]),a.lineTo(n[1][0],n[1][1]),a.lineTo(n[2][0],n[2][1]),a.lineTo(n[3][0],n[3][1]),a.closePath(),a.moveTo(n[4][0],n[4][1]),a.lineTo(n[5][0],n[5][1]),a.moveTo(n[6][0],n[6][1]),a.lineTo(n[7][0],n[7][1]))},e}(Ae);function Ue(t,e,a){var r=t.ends;return new In({shape:{points:a?Pn(r,t):r},z2:100})}function qt(t,e){for(var a=!0,r=0;r<e.ends.length;r++)if(t.contain(e.ends[r][0],e.ends[r][1])){a=!1;break}return a}function Qe(t,e,a,r){var n=e.getItemModel(a);t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=r,sa(t,n);var i=e.getItemLayout(a).sign;te(t.states,function(o,l){var c=n.getModel(l),u=ot(i,c),d=st(i,c)||u,h=o.style||(o.style={});u&&(h.fill=u),d&&(h.stroke=d)});var s=n.getModel("emphasis");rt(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function Pn(t,e){return re(t,function(a){return a=a.slice(),a[1]=e.initBaseline,a})}var xn=function(){function t(){}return t}(),He=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new xn},e.prototype.buildPath=function(a,r){for(var n=r.points,i=0;i<n.length;)if(this.__sign===n[i++]){var s=n[i++];a.moveTo(s,n[i++]),a.lineTo(s,n[i++])}else i+=3},e}(Ae);function jt(t,e,a,r){var n=t.getData(),i=n.getLayout("largePoints"),s=new He({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(s);var o=new He({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var l=new He({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),Ye(1,s,t),Ye(-1,o,t),Ye(0,l,t),r&&(s.incremental=!0,o.incremental=!0),a&&a.push(s,o)}function Ye(t,e,a,r){var n=st(t,a)||ot(t,a),i=a.getModel("itemStyle").getItemStyle(Ln);e.useStyle(i),e.style.fill=null,e.style.stroke=n}const Tn=Dn;var Sa=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(a,r,n){var i=r.getItemLayout(a);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Je);pa(Sa,mn,!0);const Mn=Sa;function Nn(t){!t||!j(t.series)||te(t.series,function(e){fr(e)&&e.type==="k"&&(e.type="candlestick")})}var En={seriesType:"candlestick",plan:va(),reset:function(t){var e=t.coordinateSystem,a=t.getData(),r=Vn(t,a),n=0,i=1,s=["x","y"],o=a.getDimensionIndex(a.mapDimension(s[n])),l=re(a.mapDimensionsAll(s[i]),a.getDimensionIndex,a),c=l[0],u=l[1],d=l[2],h=l[3];if(a.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),o<0||l.length<4)return;return{progress:t.pipelineContext.large?f:g};function g(_,S){for(var A,y=S.getStore();(A=_.next())!=null;){var C=y.get(o,A),v=y.get(c,A),b=y.get(u,A),D=y.get(d,A),k=y.get(h,A),N=Math.min(v,b),B=Math.max(v,b),G=Y(N,C),T=Y(B,C),R=Y(D,C),V=Y(k,C),W=[];$(W,T,0),$(W,G,1),W.push(m(V),m(T),m(R),m(G));var F=S.getItemModel(A),J=!!F.get(["itemStyle","borderColorDoji"]);S.setItemLayout(A,{sign:Kt(y,A,v,b,u,J),initBaseline:v>b?T[i]:G[i],ends:W,brushRect:p(D,k,C)})}function Y(L,w){var P=[];return P[n]=w,P[i]=L,isNaN(w)||isNaN(L)?[NaN,NaN]:e.dataToPoint(P)}function $(L,w,P){var I=w.slice(),x=w.slice();I[n]=Ee(I[n]+r/2,1,!1),x[n]=Ee(x[n]-r/2,1,!0),P?L.push(I,x):L.push(x,I)}function p(L,w,P){var I=Y(L,P),x=Y(w,P);return I[n]-=r/2,x[n]-=r/2,{x:I[0],y:I[1],width:r,height:x[1]-I[1]}}function m(L){return L[n]=Ee(L[n],1),L}}function f(_,S){for(var A=gr(_.count*4),y=0,C,v=[],b=[],D,k=S.getStore(),N=!!t.get(["itemStyle","borderColorDoji"]);(D=_.next())!=null;){var B=k.get(o,D),G=k.get(c,D),T=k.get(u,D),R=k.get(d,D),V=k.get(h,D);if(isNaN(B)||isNaN(R)||isNaN(V)){A[y++]=NaN,y+=3;continue}A[y++]=Kt(k,D,G,T,u,N),v[n]=B,v[i]=R,C=e.dataToPoint(v,null,b),A[y++]=C?C[0]:NaN,A[y++]=C?C[1]:NaN,v[i]=V,C=e.dataToPoint(v,null,b),A[y++]=C?C[1]:NaN}S.setLayout("largePoints",A)}}};function Kt(t,e,a,r,n,i){var s;return a>r?s=-1:a<r?s=1:s=i?0:e>0?t.get(n,e-1)<=r?1:-1:1,s}function Vn(t,e){var a=t.getBaseAxis(),r,n=a.type==="category"?a.getBandWidth():(r=a.getExtent(),Math.abs(r[1]-r[0])/e.count()),i=ye(he(t.get("barMaxWidth"),n),n),s=ye(he(t.get("barMinWidth"),1),n),o=t.get("barWidth");return o!=null?ye(o,n):Math.max(Math.min(n/2,i),s)}const On=En;function Bn(t){t.registerChartView(Tn),t.registerSeriesModel(Mn),t.registerPreprocessor(Nn),t.registerVisual(kn),t.registerLayout(On)}function Rn(t,e){if(!t)return!1;for(var a=j(t)?t:[t],r=0;r<a.length;r++)if(a[r]&&a[r][e])return!0;return!1}function Ie(t){br(t,"label",["show"])}var Pe=it(),Se=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.createdBySelf=!1,a}return e.prototype.init=function(a,r,n){this.mergeDefaultAndTheme(a,n),this._mergeOption(a,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(mr.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},e.prototype.mergeOption=function(a,r){this._mergeOption(a,r,!1,!1)},e.prototype._mergeOption=function(a,r,n,i){var s=this.mainType;n||r.eachSeries(function(o){var l=o.get(this.mainType,!0),c=Pe(o)[s];if(!l||!l.data){Pe(o)[s]=null;return}c?c._mergeOption(l,r,!0):(i&&Ie(l),te(l.data,function(u){u instanceof Array?(Ie(u[0]),Ie(u[1])):Ie(u)}),c=this.createMarkerModelFromSeries(l,this,r),ie(c,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),c.__hostSeries=o),Pe(o)[s]=c},this)},e.prototype.formatTooltip=function(a,r,n){var i=this.getData(),s=this.getRawValue(a),o=i.getName(a);return wt("section",{header:this.name,blocks:[wt("nameValue",{name:o,value:s,noName:!o,noValue:s==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(a){this._data=a},e.prototype.getDataParams=function(a,r){var n=fa.prototype.getDataParams.call(this,a,r),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(a,r){return Pe(a)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(yr);pa(Se,fa.prototype);function $n(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function Fn(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function xe(t,e,a,r,n,i){var s=[],o=Sr(e,r),l=o?e.getCalculationInfo("stackResultDimension"):r,c=lt(e,l,t),u=e.indicesOfNearest(l,c)[0];s[n]=e.get(a,u),s[i]=e.get(l,u);var d=e.get(r,u),h=Ar(e.get(r,u));return h=Math.min(h,20),h>=0&&(s[i]=+s[i].toFixed(h)),[s,d]}var qe={min:ne(xe,"min"),max:ne(xe,"max"),average:ne(xe,"average"),median:ne(xe,"median")};function Xt(t,e){if(e){var a=t.getData(),r=t.coordinateSystem,n=r&&r.dimensions;if(!Fn(e)&&!j(e.coord)&&j(n)){var i=Aa(e,a,r,t);if(e=ga(e),e.type&&qe[e.type]&&i.baseAxis&&i.valueAxis){var s=It(n,i.baseAxis.dim),o=It(n,i.valueAxis.dim),l=qe[e.type](a,i.baseDataDim,i.valueDataDim,s,o);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!j(n))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)qe[c[u]]&&(c[u]=lt(a,a.mapDimension(n[u]),c[u]));return e}}function Aa(t,e,a,r){var n={};return t.valueIndex!=null||t.valueDim!=null?(n.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,n.valueAxis=a.getAxis(zn(r,n.valueDataDim)),n.baseAxis=a.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=a.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function zn(t,e){var a=t.getData().getDimensionInfo(e);return a&&a.coordDim}function Zt(t,e){return t&&t.containData&&e.coord&&!$n(e)?t.containData(e.coord):!0}function Gn(t,e){return t?function(a,r,n,i){var s=i<2?a.coord&&a.coord[i]:a.value;return Pt(s,e[i])}:function(a,r,n,i){return Pt(a.value,e[i])}}function lt(t,e,a){if(a==="average"){var r=0,n=0;return t.each(e,function(i,s){isNaN(i)||(r+=i,n++)}),r/n}else return a==="median"?t.getMedian(e):t.getDataExtent(e)[a==="max"?1:0]}var je=it(),Wn=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this.markerGroupMap=_r()},e.prototype.render=function(a,r,n){var i=this,s=this.markerGroupMap;s.each(function(o){je(o).keep=!1}),r.eachSeries(function(o){var l=Se.getMarkerModelFromSeries(o,i.type);l&&i.renderSeries(o,l,r,n)}),s.each(function(o){!je(o).keep&&i.group.remove(o.group)})},e.prototype.markKeep=function(a){je(a).keep=!0},e.prototype.toggleBlurSeries=function(a,r){var n=this;te(a,function(i){var s=Se.getMarkerModelFromSeries(i,n.type);if(s){var o=s.getData();o.eachItemGraphicEl(function(l){l&&(r?Cr(l):kr(l))})}})},e.type="marker",e}(Lr);const Un=Wn;var Qn=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,r,n){return new e(a,r,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Se);const Hn=Qn;var Te=it(),Yn=function(t,e,a,r){var n=t.getData(),i;if(j(r))i=r;else{var s=r.type;if(s==="min"||s==="max"||s==="average"||s==="median"||r.xAxis!=null||r.yAxis!=null){var o=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)o=e.getAxis(r.yAxis!=null?"y":"x"),l=Ir(r.yAxis,r.xAxis);else{var c=Aa(r,n,e,t);o=c.valueAxis;var u=Pr(n,c.valueDataDim);l=lt(n,u,s)}var d=o.dim==="x"?0:1,h=1-d,g=ga(r),f={coord:[]};g.type=null,g.coord=[],g.coord[h]=-1/0,f.coord[h]=1/0;var _=a.get("precision");_>=0&&aa(l)&&(l=+l.toFixed(Math.min(_,20))),g.coord[d]=f.coord[d]=l,i=[g,f,{type:s,valueIndex:r.valueIndex,value:l}]}else i=[]}var S=[Xt(t,i[0]),Xt(t,i[1]),ie({},i[2])];return S[2].type=S[2].type||null,xt(S[2],S[0]),xt(S[2],S[1]),S};function Me(t){return!isNaN(t)&&!isFinite(t)}function Jt(t,e,a,r){var n=1-t,i=r.dimensions[t];return Me(e[n])&&Me(a[n])&&e[t]===a[t]&&r.getAxis(i).containData(e[t])}function qn(t,e){if(t.type==="cartesian2d"){var a=e[0].coord,r=e[1].coord;if(a&&r&&(Jt(1,a,r,t)||Jt(0,a,r,t)))return!0}return Zt(t,e[0])&&Zt(t,e[1])}function Ke(t,e,a,r,n){var i=r.coordinateSystem,s=t.getItemModel(e),o,l=ye(s.get("x"),n.getWidth()),c=ye(s.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(c))o=[l,c];else{if(r.getMarkerPosition)o=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=i.dimensions,d=t.get(u[0],e),h=t.get(u[1],e);o=i.dataToPoint([d,h])}if(nt(i,"cartesian2d")){var g=i.getAxis("x"),f=i.getAxis("y"),u=i.dimensions;Me(t.get(u[0],e))?o[0]=g.toGlobalCoord(g.getExtent()[a?0:1]):Me(t.get(u[1],e))&&(o[1]=f.toGlobalCoord(f.getExtent()[a?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}t.setItemLayout(e,o)}var jn=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,r,n){r.eachSeries(function(i){var s=Se.getMarkerModelFromSeries(i,"markLine");if(s){var o=s.getData(),l=Te(s).from,c=Te(s).to;l.each(function(u){Ke(l,u,!0,i,n),Ke(c,u,!1,i,n)}),o.each(function(u){o.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(a,r,n,i){var s=a.coordinateSystem,o=a.id,l=a.getData(),c=this.markerGroupMap,u=c.get(o)||c.set(o,new gn);this.group.add(u.group);var d=Kn(s,a,r),h=d.from,g=d.to,f=d.line;Te(r).from=h,Te(r).to=g,r.setData(f);var _=r.get("symbol"),S=r.get("symbolSize"),A=r.get("symbolRotate"),y=r.get("symbolOffset");j(_)||(_=[_,_]),j(S)||(S=[S,S]),j(A)||(A=[A,A]),j(y)||(y=[y,y]),d.from.each(function(v){C(h,v,!0),C(g,v,!1)}),f.each(function(v){var b=f.getItemModel(v).getModel("lineStyle").getLineStyle();f.setItemLayout(v,[h.getItemLayout(v),g.getItemLayout(v)]),b.stroke==null&&(b.stroke=h.getItemVisual(v,"style").fill),f.setItemVisual(v,{fromSymbolKeepAspect:h.getItemVisual(v,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(v,"symbolOffset"),fromSymbolRotate:h.getItemVisual(v,"symbolRotate"),fromSymbolSize:h.getItemVisual(v,"symbolSize"),fromSymbol:h.getItemVisual(v,"symbol"),toSymbolKeepAspect:g.getItemVisual(v,"symbolKeepAspect"),toSymbolOffset:g.getItemVisual(v,"symbolOffset"),toSymbolRotate:g.getItemVisual(v,"symbolRotate"),toSymbolSize:g.getItemVisual(v,"symbolSize"),toSymbol:g.getItemVisual(v,"symbol"),style:b})}),u.updateData(f),d.line.eachItemGraphicEl(function(v){be(v).dataModel=r,v.traverse(function(b){be(b).dataModel=r})});function C(v,b,D){var k=v.getItemModel(b);Ke(v,b,D,a,i);var N=k.getModel("itemStyle").getItemStyle();N.fill==null&&(N.fill=Dr(l,"color")),v.setItemVisual(b,{symbolKeepAspect:k.get("symbolKeepAspect"),symbolOffset:he(k.get("symbolOffset",!0),y[D?0:1]),symbolRotate:he(k.get("symbolRotate",!0),A[D?0:1]),symbolSize:he(k.get("symbolSize"),S[D?0:1]),symbol:he(k.get("symbol",!0),_[D?0:1]),style:N})}this.markKeep(u),u.group.silent=r.get("silent")||a.get("silent")},e.type="markLine",e}(Un);function Kn(t,e,a){var r;t?r=re(t&&t.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return ie(ie({},u),{name:c,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new Ve(r,a),i=new Ve(r,a),s=new Ve([],a),o=re(a.get("data"),ne(Yn,e,t,a));t&&(o=wr(o,ne(qn,t)));var l=Gn(!!t,r);return n.initData(re(o,function(c){return c[0]}),null,l),i.initData(re(o,function(c){return c[1]}),null,l),s.initData(re(o,function(c){return c[2]})),s.hasItemOption=!0,{from:n,to:i,line:s}}const Xn=jn;function Zn(t){t.registerComponentModel(Hn),t.registerComponentView(Xn),t.registerPreprocessor(function(e){Rn(e.series,"markLine")&&(e.markLine=e.markLine||{})})}const Jn=ea({name:"QToggle",props:{...Ya,icon:String,iconColor:String},emits:qa,setup(t){function e(a,r){const n=de(()=>(a.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),i=de(()=>a.value===!0?t.iconColor:null);return()=>[ge("div",{class:"q-toggle__track"}),ge("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[ge(fe,{name:n.value,color:i.value})]:void 0)]}return ja("toggle",e)}}),ei=ea({name:"QTooltip",inheritAttrs:!1,props:{...Fa,...Ca,...zr,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:bt},self:{type:String,default:"top middle",validator:bt},offset:{type:Array,default:()=>[14,14],validator:za},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...ka],setup(t,{slots:e,emit:a,attrs:r}){let n,i;const s=La(),{proxy:{$q:o}}=s,l=Q(null),c=Q(!1),u=de(()=>St(t.anchor,o.lang.rtl)),d=de(()=>St(t.self,o.lang.rtl)),h=de(()=>t.persistent!==!0),{registerTick:g,removeTick:f}=Da(),{registerTimeout:_}=wa(),{transitionProps:S,transitionStyle:A}=Gr(t),{localScrollTarget:y,changeScrollEvent:C,unconfigureScrollTarget:v}=Ga(t,m),{anchorEl:b,canShow:D,anchorEvents:k}=Wa({showing:c,configureAnchorEl:p}),{show:N,hide:B}=Ia({showing:c,canShow:D,handleShow:V,handleHide:W,hideOnRouteChange:h,processOnMount:!0});Object.assign(k,{delayShow:Y,delayHide:$});const{showPortal:G,hidePortal:T,renderPortal:R}=Wr(s,l,w,"tooltip");if(o.platform.is.mobile===!0){const P={anchorEl:b,innerRef:l,onClickOutside(x){return B(x),x.target.classList.contains("q-dialog__backdrop")&&Ma(x),!0}},I=de(()=>t.modelValue===null&&t.persistent!==!0&&c.value===!0);me(I,x=>{(x===!0?Qa:At)(P)}),ct(()=>{At(P)})}function V(P){G(),g(()=>{i=new MutationObserver(()=>J()),i.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),J(),m()}),n===void 0&&(n=me(()=>o.screen.width+"|"+o.screen.height+"|"+t.self+"|"+t.anchor+"|"+o.lang.rtl,J)),_(()=>{G(!0),a("show",P)},t.transitionDuration)}function W(P){f(),T(),F(),_(()=>{T(!0),a("hide",P)},t.transitionDuration)}function F(){i!==void 0&&(i.disconnect(),i=void 0),n!==void 0&&(n(),n=void 0),v(),dt(k,"tooltipTemp")}function J(){Ua({targetEl:l.value,offset:t.offset,anchorEl:b.value,anchorOrigin:u.value,selfOrigin:d.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function Y(P){if(o.platform.is.mobile===!0){ht(),document.body.classList.add("non-selectable");const I=b.value,x=["touchmove","touchcancel","touchend","click"].map(U=>[I,U,"delayHide","passiveCapture"]);vt(k,"tooltipTemp",x)}_(()=>{N(P)},t.delay)}function $(P){o.platform.is.mobile===!0&&(dt(k,"tooltipTemp"),ht(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),_(()=>{B(P)},t.hideDelay)}function p(){if(t.noParentEvent===!0||b.value===null)return;const P=o.platform.is.mobile===!0?[[b.value,"touchstart","delayShow","passive"]]:[[b.value,"mouseenter","delayShow","passive"],[b.value,"mouseleave","delayHide","passive"]];vt(k,"anchor",P)}function m(){if(b.value!==null||t.scrollTarget!==void 0){y.value=Pa(b.value,t.scrollTarget);const P=t.noParentEvent===!0?J:B;C(y.value,P)}}function L(){return c.value===!0?ge("div",{...r,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,A.value],role:"tooltip"},Ta(e.default)):null}function w(){return ge(xa,S.value,L)}return ct(F),Object.assign(s.proxy,{updatePosition:J}),R}});xr([Tr,Bn,Mr,un,Nr,Er,Vr,Or,Zn]);const ti=Ea({components:{VChart:Br},setup(){const t=Fr(),e=Q({}),a=Q(!1),r=Q([]),n=Q([]),i=Q(null),s=Q({}),o=Q({}),l=Q({}),c=Q([{label:"Candlestick",value:"candlestick"},{label:"Line",value:"line"}]),u=Q("candlestick"),d=Q(!1),h=Q([{label:"EMA 20",value:"ema20"},{label:"SMA 50",value:"sma50"},{label:"EMA 50",value:"ema50"}]),g=Q([]),f=Q([]),_=Q(""),S=Q([]),A=Q(!1),y=15,C=p=>{switch(p){case"ema20":return"#ff9900";case"sma50":return"#9966ff";case"ema50":return"#ff66cc";default:return"#667eea"}};function v(p,m){const L=new Date(p),w=L.getHours()*60+L.getMinutes(),I=Math.floor(w/m)*m;return L.setHours(Math.floor(I/60)),L.setMinutes(I%60),L.setSeconds(0),L.setMilliseconds(0),L.getTime()}function b(p,m,L){const w={id:Date.now(),coin:p,targetPrice:m,currentPrice:L,type:"success",timestamp:new Date};S.value.unshift(w),setTimeout(()=>{D(w.id)},5e3)}function D(p){S.value=S.value.filter(m=>m.id!==p)}function k(p,m){if(!p||p.length<m)return[];const L=[],w=2/(m+1);let P=p[0][1];L.push([p[0][0],P]);for(let I=1;I<p.length;I++)P=(p[I][1]-P)*w+P,L.push([p[I][0],P]);return L}function N(p,m){if(!p||p.length<m)return[];const L=[];for(let w=m-1;w<p.length;w++){let P=0;for(let x=0;x<m;x++)P+=p[w-x][1];const I=P/m;L.push([p[w][0],I])}return L}function B(p,m=15){if(!p||p.length===0)return[];const L=[];let w=[],P=null;if([...p].sort((x,U)=>x[0]-U[0]).forEach((x,U)=>{const z=x[0],E=x[1];if(P||(P=v(z,m)),z<P+m*6e4)w.push([z,E]);else{if(w.length>0){const ee=w[0][1],le=w[w.length-1][1],ue=Math.max(...w.map(ce=>ce[1])),_e=Math.min(...w.map(ce=>ce[1]));L.push([P,ee,le,_e,ue])}w=[[z,E]],P=v(z,m)}}),w.length>0){const x=w[0][1],U=w[w.length-1][1],z=Math.max(...w.map(ee=>ee[1])),E=Math.min(...w.map(ee=>ee[1]));L.push([P,x,U,E,z])}return L}function G(p,m=15){if(!p||p.length===0)return[];const L=[];let w=[],P=null;if([...p].sort((x,U)=>x[0]-U[0]).forEach((x,U)=>{const z=x[0],E=x[1];if(P||(P=v(z,m)),z<P+m*6e4)w.push([z,E]);else{if(w.length>0){const ee=w.reduce((le,ue)=>le+ue[1],0);L.push([P,ee])}w=[[z,E]],P=v(z,m)}}),w.length>0){const x=w.reduce((U,z)=>U+z[1],0);L.push([P,x])}return L}function T(p){return!p||p.length===0?[]:p.map(m=>[m[0],m[1]])}function R(){if(!_.value||!i.value)return;const p={id:Date.now(),coin:i.value,price:parseFloat(_.value),active:!0,createdAt:new Date,triggered:!1};f.value.push(p),_.value="",A.value=!1,$(),t.notify({type:"positive",message:`Price alert set for ${p.coin.toUpperCase()} at ${p.price}`})}function V(p){const m=f.value.find(L=>L.id===p);f.value=f.value.filter(L=>L.id!==p),$(),m&&t.notify({type:"info",message:`Alert removed for ${m.coin.toUpperCase()}`})}function W(){if(!s.value||!i.value)return;const p=i.value;s.value[p]&&f.value.forEach(m=>{if(m.active&&m.coin===p){const L=s.value[p];if(L.length===0)return;const w=L[L.length-1][2],P=Math.abs(w-m.price),I=m.price*.005;P<=I&&!m.triggered&&(m.triggered=!0,b(m.coin,m.price,w),t.notify({type:"warning",message:` ${m.coin.toUpperCase()} reached ${w.toFixed(2)} (Target: ${m.price})`,timeout:0,actions:[{label:"Dismiss",color:"white"}]})),P>I&&m.triggered&&(m.triggered=!1)}})}async function F(){try{const{data:p}=await Be.get("https://api.coingecko.com/api/v3/coins/markets",{params:{vs_currency:"eur",order:"market_cap_desc",per_page:10,page:1}});r.value=p.map(m=>({label:`${m.name} (${m.symbol.toUpperCase()})`,value:m.id})),i.value=r.value[0].value}catch(p){console.error("Fehler beim Laden der Top-Coins:",p),t.notify({type:"negative",message:"Failed to load top cryptocurrencies"})}}async function J(){try{const{data:p}=await Be.get("https://api.coingecko.com/api/v3/coins/list");n.value=p.map(m=>({label:`${m.name} (${m.symbol.toUpperCase()})`,value:m.id}))}catch(p){console.error("Fehler beim Laden der Coin-Liste:",p)}}async function Y(){if(i.value){a.value=!0;try{const p=await Be.get(`http://localhost:3000/api/crypto/${i.value}`);s.value={},o.value={},l.value={};const m=i.value;l.value[m]=p.data.prices;const L=p.data.total_volumes||[];u.value==="candlestick"?(s.value[m]=B(p.data.prices,y),o.value[m]=G(L,y)):(s.value[m]=T(p.data.prices),o.value[m]=G(L,y)),W(),$()}catch(p){console.error("Fehler beim Laden der Kurse vom Server:",p),t.notify({type:"negative",message:"Failed to load cryptocurrency data"})}finally{a.value=!1}}}function $(){if(!s.value||!i.value||!s.value[i.value]){e.value={title:{text:"No data available",left:"center",top:"center"}};return}const p=i.value,m=[],L="#667eea",w=[];if(f.value.filter(I=>I.coin===p&&I.active).forEach(I=>{w.push({yAxis:I.price,name:`Alert: ${I.price}`,lineStyle:{color:I.triggered?"#10b981":"#ef4444",type:"dashed",width:2},label:{formatter:`Alert: ${I.price}`,position:"end"}})}),u.value==="candlestick"?m.push({name:p.toUpperCase(),type:"candlestick",data:s.value[p],itemStyle:{color:"#10b981",color0:"#ef4444",borderColor:"#10b981",borderColor0:"#ef4444",borderWidth:1},markLine:w.length>0?{data:w,symbol:"none"}:void 0}):m.push({name:p.toUpperCase(),type:"line",data:s.value[p],symbol:"none",lineStyle:{color:L,width:3},itemStyle:{color:L},markLine:w.length>0?{data:w,symbol:"none"}:void 0}),g.value.length>0&&l.value[p]){const I=l.value[p];g.value.forEach(x=>{let U=[],z=C(x);switch(x){case"ema20":U=k(I,20);break;case"sma50":U=N(I,50);break;case"ema50":U=k(I,50);break}U.length>0&&m.push({name:`${p.toUpperCase()} ${x.toUpperCase()}`,type:"line",data:U,symbol:"none",lineStyle:{color:z,width:2,type:"dashed"},itemStyle:{color:z}})})}d.value&&o.value[p]&&m.push({name:`${p.toUpperCase()} Volume`,type:"bar",data:o.value[p],xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#667eea",opacity:.6}});const P=d.value?[{left:"3%",right:"3%",bottom:"40%",top:"15%",containLabel:!0},{left:"3%",right:"3%",height:"20%",bottom:"5%",top:"75%",containLabel:!0}]:[{left:"3%",right:"3%",bottom:"15%",top:"15%",containLabel:!0}];e.value={animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"cross",lineStyle:{color:"#7581BD",width:1}},formatter:I=>{const x=new Date(I[0].value[0]);let z=`<div style="font-weight: bold; margin-bottom: 5px;">${`${x.getDate().toString().padStart(2,"0")}.${(x.getMonth()+1).toString().padStart(2,"0")}.${x.getFullYear()} ${x.getHours().toString().padStart(2,"0")}:${x.getMinutes().toString().padStart(2,"0")}`}</div>`;return I.forEach(E=>{var ee,le,ue,_e,ce,ut;if(E.seriesName.includes("Volume"))z+=`<div style="margin: 2px 0;">
                  <strong>${E.seriesName}</strong><br>
                  Volume: <strong>${(E.value[1]/1e6).toFixed(2)} Mio. </strong>
                </div>`;else if(u.value==="candlestick"&&E.value&&E.value.length>=5&&!E.seriesName.includes("EMA")&&!E.seriesName.includes("SMA")){const Ce=E.value[2]>=E.value[1],_a=Ce?"":"";z+=`<div style="color: ${Ce?"#10b981":"#ef4444"}; margin: 2px 0;">
                  <strong>${E.seriesName}</strong> ${_a}<br>
                  O: <strong>${((ee=E.value[1])==null?void 0:ee.toFixed(2))||"0.00"}</strong> |
                  H: <strong>${((le=E.value[4])==null?void 0:le.toFixed(2))||"0.00"}</strong><br>
                  C: <strong>${((ue=E.value[2])==null?void 0:ue.toFixed(2))||"0.00"}</strong> |
                  L: <strong>${((_e=E.value[3])==null?void 0:_e.toFixed(2))||"0.00"}</strong>
                </div>`}else if(E.value&&E.value.length>=2&&!E.seriesName.includes("Volume")){const Ce=E.seriesName.includes("EMA")||E.seriesName.includes("SMA")?`${((ce=E.value[1])==null?void 0:ce.toFixed(2))||"0.00"}`:`${((ut=E.value[1])==null?void 0:ut.toFixed(2))||"0.00"}`;z+=`<div style="margin: 2px 0;">
                  <strong>${E.seriesName}</strong><br>
                  ${E.seriesName.includes("EMA")||E.seriesName.includes("SMA")?"Value":"Price"}: <strong>${Ce}</strong>
                </div>`}}),z}},legend:{top:10,right:10,type:"scroll",textStyle:{color:"#1f2937"}},grid:P,xAxis:d.value?[{type:"time",gridIndex:0,axisLine:{onZero:!1},splitLine:{show:!0},minInterval:9e5,axisLabel:{formatter:I=>{const x=new Date(I);return`${x.getHours().toString().padStart(2,"0")}:${x.getMinutes().toString().padStart(2,"0")}`},color:"#6b7280"}},{type:"time",gridIndex:1,minInterval:9e5,axisLabel:{show:!1}}]:{type:"time",axisLine:{onZero:!1},splitLine:{show:!0},minInterval:9e5,axisLabel:{formatter:I=>{const x=new Date(I);return`${x.getHours().toString().padStart(2,"0")}:${x.getMinutes().toString().padStart(2,"0")}`},color:"#6b7280"}},yAxis:d.value?[{type:"value",name:"EUR",scale:!0,gridIndex:0,splitLine:{show:!0},axisLabel:{formatter:I=>`${I.toLocaleString()}`,color:"#6b7280"},nameTextStyle:{color:"#6b7280"}},{type:"value",name:"Volume (Mio. )",gridIndex:1,axisLabel:{formatter:I=>`${(I/1e6).toFixed(1)}M`,color:"#6b7280"},nameTextStyle:{color:"#6b7280"}}]:{type:"value",name:"EUR",scale:!0,splitLine:{show:!0},axisLabel:{formatter:I=>`${I.toLocaleString()}`,color:"#6b7280"},nameTextStyle:{color:"#6b7280"}},dataZoom:[{type:"slider",start:0,end:100,bottom:d.value?"30%":"20%",height:20},{type:"inside"}],series:m}}return me(i,(p,m)=>{p!==m&&Y()}),me([u,d,g],()=>{i.value&&$()},{deep:!0}),me(f,()=>{i.value&&$()},{deep:!0}),Oa(()=>{F(),J(),setTimeout(()=>{i.value&&Y()},1e3),setInterval(()=>{i.value&&Y()},6e4),setInterval(W,5e3)}),{chartOptions:e,loading:a,availableCoins:n,topCoins:r,selectedCoin:i,cryptoData:s,chartTypes:c,selectedChartType:u,showVolume:d,indicators:h,selectedIndicators:g,priceAlerts:f,newAlertPrice:_,notifications:S,showAlertDialog:A,addPriceAlert:R,removeAlert:V,removeNotification:D,getIndicatorColor:C,fetchData:Y,timeframeMinutes:y}}}),K=t=>(Ra("data-v-ada8a043"),t=t(),$a(),t),ai={class:"modern-dashboard"},ri={class:"dashboard-header"},ni=K(()=>M("div",{class:"header-content"},[M("h1",null,"Crypto Chart Analysis"),M("p",null,"Real-time cryptocurrency data with technical indicators & alerts")],-1)),ii={class:"header-actions"},oi={class:"quick-stats"},si={class:"stat-card selected-coin"},li={class:"stat-icon"},ui={class:"stat-content"},ci={key:0,class:"stat-value"},di={key:1,class:"stat-value"},hi=K(()=>M("div",{class:"stat-label"},"Selected Coin",-1)),vi={class:"stat-card alerts"},pi={class:"stat-icon"},fi={class:"stat-content"},gi={class:"stat-value"},mi=K(()=>M("div",{class:"stat-label"},"Active Alerts",-1)),yi={class:"stat-card timeframe"},bi={class:"stat-icon"},Si={class:"stat-content"},Ai={class:"stat-value"},_i=K(()=>M("div",{class:"stat-label"},"Timeframe",-1)),Ci={class:"stat-card indicators"},ki={class:"stat-content"},Li={class:"stat-value"},Di=K(()=>M("div",{class:"stat-label"},"Technical Indicators",-1)),wi={class:"row q-gutter-md items-center controls-row"},Ii={key:0,class:"alerts-section"},Pi={class:"text-subtitle2 q-mb-xs"},xi={class:"row q-gutter-sm"},Ti={class:"chart-container"},Mi={class:"chart-header"},Ni={key:0},Ei={key:1},Vi={class:"chart-legend"},Oi={key:0,class:"legend-item"},Bi=K(()=>M("div",{class:"legend-color bullish"},null,-1)),Ri=K(()=>M("span",null,"Bullish",-1)),$i=[Bi,Ri],Fi={key:1,class:"legend-item"},zi=K(()=>M("div",{class:"legend-color bearish"},null,-1)),Gi=K(()=>M("span",null,"Bearish",-1)),Wi=[zi,Gi],Ui={key:2,class:"legend-item"},Qi=K(()=>M("div",{class:"legend-color volume"},null,-1)),Hi=K(()=>M("span",null,"Volume",-1)),Yi=[Qi,Hi],qi={class:"chart-wrapper"},ji=K(()=>M("div",{class:"text-h6"},"Create Price Alert",-1)),Ki={class:"q-gutter-y-md"},Xi={class:"alert-coin-info"},Zi=K(()=>M("div",{class:"text-subtitle2"},"Selected Coin:",-1)),Ji={class:"text-h6 text-primary"},eo=K(()=>M("div",{class:"text-caption text-grey"},"  Alert will trigger when price is within 0.5% of target price. ",-1));function to(t,e,a,r,n,i){const s=Va("v-chart");return q(),X("div",ai,[M("div",ri,[ni,M("div",ii,[O(oe,{icon:"refresh",round:"",flat:"",onClick:t.fetchData,disable:!t.selectedCoin||t.loading},null,8,["onClick","disable"]),O(oe,{icon:"notifications",round:"",flat:"",color:"red",onClick:e[0]||(e[0]=o=>t.showAlertDialog=!0),disable:!t.selectedCoin},null,8,["disable"])])]),M("div",oi,[M("div",si,[M("div",li,[O(fe,{name:"currency_bitcoin"})]),M("div",ui,[t.selectedCoin?(q(),X("div",ci,ae(t.selectedCoin.toUpperCase()),1)):(q(),X("div",di,"None")),hi])]),M("div",vi,[M("div",pi,[O(fe,{name:"notifications"})]),M("div",fi,[M("div",gi,ae(t.priceAlerts.filter(o=>o.active&&o.coin===t.selectedCoin).length),1),mi])]),M("div",yi,[M("div",bi,[O(fe,{name:"schedule"})]),M("div",Si,[M("div",Ai,ae(t.timeframeMinutes)+"min",1),_i])]),M("div",Ci,[M("div",ki,[M("div",Li,ae(t.selectedIndicators.length),1),Di])])]),O(Oe,{class:"controls-card"},{default:Z(()=>[O(ke,null,{default:Z(()=>[M("div",wi,[O(Ne,{modelValue:t.selectedCoin,"onUpdate:modelValue":e[1]||(e[1]=o=>t.selectedCoin=o),options:t.topCoins,"use-input":"","input-debounce":"300",filter:(o,l)=>{if(!o){l(()=>t.topCoins);return}l(()=>t.availableCoins.filter(c=>c.label.toLowerCase().includes(o.toLowerCase())))},label:"Select Cryptocurrency","emit-value":"","map-options":"",filled:"",class:"coin-select"},null,8,["modelValue","options","filter"]),O(Ne,{modelValue:t.selectedChartType,"onUpdate:modelValue":e[2]||(e[2]=o=>t.selectedChartType=o),options:t.chartTypes,label:"Chart Type","emit-value":"","map-options":"",filled:""},null,8,["modelValue","options"]),O(Ne,{modelValue:t.selectedIndicators,"onUpdate:modelValue":e[3]||(e[3]=o=>t.selectedIndicators=o),options:t.indicators,multiple:"",label:"Technical Indicators","emit-value":"","map-options":"",filled:""},null,8,["modelValue","options"]),O(Jn,{modelValue:t.showVolume,"onUpdate:modelValue":e[4]||(e[4]=o=>t.showVolume=o),label:"Show Volume",color:"primary"},null,8,["modelValue"]),O(_t),O(Rr,{class:"col-auto nav-action-group"},{default:Z(()=>[O(oe,{label:"Financial Dashboard",color:"primary",icon:"analytics",to:"/chart",outline:""}),O(oe,{label:"Bank Import",color:"deep-purple",icon:"account_balance",to:"/bank-import",outline:""})]),_:1})])]),_:1})]),_:1}),t.selectedCoin&&t.priceAlerts.filter(o=>o.coin===t.selectedCoin).length>0?(q(),X("div",Ii,[O(Oe,{class:"alerts-card"},{default:Z(()=>[O(ke,null,{default:Z(()=>[M("div",Pi," Active Price Alerts for "+ae(t.selectedCoin.toUpperCase())+": ",1),M("div",xi,[(q(!0),X(pt,null,ft(t.priceAlerts.filter(o=>o.coin===t.selectedCoin),o=>(q(),gt(Ha,{key:o.id,color:o.triggered?"green":"red","text-color":"white",removable:"",onRemove:l=>t.removeAlert(o.id)},{default:Z(()=>[O(fe,{name:o.triggered?"notifications_active":"notifications",class:"q-mr-xs"},null,8,["name"]),mt(" "+ae(o.price)+" ",1),o.triggered?(q(),gt(ei,{key:0},{default:Z(()=>[mt("Alert triggered!")]),_:1})):pe("",!0)]),_:2},1032,["color","onRemove"]))),128))])]),_:1})]),_:1})])):pe("",!0),M("div",Ti,[M("div",Mi,[t.selectedCoin?(q(),X("h3",Ni,ae(t.selectedCoin.toUpperCase())+" - Cryptocurrency Analysis ",1)):(q(),X("h3",Ei,"Select a cryptocurrency to view analysis")),M("div",Vi,[t.selectedChartType==="candlestick"?(q(),X("div",Oi,$i)):pe("",!0),t.selectedChartType==="candlestick"?(q(),X("div",Fi,Wi)):pe("",!0),t.showVolume?(q(),X("div",Ui,Yi)):pe("",!0),(q(!0),X(pt,null,ft(t.selectedIndicators,o=>(q(),X("div",{class:"legend-item",key:o},[M("div",{class:"legend-color",style:Ba({backgroundColor:t.getIndicatorColor(o)})},null,4),M("span",null,ae(o.toUpperCase()),1)]))),128))])]),M("div",qi,[O(s,{class:"main-chart",option:t.chartOptions,autoresize:"",loading:t.loading},null,8,["option","loading"])])]),O(Ur,{modelValue:t.showAlertDialog,"onUpdate:modelValue":e[6]||(e[6]=o=>t.showAlertDialog=o),persistent:""},{default:Z(()=>[O(Oe,{class:"alert-dialog-card"},{default:Z(()=>[O(ke,{class:"row items-center q-pb-none"},{default:Z(()=>[ji,O(_t),yt(O(oe,{icon:"close",flat:"",round:"",dense:""},null,512),[[Tt]])]),_:1}),O(ke,null,{default:Z(()=>[M("div",Ki,[M("div",Xi,[Zi,M("div",Ji,ae(t.selectedCoin?t.selectedCoin.toUpperCase():"None"),1)]),O($r,{modelValue:t.newAlertPrice,"onUpdate:modelValue":e[5]||(e[5]=o=>t.newAlertPrice=o),label:"Target Price ()",type:"number",filled:"",placeholder:"e.g., 45000",disable:!t.selectedCoin},null,8,["modelValue","disable"]),eo])]),_:1}),O(Qr,{align:"right"},{default:Z(()=>[yt(O(oe,{flat:"",label:"Cancel",color:"primary"},null,512),[[Tt]]),O(oe,{label:"Create Alert",color:"red",onClick:t.addPriceAlert,disable:!t.newAlertPrice||!t.selectedCoin},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const fo=Na(ti,[["render",to],["__scopeId","data-v-ada8a043"]]);export{fo as default};

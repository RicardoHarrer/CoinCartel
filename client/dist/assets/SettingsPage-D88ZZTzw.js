import{_ as U,I as C,b as B,d as E,w as n,u as I,r as i,a as V,o as $,g as e,j as r,k as _,Q as m,m as D,K as f,f as F,S as y,s as R,t as T}from"./index-D4jzW2ih.js";import{b as M}from"./QSelect-C16r4JlN.js";import{Q as b,a as z}from"./QInput-Bqg2a1tB.js";import{Q as A}from"./QForm-D_CTQBRQ.js";import{u as G,Q as x}from"./use-quasar-C2Rn4zlt.js";import{Q as N}from"./QPage-CI1WetBD.js";import{a as h}from"./axios-DnX1qazU.js";import"./QDialog-C4hRUjbW.js";const O=C({name:"SettingsPage",setup(){const s=G(),l=I(),d=i(!1),u=i(!1),c=i({}),p=i([]),t=i({preferred_currency:"EUR",saldo:1e3});function w(){const a=F.getToken();if(!a)return null;try{return console.log("Decoding token:",y(a)),y(a).id}catch(g){return console.error("Invalid token:",g),null}}const v=w(),k=async()=>{try{const a=await h.get(`http://localhost:3000/preferences/${v}`);a.data&&a.data.length>0&&(t.value={preferred_currency:a.data[0].preferred_currency||"EUR",saldo:parseFloat(a.data[0].saldo)||1e3})}catch(a){console.error("Error fetching user preferences:",a)}},q=async()=>{u.value=!0;try{const a=await h.get("https://v6.exchangerate-api.com/v6/1bfd15eb1d48a0a8759f2adf/latest/EUR");c.value=a.data.conversion_rates,p.value=Object.keys(c.value).map(g=>({label:g,value:g}))}catch(a){console.error("Failed to fetch exchange rates:",a),s.notify({type:"negative",message:"Failed to load currency data. Using default options."}),p.value=[{label:"EUR",value:"EUR"},{label:"USD",value:"USD"},{label:"GBP",value:"GBP"},{label:"JPY",value:"JPY"}]}finally{u.value=!1}},P=async()=>{d.value=!0;try{await h.patch(`http://localhost:3000/preferences/${v}`,{preferred_currency:t.value.preferred_currency,saldo:t.value.saldo}),s.notify({type:"positive",message:"Preferences saved successfully!"}),l.push({path:"/chart",query:{saved:!0}})}catch(a){console.error("Error saving preferences:",a),s.notify({type:"negative",message:"Failed to save preferences. Please try again."})}finally{d.value=!1}},S=V(()=>c.value[t.value.preferred_currency]?(t.value.saldo*c.value[t.value.preferred_currency]).toFixed(2):"N/A"),Q=()=>{s.dark.set(!s.dark.isActive)};return $(async()=>{await q(),await k()}),{form:t,currencyOptions:p,loading:d,loadingCurrencies:u,convertedBudget:S,savePreferences:P,toggleDarkMode:Q}}}),o=s=>(R("data-v-66248378"),s=s(),T(),s),j={class:"modern-settings"},J={class:"dark-mode-toggle"},Y=o(()=>e("div",{class:"settings-header q-mb-xl"},[e("h1",{class:"text-h3 text-weight-bold text-dark q-mb-xs"},"Settings"),e("p",{class:"text-subtitle1 text-grey-7"},"Customize your financial dashboard experience")],-1)),K={class:"settings-grid"},L={class:"section-header"},W=o(()=>e("h3",{class:"text-h6 text-weight-medium"},"Financial Preferences",-1)),H=o(()=>e("p",{class:"text-caption text-grey-6 q-mb-lg"},"Configure your currency and budget settings",-1)),X={class:"form-row"},Z={class:"form-group"},ee=o(()=>e("label",{class:"text-weight-medium"},"Preferred Currency",-1)),se={class:"selected-currency"},ae=o(()=>e("span",{class:"currency-flag"},"ðŸ’°",-1)),te={class:"form-group"},re=o(()=>e("label",{class:"text-weight-medium"},"Monthly Budget",-1)),oe={class:"currency-badge"},ne={class:"budget-preview"},le=o(()=>e("div",{class:"preview-label"},"Monthly Overview",-1)),ce={class:"preview-amount"},ie={class:"form-actions"},de={class:"section-header"},ue=o(()=>e("h3",{class:"text-h6 text-weight-medium"},"Language & Translation",-1)),pe=o(()=>e("p",{class:"text-caption text-grey-6 q-mb-lg"},"Translate the website to your preferred language",-1)),ge={class:"translation-info"},me={class:"info-icon"},fe=o(()=>e("div",{class:"info-content"},[e("h4",{class:"text-h6 text-weight-medium q-mb-sm"},"Google Translate Widget"),e("p",{class:"text-body2 text-grey-7 q-mb-lg"}," Use the Google Translate widget in the top right corner to translate the entire website to your preferred language. "),e("div",{class:"translation-example"},[e("div",{class:"example-item"},[e("span",{class:"lang-flag"},"ðŸ‡ºðŸ‡¸"),e("span",{class:"text-caption"},"English")]),e("div",{class:"example-item"},[e("span",{class:"lang-flag"},"ðŸ‡©ðŸ‡ª"),e("span",{class:"text-caption"},"Deutsch")]),e("div",{class:"example-item"},[e("span",{class:"lang-flag"},"ðŸ‡«ðŸ‡·"),e("span",{class:"text-caption"},"FranÃ§ais")]),e("div",{class:"example-item"},[e("span",{class:"lang-flag"},"ðŸ‡ªðŸ‡¸"),e("span",{class:"text-caption"},"EspaÃ±ol")])])],-1));function he(s,l,d,u,c,p){return B(),E(N,{class:"q-pa-lg bg-page responsive-page-padding"},{default:n(()=>[e("div",j,[e("div",J,[r(_,{round:"",color:s.$q.dark.isActive?"grey-9":"yellow-9",icon:s.$q.dark.isActive?"dark_mode":"light_mode",class:"toggle-btn",onClick:s.toggleDarkMode,size:"lg"},null,8,["color","icon","onClick"])]),Y,e("div",K,[r(x,{class:"settings-card"},{default:n(()=>[r(b,{class:"card-section"},{default:n(()=>[e("div",L,[r(m,{name:"tune",size:"24px",class:"text-primary"}),W]),H,r(A,{onSubmit:s.savePreferences,class:"settings-form"},{default:n(()=>[e("div",X,[e("div",Z,[ee,r(M,{modelValue:s.form.preferred_currency,"onUpdate:modelValue":l[0]||(l[0]=t=>s.form.preferred_currency=t),options:s.currencyOptions,outlined:"","map-options":"","emit-value":"",loading:s.loadingCurrencies,rules:"required",class:"modern-select q-mb-md"},{selected:n(()=>[e("div",se,[ae,D(" "+f(s.form.preferred_currency),1)])]),_:1},8,["modelValue","options","loading"])]),e("div",te,[re,r(z,{modelValue:s.form.saldo,"onUpdate:modelValue":l[1]||(l[1]=t=>s.form.saldo=t),modelModifiers:{number:!0},type:"number",outlined:"",rules:[t=>t>=0||"Budget must be positive",t=>t!==null||"Budget is required"],step:"0.01",min:"0",class:"modern-input q-mb-md"},{prepend:n(()=>[r(m,{name:"euro"})]),append:n(()=>[e("span",oe,f(s.form.preferred_currency),1)]),_:1},8,["modelValue","rules"]),e("div",ne,[le,e("div",ce,f(s.form.saldo)+" "+f(s.form.preferred_currency),1)])])]),e("div",ie,[r(_,{label:"Save Preferences",type:"submit",color:"primary",loading:s.loading,class:"save-btn",icon:"save"},null,8,["loading"])])]),_:1},8,["onSubmit"])]),_:1})]),_:1}),r(x,{class:"settings-card"},{default:n(()=>[r(b,{class:"card-section"},{default:n(()=>[e("div",de,[r(m,{name:"translate",size:"24px",class:"text-primary"}),ue]),pe,e("div",ge,[e("div",me,[r(m,{name:"language",size:"48px",color:"primary"})]),fe])]),_:1})]),_:1})])])]),_:1})}const Pe=U(O,[["render",he],["__scopeId","data-v-66248378"]]);export{Pe as default};

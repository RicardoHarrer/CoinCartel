import{c as aa,a as ve,h as ye,Q as me,ak as La,al as Da,B as wa,r as U,am as Ia,an as Pa,ao as Ta,E as be,ab as ht,a5 as vt,a4 as pt,a0 as ft,ap as xa,T as Ma,G as Na,a3 as Ea,_ as Oa,I as Va,J as Ba,b as Y,i as J,g as T,j as V,k as ie,K as ne,w as ee,L as ge,M as gt,N as mt,o as Ra,d as yt,m as bt,O as $a,q as St,s as Fa,t as za}from"./index-D4jzW2ih.js";import{u as Ga,v as At,c as Wa,p as _t,d as Ua,a as Qa,r as kt,s as qa,e as Ha,b as Oe,f as Ya}from"./QSelect-C16r4JlN.js";import{u as ja,a as Ka,b as Xa}from"./use-checkbox-_-4alwxc.js";import{Q as Ct}from"./QSpace-DwxzaiVY.js";import{_ as H,V as ra,e as re,I as tt,W as Za,X as ke,Y as Lt,f as na,i as j,$ as at,q as fe,u as ue,t as ia,a0 as Ja,k as Dt,a1 as rt,a2 as oa,a3 as oe,a4 as Ae,a5 as sa,j as le,o as er,y as nt,x as la,a6 as tr,a7 as ar,w as it,v as ua,a8 as rr,a9 as ot,C as ca,h as da,aa as nr,E as se,ab as ir,ac as or,ad as sr,ae as lr,af as ur,ag as ha,S as wt,ah as cr,ai as dr,aj as hr,ak as vr,al as va,am as pa,an as pr,ao as It,B as fr,ap as gr,aq as fa,ar as ga,as as mr,at as Ve,au as yr,p as Se,r as pe,av as br,aw as Pt,ax as ma,ay as Sr,H as Ar,m as st,az as ya,aA as Tt,aB as xt,aC as _r,aD as kr,aE as Cr,aF as Lr,aG as Dr,aH as wr,aI as Ir,aJ as Be,aK as Pr,aL as Tr,aM as xr,aN as Mt,K as Mr,L as Nr,Q as Er,R as Or,M as Vr,N as Br,T as Rr,O as $r,U as Fr}from"./index-5So85wTa.js";import{Q as De,a as zr}from"./QInput-Bqg2a1tB.js";import{Q as Re,u as Gr}from"./use-quasar-C2Rn4zlt.js";import{u as Wr,a as Ur,b as Qr,Q as qr}from"./QDialog-C4hRUjbW.js";import{Q as Hr}from"./QCardActions-DSL-cUoF.js";import{C as Nt}from"./ClosePopup-BpKqQNiV.js";import{a as $e}from"./axios-DnX1qazU.js";var Je=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.getInitialData=function(a,r){return ra(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(a,r,n){var i=this.coordinateSystem;if(i&&i.clampData){var s=i.clampData(a),o=i.dataToPoint(s);if(n)re(i.getAxes(),function(h,m){if(h.type==="category"&&r!=null){var g=h.getTicksCoords(),C=h.getTickModel().get("alignWithLabel"),_=s[m],k=r[m]==="x1"||r[m]==="y1";if(k&&!C&&(_+=1),g.length<2)return;if(g.length===2){o[m]=h.toGlobalCoord(h.getExtent()[k?1:0]);return}for(var S=void 0,L=void 0,p=1,b=0;b<g.length;b++){var w=g[b].coord,D=b===g.length-1?g[b-1].tickValue+p:g[b].tickValue;if(D===_){L=w;break}else if(D<_)S=w;else if(S!=null&&D>_){L=(w+S)/2;break}b===1&&(p=D-g[0].tickValue)}L==null&&(S?S&&(L=g[g.length-1].coord):L=g[0].coord),o[m]=h.toGlobalCoord(L)}});else{var l=this.getData(),c=l.getLayout("offset"),u=l.getLayout("size"),d=i.getBaseAxis().isHorizontal()?0:1;o[d]+=c+u/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(tt);tt.registerClass(Je);var Yr=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.getInitialData=function(){return ra(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},e.prototype.getProgressiveThreshold=function(){var a=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>a&&(a=r),a},e.prototype.brushSelector=function(a,r,n){return n.rect(r.getItemLayout(a))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Za(Je.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(Je);const jr=Yr;var Kr=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return t}(),Et=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="sausage",r}return e.prototype.getDefaultShape=function(){return new Kr},e.prototype.buildPath=function(a,r){var n=r.cx,i=r.cy,s=Math.max(r.r0||0,0),o=Math.max(r.r,0),l=(o-s)*.5,c=s+l,u=r.startAngle,d=r.endAngle,h=r.clockwise,m=Math.PI*2,g=h?d-u<m:u-d<m;g||(u=d-(h?m:-m));var C=Math.cos(u),_=Math.sin(u),k=Math.cos(d),S=Math.sin(d);g?(a.moveTo(C*s+n,_*s+i),a.arc(C*c+n,_*c+i,l,-Math.PI+u,u,!h)):a.moveTo(C*o+n,_*o+i),a.arc(n,i,o,u,d,!h),a.arc(k*c+n,S*c+i,l,d-Math.PI*2,d-Math.PI,!h),s!==0&&a.arc(n,i,s,d,u,h)},e}(ke);function Xr(t,e){e=e||{};var a=e.isRoundCap;return function(r,n,i){var s=n.position;if(!s||s instanceof Array)return Lt(r,n,i);var o=t(s),l=n.distance!=null?n.distance:5,c=this.shape,u=c.cx,d=c.cy,h=c.r,m=c.r0,g=(h+m)/2,C=c.startAngle,_=c.endAngle,k=(C+_)/2,S=a?Math.abs(h-m)/2:0,L=Math.cos,p=Math.sin,b=u+h*L(C),w=d+h*p(C),D="left",M="top";switch(o){case"startArc":b=u+(m-l)*L(k),w=d+(m-l)*p(k),D="center",M="top";break;case"insideStartArc":b=u+(m+l)*L(k),w=d+(m+l)*p(k),D="center",M="bottom";break;case"startAngle":b=u+g*L(C)+we(C,l+S,!1),w=d+g*p(C)+Ie(C,l+S,!1),D="right",M="middle";break;case"insideStartAngle":b=u+g*L(C)+we(C,-l+S,!1),w=d+g*p(C)+Ie(C,-l+S,!1),D="left",M="middle";break;case"middle":b=u+g*L(k),w=d+g*p(k),D="center",M="middle";break;case"endArc":b=u+(h+l)*L(k),w=d+(h+l)*p(k),D="center",M="bottom";break;case"insideEndArc":b=u+(h-l)*L(k),w=d+(h-l)*p(k),D="center",M="top";break;case"endAngle":b=u+g*L(_)+we(_,l+S,!0),w=d+g*p(_)+Ie(_,l+S,!0),D="left",M="middle";break;case"insideEndAngle":b=u+g*L(_)+we(_,-l+S,!0),w=d+g*p(_)+Ie(_,-l+S,!0),D="right",M="middle";break;default:return Lt(r,n,i)}return r=r||{},r.x=b,r.y=w,r.align=D,r.verticalAlign=M,r}}function Zr(t,e,a,r){if(na(r)){t.setTextConfig({rotation:r});return}else if(j(e)){t.setTextConfig({rotation:0});return}var n=t.shape,i=n.clockwise?n.startAngle:n.endAngle,s=n.clockwise?n.endAngle:n.startAngle,o=(i+s)/2,l,c=a(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=o;break;case"startAngle":case"insideStartAngle":l=i;break;case"endAngle":case"insideEndAngle":l=s;break;default:t.setTextConfig({rotation:0});return}var u=Math.PI*1.5-l;c==="middle"&&u>Math.PI/2&&u<Math.PI*1.5&&(u-=Math.PI),t.setTextConfig({rotation:u})}function we(t,e,a){return e*Math.sin(t)*(a?-1:1)}function Ie(t,e,a){return e*Math.cos(t)*(a?1:-1)}var Fe=Math.max,ze=Math.min;function Jr(t,e){var a=t.getArea&&t.getArea();if(ot(t,"cartesian2d")){var r=t.getBaseAxis();if(r.type!=="category"||!r.onBand){var n=e.getLayout("bandWidth");r.isHorizontal()?(a.x-=n,a.width+=n*2):(a.y-=n,a.height+=n*2)}}return a}var en=function(t){H(e,t);function e(){var a=t.call(this)||this;return a.type=e.type,a._isFirstFrame=!0,a}return e.prototype.render=function(a,r,n,i){this._model=a,this._removeOnRenderedListener(n),this._updateDrawMode(a);var s=a.get("coordinateSystem");(s==="cartesian2d"||s==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(a,r,n):this._renderNormal(a,r,n,i))},e.prototype.incrementalPrepareRender=function(a){this._clear(),this._updateDrawMode(a),this._updateLargeClip(a)},e.prototype.incrementalRender=function(a,r){this._progressiveEls=[],this._incrementalRenderLarge(a,r)},e.prototype.eachRendered=function(a){at(this._progressiveEls||this.group,a)},e.prototype._updateDrawMode=function(a){var r=a.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(a,r,n,i){var s=this.group,o=a.getData(),l=this._data,c=a.coordinateSystem,u=c.getBaseAxis(),d;c.type==="cartesian2d"?d=u.isHorizontal():c.type==="polar"&&(d=u.dim==="angle");var h=a.isAnimationEnabled()?a:null,m=tn(a,c);m&&this._enableRealtimeSort(m,o,n);var g=a.get("clip",!0)||m,C=Jr(c,o);s.removeClipPath();var _=a.get("roundCap",!0),k=a.get("showBackground",!0),S=a.getModel("backgroundStyle"),L=S.get("borderRadius")||0,p=[],b=this._backgroundEls,w=i&&i.isInitSort,D=i&&i.type==="changeAxisOrder";function M(I){var R=Pe[c.type](o,I),O=un(c,d,R);return O.useStyle(S.getItemStyle()),c.type==="cartesian2d"?O.setShape("r",L):O.setShape("cornerRadius",L),p[I]=O,O}o.diff(l).add(function(I){var R=o.getItemModel(I),O=Pe[c.type](o,I,R);if(k&&M(I),!(!o.hasValue(I)||!$t[c.type](O))){var W=!1;g&&(W=Ot[c.type](C,O));var $=Vt[c.type](a,o,I,O,d,h,u.model,!1,_);m&&($.forceLabelAnimation=!0),Ft($,o,I,R,O,a,d,c.type==="polar"),w?$.attr({shape:O}):m?Bt(m,h,$,O,I,d,!1,!1):fe($,{shape:O},a,I),o.setItemGraphicEl(I,$),s.add($),$.ignore=W}}).update(function(I,R){var O=o.getItemModel(I),W=Pe[c.type](o,I,O);if(k){var $=void 0;b.length===0?$=M(R):($=b[R],$.useStyle(S.getItemStyle()),c.type==="cartesian2d"?$.setShape("r",L):$.setShape("cornerRadius",L),p[I]=$);var te=Pe[c.type](o,I),X=Sa(d,te,c);ue($,{shape:X},h,I)}var z=l.getItemGraphicEl(R);if(!o.hasValue(I)||!$t[c.type](W)){s.remove(z);return}var Z=!1;if(g&&(Z=Ot[c.type](C,W),Z&&s.remove(z)),z?ia(z):z=Vt[c.type](a,o,I,W,d,h,u.model,!!z,_),m&&(z.forceLabelAnimation=!0),D){var Q=z.getTextContent();if(Q){var v=Ja(Q);v.prevValue!=null&&(v.prevValue=v.value)}}else Ft(z,o,I,O,W,a,d,c.type==="polar");w?z.attr({shape:W}):m?Bt(m,h,z,W,I,d,!0,D):ue(z,{shape:W},a,I,null),o.setItemGraphicEl(I,z),z.ignore=Z,s.add(z)}).remove(function(I){var R=l.getItemGraphicEl(I);R&&Dt(R,a,I)}).execute();var B=this._backgroundGroup||(this._backgroundGroup=new rt);B.removeAll();for(var G=0;G<p.length;++G)B.add(p[G]);s.add(B),this._backgroundEls=p,this._data=o},e.prototype._renderLarge=function(a,r,n){this._clear(),Gt(a,this.group),this._updateLargeClip(a)},e.prototype._incrementalRenderLarge=function(a,r){this._removeBackground(),Gt(r,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(a){var r=a.get("clip",!0)&&oa(a.coordinateSystem,!1,a),n=this.group;r?n.setClipPath(r):n.removeClipPath()},e.prototype._enableRealtimeSort=function(a,r,n){var i=this;if(r.count()){var s=a.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,a,n),this._isFirstFrame=!1;else{var o=function(l){var c=r.getItemGraphicEl(l),u=c&&c.shape;return u&&Math.abs(s.isHorizontal()?u.height:u.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,o,s,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(a,r,n){var i=[];return a.each(a.mapDimension(r.dim),function(s,o){var l=n(o);l=l??NaN,i.push({dataIndex:o,mappedValue:l,ordinalNumber:s})}),i.sort(function(s,o){return o.mappedValue-s.mappedValue}),{ordinalNumbers:oe(i,function(s){return s.ordinalNumber})}},e.prototype._isOrderChangedWithinSameData=function(a,r,n){for(var i=n.scale,s=a.mapDimension(n.dim),o=Number.MAX_VALUE,l=0,c=i.getOrdinalMeta().categories.length;l<c;++l){var u=a.rawIndexOf(s,i.getRawOrdinalNumber(l)),d=u<0?Number.MIN_VALUE:r(a.indexOfRawIndex(u));if(d>o)return!0;o=d}return!1},e.prototype._isOrderDifferentInView=function(a,r){for(var n=r.scale,i=n.getExtent(),s=Math.max(0,i[0]),o=Math.min(i[1],n.getOrdinalMeta().categories.length-1);s<=o;++s)if(a.ordinalNumbers[s]!==n.getRawOrdinalNumber(s))return!0},e.prototype._updateSortWithinSameData=function(a,r,n,i){if(this._isOrderChangedWithinSameData(a,r,n)){var s=this._dataSort(a,n,r);this._isOrderDifferentInView(s,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:s}))}},e.prototype._dispatchInitSort=function(a,r,n){var i=r.baseAxis,s=this._dataSort(a,i,function(o){return a.get(a.mapDimension(r.otherAxis.dim),o)});n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:s})},e.prototype.remove=function(a,r){this._clear(this._model),this._removeOnRenderedListener(r)},e.prototype.dispose=function(a,r){this._removeOnRenderedListener(r)},e.prototype._removeOnRenderedListener=function(a){this._onRendered&&(a.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(a){var r=this.group,n=this._data;a&&a.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(i){Dt(i,a,Ae(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(ca),Ot={cartesian2d:function(t,e){var a=e.width<0?-1:1,r=e.height<0?-1:1;a<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height);var n=t.x+t.width,i=t.y+t.height,s=Fe(e.x,t.x),o=ze(e.x+e.width,n),l=Fe(e.y,t.y),c=ze(e.y+e.height,i),u=o<s,d=c<l;return e.x=u&&s>n?o:s,e.y=d&&l>i?c:l,e.width=u?0:o-s,e.height=d?0:c-l,a<0&&(e.x+=e.width,e.width=-e.width),r<0&&(e.y+=e.height,e.height=-e.height),u||d},polar:function(t,e){var a=e.r0<=e.r?1:-1;if(a<0){var r=e.r;e.r=e.r0,e.r0=r}var n=ze(e.r,t.r),i=Fe(e.r0,t.r0);e.r=n,e.r0=i;var s=n-i<0;if(a<0){var r=e.r;e.r=e.r0,e.r0=r}return s}},Vt={cartesian2d:function(t,e,a,r,n,i,s,o,l){var c=new sa({shape:le({},r),z2:1});if(c.__dataIndex=a,c.name="item",i){var u=c.shape,d=n?"height":"width";u[d]=0}return c},polar:function(t,e,a,r,n,i,s,o,l){var c=!n&&l?Et:da,u=new c({shape:r,z2:1});u.name="item";var d=ba(n);if(u.calculateTextPosition=Xr(d,{isRoundCap:c===Et}),i){var h=u.shape,m=n?"r":"endAngle",g={};h[m]=n?r.r0:r.startAngle,g[m]=r[m],(o?ue:fe)(u,{shape:g},i)}return u}};function tn(t,e){var a=t.get("realtimeSort",!0),r=e.getBaseAxis();if(a&&r.type==="category"&&e.type==="cartesian2d")return{baseAxis:r,otherAxis:e.getOtherAxis(r)}}function Bt(t,e,a,r,n,i,s,o){var l,c;i?(c={x:r.x,width:r.width},l={y:r.y,height:r.height}):(c={y:r.y,height:r.height},l={x:r.x,width:r.width}),o||(s?ue:fe)(a,{shape:l},e,n,null);var u=e?t.baseAxis.model:null;(s?ue:fe)(a,{shape:c},u,n)}function Rt(t,e){for(var a=0;a<e.length;a++)if(!isFinite(t[e[a]]))return!0;return!1}var an=["x","y","width","height"],rn=["cx","cy","r","startAngle","endAngle"],$t={cartesian2d:function(t){return!Rt(t,an)},polar:function(t){return!Rt(t,rn)}},Pe={cartesian2d:function(t,e,a){var r=t.getItemLayout(e),n=a?on(a,r):0,i=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+i*n/2,y:r.y+s*n/2,width:r.width-i*n,height:r.height-s*n}},polar:function(t,e,a){var r=t.getItemLayout(e);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function nn(t){return t.startAngle!=null&&t.endAngle!=null&&t.startAngle===t.endAngle}function ba(t){return function(e){var a=e?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+a;default:return r}}}(t)}function Ft(t,e,a,r,n,i,s,o){var l=e.getItemVisual(a,"style");if(o){if(!i.get("roundCap")){var u=t.shape,d=er(r.getModel("itemStyle"),u,!0);le(u,d),t.setShape(u)}}else{var c=r.get(["itemStyle","borderRadius"])||0;t.setShape("r",c)}t.useStyle(l);var h=r.getShallow("cursor");h&&t.attr("cursor",h);var m=o?s?n.r>=n.r0?"endArc":"startArc":n.endAngle>=n.startAngle?"endAngle":"startAngle":s?n.height>=0?"bottom":"top":n.width>=0?"right":"left",g=nt(r);la(t,g,{labelFetcher:i,labelDataIndex:a,defaultText:tr(i.getData(),a),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:m});var C=t.getTextContent();if(o&&C){var _=r.get(["label","position"]);t.textConfig.inside=_==="middle"?!0:null,Zr(t,_==="outside"?m:_,ba(s),r.get(["label","rotate"]))}ar(C,g,i.getRawValue(a),function(S){return nr(e,S)});var k=r.getModel(["emphasis"]);it(t,k.get("focus"),k.get("blurScope"),k.get("disabled")),ua(t,r),nn(n)&&(t.style.fill="none",t.style.stroke="none",re(t.states,function(S){S.style&&(S.style.fill=S.style.stroke="none")}))}function on(t,e){var a=t.get(["itemStyle","borderColor"]);if(!a||a==="none")return 0;var r=t.get(["itemStyle","borderWidth"])||0,n=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),i=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(r,n,i)}var sn=function(){function t(){}return t}(),zt=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="largeBar",r}return e.prototype.getDefaultShape=function(){return new sn},e.prototype.buildPath=function(a,r){for(var n=r.points,i=this.baseDimIdx,s=1-this.baseDimIdx,o=[],l=[],c=this.barWidth,u=0;u<n.length;u+=3)l[i]=c,l[s]=n[u+2],o[i]=n[u+i],o[s]=n[u+s],a.rect(o[0],o[1],l[0],l[1])},e}(ke);function Gt(t,e,a,r){var n=t.getData(),i=n.getLayout("valueAxisHorizontal")?1:0,s=n.getLayout("largeDataIndices"),o=n.getLayout("size"),l=t.getModel("backgroundStyle"),c=n.getLayout("largeBackgroundPoints");if(c){var u=new zt({shape:{points:c},incremental:!!r,silent:!0,z2:0});u.baseDimIdx=i,u.largeDataIndices=s,u.barWidth=o,u.useStyle(l.getItemStyle()),e.add(u),a&&a.push(u)}var d=new zt({shape:{points:n.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});d.baseDimIdx=i,d.largeDataIndices=s,d.barWidth=o,e.add(d),d.useStyle(n.getVisual("style")),d.style.stroke=null,Ae(d).seriesIndex=t.seriesIndex,t.get("silent")||(d.on("mousedown",Wt),d.on("mousemove",Wt)),a&&a.push(d)}var Wt=rr(function(t){var e=this,a=ln(e,t.offsetX,t.offsetY);Ae(e).dataIndex=a>=0?a:null},30,!1);function ln(t,e,a){for(var r=t.baseDimIdx,n=1-r,i=t.shape.points,s=t.largeDataIndices,o=[],l=[],c=t.barWidth,u=0,d=i.length/3;u<d;u++){var h=u*3;if(l[r]=c,l[n]=i[h+2],o[r]=i[h+r],o[n]=i[h+n],l[n]<0&&(o[n]+=l[n],l[n]=-l[n]),e>=o[0]&&e<=o[0]+l[0]&&a>=o[1]&&a<=o[1]+l[1])return s[u]}return-1}function Sa(t,e,a){if(ot(a,"cartesian2d")){var r=e,n=a.getArea();return{x:t?r.x:n.x,y:t?n.y:r.y,width:t?r.width:n.width,height:t?n.height:r.height}}else{var n=a.getArea(),i=e;return{cx:n.cx,cy:n.cy,r0:t?n.r0:i.r0,r:t?n.r:i.r,startAngle:t?i.startAngle:0,endAngle:t?i.endAngle:Math.PI*2}}}function un(t,e,a){var r=t.type==="polar"?da:sa;return new r({shape:Sa(e,a,t),silent:!0,z2:0})}const cn=en;function dn(t){t.registerChartView(cn),t.registerSeriesModel(jr),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,se(sr,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,ir("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,or("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(e,a){var r=e.componentType||"series";a.eachComponent({mainType:r,query:e},function(n){e.sortInfo&&n.axis.setCategorySortInfo(e.sortInfo)})})}var Ut=lr.prototype,Ge=ur.prototype,Aa=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){H(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(Aa);function We(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var hn=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="ec-line",r}return e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Aa},e.prototype.buildPath=function(a,r){We(r)?Ut.buildPath.call(this,a,r):Ge.buildPath.call(this,a,r)},e.prototype.pointAt=function(a){return We(this.shape)?Ut.pointAt.call(this,a):Ge.pointAt.call(this,a)},e.prototype.tangentAt=function(a){var r=this.shape,n=We(r)?[r.x2-r.x1,r.y2-r.y1]:Ge.tangentAt.call(this,a);return ha(n,n)},e}(ke),Ue=["fromSymbol","toSymbol"];function Qt(t){return"_"+t+"Type"}function qt(t,e,a){var r=e.getItemVisual(a,t);if(!r||r==="none")return r;var n=e.getItemVisual(a,t+"Size"),i=e.getItemVisual(a,t+"Rotate"),s=e.getItemVisual(a,t+"Offset"),o=e.getItemVisual(a,t+"KeepAspect"),l=va(n),c=pa(s||0,l);return r+l+c+(i||"")+(o||"")}function Ht(t,e,a){var r=e.getItemVisual(a,t);if(!(!r||r==="none")){var n=e.getItemVisual(a,t+"Size"),i=e.getItemVisual(a,t+"Rotate"),s=e.getItemVisual(a,t+"Offset"),o=e.getItemVisual(a,t+"KeepAspect"),l=va(n),c=pa(s||0,l),u=pr(r,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,o);return u.__specifiedRotation=i==null||isNaN(i)?void 0:+i*Math.PI/180||0,u.name=t,u}}function vn(t){var e=new hn({name:"line",subPixelOptimize:!0});return et(e.shape,t),e}function et(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var a=e[2];a?(t.cpx1=a[0],t.cpy1=a[1]):(t.cpx1=NaN,t.cpy1=NaN)}var pn=function(t){H(e,t);function e(a,r,n){var i=t.call(this)||this;return i._createLine(a,r,n),i}return e.prototype._createLine=function(a,r,n){var i=a.hostModel,s=a.getItemLayout(r),o=vn(s);o.shape.percent=0,fe(o,{shape:{percent:1}},i,r),this.add(o),re(Ue,function(l){var c=Ht(l,a,r);this.add(c),this[Qt(l)]=qt(l,a,r)},this),this._updateCommonStl(a,r,n)},e.prototype.updateData=function(a,r,n){var i=a.hostModel,s=this.childOfName("line"),o=a.getItemLayout(r),l={shape:{}};et(l.shape,o),ue(s,l,i,r),re(Ue,function(c){var u=qt(c,a,r),d=Qt(c);if(this[d]!==u){this.remove(this.childOfName(c));var h=Ht(c,a,r);this.add(h)}this[d]=u},this),this._updateCommonStl(a,r,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(a,r,n){var i=a.hostModel,s=this.childOfName("line"),o=n&&n.emphasisLineStyle,l=n&&n.blurLineStyle,c=n&&n.selectLineStyle,u=n&&n.labelStatesModels,d=n&&n.emphasisDisabled,h=n&&n.focus,m=n&&n.blurScope;if(!n||a.hasItemOption){var g=a.getItemModel(r),C=g.getModel("emphasis");o=C.getModel("lineStyle").getLineStyle(),l=g.getModel(["blur","lineStyle"]).getLineStyle(),c=g.getModel(["select","lineStyle"]).getLineStyle(),d=C.get("disabled"),h=C.get("focus"),m=C.get("blurScope"),u=nt(g)}var _=a.getItemVisual(r,"style"),k=_.stroke;s.useStyle(_),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=o,s.ensureState("blur").style=l,s.ensureState("select").style=c,re(Ue,function(w){var D=this.childOfName(w);if(D){D.setColor(k),D.style.opacity=_.opacity;for(var M=0;M<wt.length;M++){var B=wt[M],G=s.getState(B);if(G){var I=G.style||{},R=D.ensureState(B),O=R.style||(R.style={});I.stroke!=null&&(O[D.__isEmptyBrush?"stroke":"fill"]=I.stroke),I.opacity!=null&&(O.opacity=I.opacity)}}D.markRedraw()}},this);var S=i.getRawValue(r);la(this,u,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(w,D){return i.getFormattedLabel(w,D,a.dataType)}},inheritColor:k||"#000",defaultOpacity:_.opacity,defaultText:(S==null?a.getName(r):isFinite(S)?cr(S):S)+""});var L=this.getTextContent();if(L){var p=u.normal;L.__align=L.style.align,L.__verticalAlign=L.style.verticalAlign,L.__position=p.get("position")||"middle";var b=p.get("distance");j(b)||(b=[b,b]),L.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),it(this,h,m,d)},e.prototype.highlight=function(){dr(this)},e.prototype.downplay=function(){hr(this)},e.prototype.updateLayout=function(a,r){this.setLinePoints(a.getItemLayout(r))},e.prototype.setLinePoints=function(a){var r=this.childOfName("line");et(r.shape,a),r.dirty()},e.prototype.beforeUpdate=function(){var a=this,r=a.childOfName("fromSymbol"),n=a.childOfName("toSymbol"),i=a.getTextContent();if(!r&&!n&&(!i||i.ignore))return;for(var s=1,o=this.parent;o;)o.scaleX&&(s/=o.scaleX),o=o.parent;var l=a.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var c=l.shape.percent,u=l.pointAt(0),d=l.pointAt(c),h=vr([],d,u);ha(h,h);function m(G,I){var R=G.__specifiedRotation;if(R==null){var O=l.tangentAt(I);G.attr("rotation",(I===1?-1:1)*Math.PI/2-Math.atan2(O[1],O[0]))}else G.attr("rotation",R)}if(r&&(r.setPosition(u),m(r,0),r.scaleX=r.scaleY=s*c,r.markRedraw()),n&&(n.setPosition(d),m(n,1),n.scaleX=n.scaleY=s*c,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var g=void 0,C=void 0,_=i.__labelDistance,k=_[0]*s,S=_[1]*s,L=c/2,p=l.tangentAt(L),b=[p[1],-p[0]],w=l.pointAt(L);b[1]>0&&(b[0]=-b[0],b[1]=-b[1]);var D=p[0]<0?-1:1;if(i.__position!=="start"&&i.__position!=="end"){var M=-Math.atan2(p[1],p[0]);d[0]<u[0]&&(M=Math.PI+M),i.rotation=M}var B=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":B=-S,C="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":B=S,C="top";break;default:B=0,C="middle"}switch(i.__position){case"end":i.x=h[0]*k+d[0],i.y=h[1]*S+d[1],g=h[0]>.8?"left":h[0]<-.8?"right":"center",C=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":i.x=-h[0]*k+u[0],i.y=-h[1]*S+u[1],g=h[0]>.8?"right":h[0]<-.8?"left":"center",C=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=k*D+u[0],i.y=u[1]+B,g=p[0]<0?"right":"left",i.originX=-k*D,i.originY=-B;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=w[0],i.y=w[1]+B,g="center",i.originY=-B;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-k*D+d[0],i.y=d[1]+B,g=p[0]>=0?"right":"left",i.originX=k*D,i.originY=-B;break}i.scaleX=i.scaleY=s,i.setStyle({verticalAlign:i.__verticalAlign||C,align:i.__align||g})}},e}(rt);const fn=pn;var gn=function(){function t(e){this.group=new rt,this._LineCtor=e||fn}return t.prototype.updateData=function(e){var a=this;this._progressiveEls=null;var r=this,n=r.group,i=r._lineData;r._lineData=e,i||n.removeAll();var s=Yt(e);e.diff(i).add(function(o){a._doAdd(e,o,s)}).update(function(o,l){a._doUpdate(i,e,l,o,s)}).remove(function(o){n.remove(i.getItemGraphicEl(o))}).execute()},t.prototype.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(a,r){a.updateLayout(e,r)},this)},t.prototype.incrementalPrepareUpdate=function(e){this._seriesScope=Yt(e),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(e,a){this._progressiveEls=[];function r(o){!o.isGroup&&!mn(o)&&(o.incremental=!0,o.ensureState("emphasis").hoverLayer=!0)}for(var n=e.start;n<e.end;n++){var i=a.getItemLayout(n);if(Qe(i)){var s=new this._LineCtor(a,n,this._seriesScope);s.traverse(r),this.group.add(s),a.setItemGraphicEl(n,s),this._progressiveEls.push(s)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(e){at(this._progressiveEls||this.group,e)},t.prototype._doAdd=function(e,a,r){var n=e.getItemLayout(a);if(Qe(n)){var i=new this._LineCtor(e,a,r);e.setItemGraphicEl(a,i),this.group.add(i)}},t.prototype._doUpdate=function(e,a,r,n,i){var s=e.getItemGraphicEl(r);if(!Qe(a.getItemLayout(n))){this.group.remove(s);return}s?s.updateData(a,n,i):s=new this._LineCtor(a,n,i),a.setItemGraphicEl(n,s),this.group.add(s)},t}();function mn(t){return t.animators&&t.animators.length>0}function Yt(t){var e=t.hostModel,a=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:a.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:a.get("disabled"),blurScope:a.get("blurScope"),focus:a.get("focus"),labelStatesModels:nt(e)}}function jt(t){return isNaN(t[0])||isNaN(t[1])}function Qe(t){return t&&!jt(t[0])&&!jt(t[1])}const yn=gn;var bn=function(){function t(){}return t.prototype._hasEncodeRule=function(e){var a=this.getEncode();return a&&a.get(e)!=null},t.prototype.getInitialData=function(e,a){var r,n=a.getComponent("xAxis",this.get("xAxisIndex")),i=a.getComponent("yAxis",this.get("yAxisIndex")),s=n.get("type"),o=i.get("type"),l;s==="category"?(e.layout="horizontal",r=n.getOrdinalMeta(),l=!this._hasEncodeRule("x")):o==="category"?(e.layout="vertical",r=i.getOrdinalMeta(),l=!this._hasEncodeRule("y")):e.layout=e.layout||"horizontal";var c=["x","y"],u=e.layout==="horizontal"?0:1,d=this._baseAxisDim=c[u],h=c[1-u],m=[n,i],g=m[u].get("type"),C=m[1-u].get("type"),_=e.data;if(_&&l){var k=[];re(_,function(p,b){var w;j(p)?(w=p.slice(),p.unshift(b)):j(p.value)?(w=le({},p),w.value=w.value.slice(),p.value.unshift(b)):w=p,k.push(w)}),e.data=k}var S=this.defaultValueDimensions,L=[{name:d,type:It(g),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:It(C),dimsDef:S.slice()}];return fr(this,{coordDimensions:L,dimensionsCount:S.length+1,encodeDefaulter:se(gr,L,this)})},t.prototype.getBaseAxis=function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis},t}(),Sn=["itemStyle","borderColor"],An=["itemStyle","borderColor0"],_n=["itemStyle","borderColorDoji"],kn=["itemStyle","color"],Cn=["itemStyle","color0"];function lt(t,e){return e.get(t>0?kn:Cn)}function ut(t,e){return e.get(t===0?_n:t>0?Sn:An)}var Ln={seriesType:"candlestick",plan:fa(),performRawSeries:!0,reset:function(t,e){if(!e.isSeriesFiltered(t)){var a=t.pipelineContext.large;return!a&&{progress:function(r,n){for(var i;(i=r.next())!=null;){var s=n.getItemModel(i),o=n.getItemLayout(i).sign,l=s.getItemStyle();l.fill=lt(o,s),l.stroke=ut(o,s)||l.fill;var c=n.ensureUniqueItemVisual(i,"style");le(c,l)}}}}}};const Dn=Ln;var wn=["color","borderColor"],In=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.render=function(a,r,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(a),this._isLargeDraw?this._renderLarge(a):this._renderNormal(a)},e.prototype.incrementalPrepareRender=function(a,r,n){this._clear(),this._updateDrawMode(a)},e.prototype.incrementalRender=function(a,r,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(a,r):this._incrementalRenderNormal(a,r)},e.prototype.eachRendered=function(a){at(this._progressiveEls||this.group,a)},e.prototype._updateDrawMode=function(a){var r=a.pipelineContext.large;(this._isLargeDraw==null||r!==this._isLargeDraw)&&(this._isLargeDraw=r,this._clear())},e.prototype._renderNormal=function(a){var r=a.getData(),n=this._data,i=this.group,s=r.getLayout("isSimpleBox"),o=a.get("clip",!0),l=a.coordinateSystem,c=l.getArea&&l.getArea();this._data||i.removeAll(),r.diff(n).add(function(u){if(r.hasValue(u)){var d=r.getItemLayout(u);if(o&&Kt(c,d))return;var h=qe(d,u,!0);fe(h,{shape:{points:d.ends}},a,u),He(h,r,u,s),i.add(h),r.setItemGraphicEl(u,h)}}).update(function(u,d){var h=n.getItemGraphicEl(d);if(!r.hasValue(u)){i.remove(h);return}var m=r.getItemLayout(u);if(o&&Kt(c,m)){i.remove(h);return}h?(ue(h,{shape:{points:m.ends}},a,u),ia(h)):h=qe(m),He(h,r,u,s),i.add(h),r.setItemGraphicEl(u,h)}).remove(function(u){var d=n.getItemGraphicEl(u);d&&i.remove(d)}).execute(),this._data=r},e.prototype._renderLarge=function(a){this._clear(),Xt(a,this.group);var r=a.get("clip",!0)?oa(a.coordinateSystem,!1,a):null;r?this.group.setClipPath(r):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(a,r){for(var n=r.getData(),i=n.getLayout("isSimpleBox"),s;(s=a.next())!=null;){var o=n.getItemLayout(s),l=qe(o);He(l,n,s,i),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},e.prototype._incrementalRenderLarge=function(a,r){Xt(r,this.group,this._progressiveEls,!0)},e.prototype.remove=function(a){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(ca),Pn=function(){function t(){}return t}(),Tn=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="normalCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new Pn},e.prototype.buildPath=function(a,r){var n=r.points;this.__simpleBox?(a.moveTo(n[4][0],n[4][1]),a.lineTo(n[6][0],n[6][1])):(a.moveTo(n[0][0],n[0][1]),a.lineTo(n[1][0],n[1][1]),a.lineTo(n[2][0],n[2][1]),a.lineTo(n[3][0],n[3][1]),a.closePath(),a.moveTo(n[4][0],n[4][1]),a.lineTo(n[5][0],n[5][1]),a.moveTo(n[6][0],n[6][1]),a.lineTo(n[7][0],n[7][1]))},e}(ke);function qe(t,e,a){var r=t.ends;return new Tn({shape:{points:a?xn(r,t):r},z2:100})}function Kt(t,e){for(var a=!0,r=0;r<e.ends.length;r++)if(t.contain(e.ends[r][0],e.ends[r][1])){a=!1;break}return a}function He(t,e,a,r){var n=e.getItemModel(a);t.useStyle(e.getItemVisual(a,"style")),t.style.strokeNoScale=!0,t.__simpleBox=r,ua(t,n);var i=e.getItemLayout(a).sign;re(t.states,function(o,l){var c=n.getModel(l),u=lt(i,c),d=ut(i,c)||u,h=o.style||(o.style={});u&&(h.fill=u),d&&(h.stroke=d)});var s=n.getModel("emphasis");it(t,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function xn(t,e){return oe(t,function(a){return a=a.slice(),a[1]=e.initBaseline,a})}var Mn=function(){function t(){}return t}(),Ye=function(t){H(e,t);function e(a){var r=t.call(this,a)||this;return r.type="largeCandlestickBox",r}return e.prototype.getDefaultShape=function(){return new Mn},e.prototype.buildPath=function(a,r){for(var n=r.points,i=0;i<n.length;)if(this.__sign===n[i++]){var s=n[i++];a.moveTo(s,n[i++]),a.lineTo(s,n[i++])}else i+=3},e}(ke);function Xt(t,e,a,r){var n=t.getData(),i=n.getLayout("largePoints"),s=new Ye({shape:{points:i},__sign:1,ignoreCoarsePointer:!0});e.add(s);var o=new Ye({shape:{points:i},__sign:-1,ignoreCoarsePointer:!0});e.add(o);var l=new Ye({shape:{points:i},__sign:0,ignoreCoarsePointer:!0});e.add(l),je(1,s,t),je(-1,o,t),je(0,l,t),r&&(s.incremental=!0,o.incremental=!0),a&&a.push(s,o)}function je(t,e,a,r){var n=ut(t,a)||lt(t,a),i=a.getModel("itemStyle").getItemStyle(wn);e.useStyle(i),e.style.fill=null,e.style.stroke=n}const Nn=In;var _a=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],a}return e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(a,r,n){var i=r.getItemLayout(a);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(tt);ga(_a,bn,!0);const En=_a;function On(t){!t||!j(t.series)||re(t.series,function(e){mr(e)&&e.type==="k"&&(e.type="candlestick")})}var Vn={seriesType:"candlestick",plan:fa(),reset:function(t){var e=t.coordinateSystem,a=t.getData(),r=Bn(t,a),n=0,i=1,s=["x","y"],o=a.getDimensionIndex(a.mapDimension(s[n])),l=oe(a.mapDimensionsAll(s[i]),a.getDimensionIndex,a),c=l[0],u=l[1],d=l[2],h=l[3];if(a.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),o<0||l.length<4)return;return{progress:t.pipelineContext.large?g:m};function m(C,_){for(var k,S=_.getStore();(k=C.next())!=null;){var L=S.get(o,k),p=S.get(c,k),b=S.get(u,k),w=S.get(d,k),D=S.get(h,k),M=Math.min(p,b),B=Math.max(p,b),G=X(M,L),I=X(B,L),R=X(w,L),O=X(D,L),W=[];z(W,I,0),z(W,G,1),W.push(Q(O),Q(I),Q(R),Q(G));var $=_.getItemModel(k),te=!!$.get(["itemStyle","borderColorDoji"]);_.setItemLayout(k,{sign:Zt(S,k,p,b,u,te),initBaseline:p>b?I[i]:G[i],ends:W,brushRect:Z(w,D,L)})}function X(v,f){var y=[];return y[n]=f,y[i]=v,isNaN(f)||isNaN(v)?[NaN,NaN]:e.dataToPoint(y)}function z(v,f,y){var A=f.slice(),P=f.slice();A[n]=Ve(A[n]+r/2,1,!1),P[n]=Ve(P[n]-r/2,1,!0),y?v.push(A,P):v.push(P,A)}function Z(v,f,y){var A=X(v,y),P=X(f,y);return A[n]-=r/2,P[n]-=r/2,{x:A[0],y:A[1],width:r,height:P[1]-A[1]}}function Q(v){return v[n]=Ve(v[n],1),v}}function g(C,_){for(var k=yr(C.count*4),S=0,L,p=[],b=[],w,D=_.getStore(),M=!!t.get(["itemStyle","borderColorDoji"]);(w=C.next())!=null;){var B=D.get(o,w),G=D.get(c,w),I=D.get(u,w),R=D.get(d,w),O=D.get(h,w);if(isNaN(B)||isNaN(R)||isNaN(O)){k[S++]=NaN,S+=3;continue}k[S++]=Zt(D,w,G,I,u,M),p[n]=B,p[i]=R,L=e.dataToPoint(p,null,b),k[S++]=L?L[0]:NaN,k[S++]=L?L[1]:NaN,p[i]=O,L=e.dataToPoint(p,null,b),k[S++]=L?L[1]:NaN}_.setLayout("largePoints",k)}}};function Zt(t,e,a,r,n,i){var s;return a>r?s=-1:a<r?s=1:s=i?0:e>0?t.get(n,e-1)<=r?1:-1:1,s}function Bn(t,e){var a=t.getBaseAxis(),r,n=a.type==="category"?a.getBandWidth():(r=a.getExtent(),Math.abs(r[1]-r[0])/e.count()),i=Se(pe(t.get("barMaxWidth"),n),n),s=Se(pe(t.get("barMinWidth"),1),n),o=t.get("barWidth");return o!=null?Se(o,n):Math.max(Math.min(n/2,i),s)}const Rn=Vn;function $n(t){t.registerChartView(Nn),t.registerSeriesModel(En),t.registerPreprocessor(On),t.registerVisual(Dn),t.registerLayout(Rn)}function Fn(t,e){if(!t)return!1;for(var a=j(t)?t:[t],r=0;r<a.length;r++)if(a[r]&&a[r][e])return!0;return!1}function Te(t){Ar(t,"label",["show"])}var xe=st(),_e=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a.createdBySelf=!1,a}return e.prototype.init=function(a,r,n){this.mergeDefaultAndTheme(a,n),this._mergeOption(a,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(br.node)return!1;var a=this.__hostSeries;return this.getShallow("animation")&&a&&a.isAnimationEnabled()},e.prototype.mergeOption=function(a,r){this._mergeOption(a,r,!1,!1)},e.prototype._mergeOption=function(a,r,n,i){var s=this.mainType;n||r.eachSeries(function(o){var l=o.get(this.mainType,!0),c=xe(o)[s];if(!l||!l.data){xe(o)[s]=null;return}c?c._mergeOption(l,r,!0):(i&&Te(l),re(l.data,function(u){u instanceof Array?(Te(u[0]),Te(u[1])):Te(u)}),c=this.createMarkerModelFromSeries(l,this,r),le(c,{mainType:this.mainType,seriesIndex:o.seriesIndex,name:o.name,createdBySelf:!0}),c.__hostSeries=o),xe(o)[s]=c},this)},e.prototype.formatTooltip=function(a,r,n){var i=this.getData(),s=this.getRawValue(a),o=i.getName(a);return Pt("section",{header:this.name,blocks:[Pt("nameValue",{name:o,value:s,noName:!o,noValue:s==null})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(a){this._data=a},e.prototype.getDataParams=function(a,r){var n=ma.prototype.getDataParams.call(this,a,r),i=this.__hostSeries;return i&&(n.seriesId=i.id,n.seriesName=i.name,n.seriesType=i.subType),n},e.getMarkerModelFromSeries=function(a,r){return xe(a)[r]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Sr);ga(_e,ma.prototype);function zn(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function Gn(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function Me(t,e,a,r,n,i){var s=[],o=_r(e,r),l=o?e.getCalculationInfo("stackResultDimension"):r,c=ct(e,l,t),u=e.indicesOfNearest(l,c)[0];s[n]=e.get(a,u),s[i]=e.get(l,u);var d=e.get(r,u),h=kr(e.get(r,u));return h=Math.min(h,20),h>=0&&(s[i]=+s[i].toFixed(h)),[s,d]}var Ke={min:se(Me,"min"),max:se(Me,"max"),average:se(Me,"average"),median:se(Me,"median")};function Jt(t,e){if(e){var a=t.getData(),r=t.coordinateSystem,n=r&&r.dimensions;if(!Gn(e)&&!j(e.coord)&&j(n)){var i=ka(e,a,r,t);if(e=ya(e),e.type&&Ke[e.type]&&i.baseAxis&&i.valueAxis){var s=Tt(n,i.baseAxis.dim),o=Tt(n,i.valueAxis.dim),l=Ke[e.type](a,i.baseDataDim,i.valueDataDim,s,o);e.coord=l[0],e.value=l[1]}else e.coord=[e.xAxis!=null?e.xAxis:e.radiusAxis,e.yAxis!=null?e.yAxis:e.angleAxis]}if(e.coord==null||!j(n))e.coord=[];else for(var c=e.coord,u=0;u<2;u++)Ke[c[u]]&&(c[u]=ct(a,a.mapDimension(n[u]),c[u]));return e}}function ka(t,e,a,r){var n={};return t.valueIndex!=null||t.valueDim!=null?(n.valueDataDim=t.valueIndex!=null?e.getDimension(t.valueIndex):t.valueDim,n.valueAxis=a.getAxis(Wn(r,n.valueDataDim)),n.baseAxis=a.getOtherAxis(n.valueAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim)):(n.baseAxis=r.getBaseAxis(),n.valueAxis=a.getOtherAxis(n.baseAxis),n.baseDataDim=e.mapDimension(n.baseAxis.dim),n.valueDataDim=e.mapDimension(n.valueAxis.dim)),n}function Wn(t,e){var a=t.getData().getDimensionInfo(e);return a&&a.coordDim}function ea(t,e){return t&&t.containData&&e.coord&&!zn(e)?t.containData(e.coord):!0}function Un(t,e){return t?function(a,r,n,i){var s=i<2?a.coord&&a.coord[i]:a.value;return xt(s,e[i])}:function(a,r,n,i){return xt(a.value,e[i])}}function ct(t,e,a){if(a==="average"){var r=0,n=0;return t.each(e,function(i,s){isNaN(i)||(r+=i,n++)}),r/n}else return a==="median"?t.getMedian(e):t.getDataExtent(e)[a==="max"?1:0]}var Xe=st(),Qn=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.init=function(){this.markerGroupMap=Cr()},e.prototype.render=function(a,r,n){var i=this,s=this.markerGroupMap;s.each(function(o){Xe(o).keep=!1}),r.eachSeries(function(o){var l=_e.getMarkerModelFromSeries(o,i.type);l&&i.renderSeries(o,l,r,n)}),s.each(function(o){!Xe(o).keep&&i.group.remove(o.group)})},e.prototype.markKeep=function(a){Xe(a).keep=!0},e.prototype.toggleBlurSeries=function(a,r){var n=this;re(a,function(i){var s=_e.getMarkerModelFromSeries(i,n.type);if(s){var o=s.getData();o.eachItemGraphicEl(function(l){l&&(r?Lr(l):Dr(l))})}})},e.type="marker",e}(wr);const qn=Qn;var Hn=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.createMarkerModelFromSeries=function(a,r,n){return new e(a,r,n)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(_e);const Yn=Hn;var Ne=st(),jn=function(t,e,a,r){var n=t.getData(),i;if(j(r))i=r;else{var s=r.type;if(s==="min"||s==="max"||s==="average"||s==="median"||r.xAxis!=null||r.yAxis!=null){var o=void 0,l=void 0;if(r.yAxis!=null||r.xAxis!=null)o=e.getAxis(r.yAxis!=null?"y":"x"),l=Tr(r.yAxis,r.xAxis);else{var c=ka(r,n,e,t);o=c.valueAxis;var u=xr(n,c.valueDataDim);l=ct(n,u,s)}var d=o.dim==="x"?0:1,h=1-d,m=ya(r),g={coord:[]};m.type=null,m.coord=[],m.coord[h]=-1/0,g.coord[h]=1/0;var C=a.get("precision");C>=0&&na(l)&&(l=+l.toFixed(Math.min(C,20))),m.coord[d]=g.coord[d]=l,i=[m,g,{type:s,valueIndex:r.valueIndex,value:l}]}else i=[]}var _=[Jt(t,i[0]),Jt(t,i[1]),le({},i[2])];return _[2].type=_[2].type||null,Mt(_[2],_[0]),Mt(_[2],_[1]),_};function Ee(t){return!isNaN(t)&&!isFinite(t)}function ta(t,e,a,r){var n=1-t,i=r.dimensions[t];return Ee(e[n])&&Ee(a[n])&&e[t]===a[t]&&r.getAxis(i).containData(e[t])}function Kn(t,e){if(t.type==="cartesian2d"){var a=e[0].coord,r=e[1].coord;if(a&&r&&(ta(1,a,r,t)||ta(0,a,r,t)))return!0}return ea(t,e[0])&&ea(t,e[1])}function Ze(t,e,a,r,n){var i=r.coordinateSystem,s=t.getItemModel(e),o,l=Se(s.get("x"),n.getWidth()),c=Se(s.get("y"),n.getHeight());if(!isNaN(l)&&!isNaN(c))o=[l,c];else{if(r.getMarkerPosition)o=r.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=i.dimensions,d=t.get(u[0],e),h=t.get(u[1],e);o=i.dataToPoint([d,h])}if(ot(i,"cartesian2d")){var m=i.getAxis("x"),g=i.getAxis("y"),u=i.dimensions;Ee(t.get(u[0],e))?o[0]=m.toGlobalCoord(m.getExtent()[a?0:1]):Ee(t.get(u[1],e))&&(o[1]=g.toGlobalCoord(g.getExtent()[a?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}t.setItemLayout(e,o)}var Xn=function(t){H(e,t);function e(){var a=t!==null&&t.apply(this,arguments)||this;return a.type=e.type,a}return e.prototype.updateTransform=function(a,r,n){r.eachSeries(function(i){var s=_e.getMarkerModelFromSeries(i,"markLine");if(s){var o=s.getData(),l=Ne(s).from,c=Ne(s).to;l.each(function(u){Ze(l,u,!0,i,n),Ze(c,u,!1,i,n)}),o.each(function(u){o.setItemLayout(u,[l.getItemLayout(u),c.getItemLayout(u)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},e.prototype.renderSeries=function(a,r,n,i){var s=a.coordinateSystem,o=a.id,l=a.getData(),c=this.markerGroupMap,u=c.get(o)||c.set(o,new yn);this.group.add(u.group);var d=Zn(s,a,r),h=d.from,m=d.to,g=d.line;Ne(r).from=h,Ne(r).to=m,r.setData(g);var C=r.get("symbol"),_=r.get("symbolSize"),k=r.get("symbolRotate"),S=r.get("symbolOffset");j(C)||(C=[C,C]),j(_)||(_=[_,_]),j(k)||(k=[k,k]),j(S)||(S=[S,S]),d.from.each(function(p){L(h,p,!0),L(m,p,!1)}),g.each(function(p){var b=g.getItemModel(p).getModel("lineStyle").getLineStyle();g.setItemLayout(p,[h.getItemLayout(p),m.getItemLayout(p)]),b.stroke==null&&(b.stroke=h.getItemVisual(p,"style").fill),g.setItemVisual(p,{fromSymbolKeepAspect:h.getItemVisual(p,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(p,"symbolOffset"),fromSymbolRotate:h.getItemVisual(p,"symbolRotate"),fromSymbolSize:h.getItemVisual(p,"symbolSize"),fromSymbol:h.getItemVisual(p,"symbol"),toSymbolKeepAspect:m.getItemVisual(p,"symbolKeepAspect"),toSymbolOffset:m.getItemVisual(p,"symbolOffset"),toSymbolRotate:m.getItemVisual(p,"symbolRotate"),toSymbolSize:m.getItemVisual(p,"symbolSize"),toSymbol:m.getItemVisual(p,"symbol"),style:b})}),u.updateData(g),d.line.eachItemGraphicEl(function(p){Ae(p).dataModel=r,p.traverse(function(b){Ae(b).dataModel=r})});function L(p,b,w){var D=p.getItemModel(b);Ze(p,b,w,a,i);var M=D.getModel("itemStyle").getItemStyle();M.fill==null&&(M.fill=Ir(l,"color")),p.setItemVisual(b,{symbolKeepAspect:D.get("symbolKeepAspect"),symbolOffset:pe(D.get("symbolOffset",!0),S[w?0:1]),symbolRotate:pe(D.get("symbolRotate",!0),k[w?0:1]),symbolSize:pe(D.get("symbolSize"),_[w?0:1]),symbol:pe(D.get("symbol",!0),C[w?0:1]),style:M})}this.markKeep(u),u.group.silent=r.get("silent")||a.get("silent")},e.type="markLine",e}(qn);function Zn(t,e,a){var r;t?r=oe(t&&t.dimensions,function(c){var u=e.getData().getDimensionInfo(e.getData().mapDimension(c))||{};return le(le({},u),{name:c,ordinalMeta:null})}):r=[{name:"value",type:"float"}];var n=new Be(r,a),i=new Be(r,a),s=new Be([],a),o=oe(a.get("data"),se(jn,e,t,a));t&&(o=Pr(o,se(Kn,t)));var l=Un(!!t,r);return n.initData(oe(o,function(c){return c[0]}),null,l),i.initData(oe(o,function(c){return c[1]}),null,l),s.initData(oe(o,function(c){return c[2]})),s.hasItemOption=!0,{from:n,to:i,line:s}}const Jn=Xn;function ei(t){t.registerComponentModel(Yn),t.registerComponentView(Jn),t.registerPreprocessor(function(e){Fn(e.series,"markLine")&&(e.markLine=e.markLine||{})})}const ti=aa({name:"QToggle",props:{...ja,icon:String,iconColor:String},emits:Ka,setup(t){function e(a,r){const n=ve(()=>(a.value===!0?t.checkedIcon:r.value===!0?t.indeterminateIcon:t.uncheckedIcon)||t.icon),i=ve(()=>a.value===!0?t.iconColor:null);return()=>[ye("div",{class:"q-toggle__track"}),ye("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},n.value!==void 0?[ye(me,{name:n.value,color:i.value})]:void 0)]}return Xa("toggle",e)}}),ai=aa({name:"QTooltip",inheritAttrs:!1,props:{...Ga,...La,...Wr,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:At},self:{type:String,default:"top middle",validator:At},offset:{type:Array,default:()=>[14,14],validator:Wa},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:Boolean},emits:[...Da],setup(t,{slots:e,emit:a,attrs:r}){let n,i;const s=wa(),{proxy:{$q:o}}=s,l=U(null),c=U(!1),u=ve(()=>_t(t.anchor,o.lang.rtl)),d=ve(()=>_t(t.self,o.lang.rtl)),h=ve(()=>t.persistent!==!0),{registerTick:m,removeTick:g}=Ia(),{registerTimeout:C}=Pa(),{transitionProps:_,transitionStyle:k}=Ur(t),{localScrollTarget:S,changeScrollEvent:L,unconfigureScrollTarget:p}=Ua(t,Q),{anchorEl:b,canShow:w,anchorEvents:D}=Qa({showing:c,configureAnchorEl:Z}),{show:M,hide:B}=Ta({showing:c,canShow:w,handleShow:O,handleHide:W,hideOnRouteChange:h,processOnMount:!0});Object.assign(D,{delayShow:X,delayHide:z});const{showPortal:G,hidePortal:I,renderPortal:R}=Qr(s,l,f,"tooltip");if(o.platform.is.mobile===!0){const y={anchorEl:b,innerRef:l,onClickOutside(P){return B(P),P.target.classList.contains("q-dialog__backdrop")&&Ea(P),!0}},A=ve(()=>t.modelValue===null&&t.persistent!==!0&&c.value===!0);be(A,P=>{(P===!0?Ha:kt)(y)}),ht(()=>{kt(y)})}function O(y){G(),m(()=>{i=new MutationObserver(()=>te()),i.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),te(),Q()}),n===void 0&&(n=be(()=>o.screen.width+"|"+o.screen.height+"|"+t.self+"|"+t.anchor+"|"+o.lang.rtl,te)),C(()=>{G(!0),a("show",y)},t.transitionDuration)}function W(y){g(),I(),$(),C(()=>{I(!0),a("hide",y)},t.transitionDuration)}function $(){i!==void 0&&(i.disconnect(),i=void 0),n!==void 0&&(n(),n=void 0),p(),vt(D,"tooltipTemp")}function te(){qa({targetEl:l.value,offset:t.offset,anchorEl:b.value,anchorOrigin:u.value,selfOrigin:d.value,maxHeight:t.maxHeight,maxWidth:t.maxWidth})}function X(y){if(o.platform.is.mobile===!0){pt(),document.body.classList.add("non-selectable");const A=b.value,P=["touchmove","touchcancel","touchend","click"].map(x=>[A,x,"delayHide","passiveCapture"]);ft(D,"tooltipTemp",P)}C(()=>{M(y)},t.delay)}function z(y){o.platform.is.mobile===!0&&(vt(D,"tooltipTemp"),pt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),C(()=>{B(y)},t.hideDelay)}function Z(){if(t.noParentEvent===!0||b.value===null)return;const y=o.platform.is.mobile===!0?[[b.value,"touchstart","delayShow","passive"]]:[[b.value,"mouseenter","delayShow","passive"],[b.value,"mouseleave","delayHide","passive"]];ft(D,"anchor",y)}function Q(){if(b.value!==null||t.scrollTarget!==void 0){S.value=xa(b.value,t.scrollTarget);const y=t.noParentEvent===!0?te:B;L(S.value,y)}}function v(){return c.value===!0?ye("div",{...r,ref:l,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",r.class],style:[r.style,k.value],role:"tooltip"},Na(e.default)):null}function f(){return ye(Ma,_.value,v)}return ht($),Object.assign(s.proxy,{updatePosition:te}),R}});Mr([Nr,$n,Er,dn,Or,Vr,Br,Rr,ei]);const ri=Va({components:{VChart:$r},setup(){const t=Gr(),e=U({}),a=U(!1),r=U([]),n=U([]),i=U(null),s=U({}),o=U({}),l=U({}),c=U([{label:"Candlestick",value:"candlestick"},{label:"Line",value:"line"}]),u=U("candlestick"),d=U(!1),h=U([{label:"EMA 20",value:"ema20"},{label:"SMA 50",value:"sma50"},{label:"EMA 50",value:"ema50"}]),m=U([]),g=U([]),C=U(""),_=U([]),k=U(!1),S=15,L=()=>{t.dark.set(!t.dark.isActive)},p=v=>{switch(v){case"ema20":return"#ff9900";case"sma50":return"#9966ff";case"ema50":return"#ff66cc";default:return"#667eea"}};function b(v,f){const y=new Date(v),A=y.getHours()*60+y.getMinutes(),x=Math.floor(A/f)*f;return y.setHours(Math.floor(x/60)),y.setMinutes(x%60),y.setSeconds(0),y.setMilliseconds(0),y.getTime()}function w(v,f,y){const A={id:Date.now(),coin:v,targetPrice:f,currentPrice:y,type:"success",timestamp:new Date};_.value.unshift(A),setTimeout(()=>{D(A.id)},5e3)}function D(v){_.value=_.value.filter(f=>f.id!==v)}function M(v,f){if(!v||v.length<f)return[];const y=[],A=2/(f+1);let P=v[0][1];y.push([v[0][0],P]);for(let x=1;x<v.length;x++)P=(v[x][1]-P)*A+P,y.push([v[x][0],P]);return y}function B(v,f){if(!v||v.length<f)return[];const y=[];for(let A=f-1;A<v.length;A++){let P=0;for(let N=0;N<f;N++)P+=v[A-N][1];const x=P/f;y.push([v[A][0],x])}return y}function G(v,f=15){if(!v||v.length===0)return[];const y=[];let A=[],P=null;if([...v].sort((N,q)=>N[0]-q[0]).forEach((N,q)=>{const F=N[0],E=N[1];if(P||(P=b(F,f)),F<P+f*6e4)A.push([F,E]);else{if(A.length>0){const ae=A[0][1],ce=A[A.length-1][1],de=Math.max(...A.map(he=>he[1])),Ce=Math.min(...A.map(he=>he[1]));y.push([P,ae,ce,Ce,de])}A=[[F,E]],P=b(F,f)}}),A.length>0){const N=A[0][1],q=A[A.length-1][1],F=Math.max(...A.map(ae=>ae[1])),E=Math.min(...A.map(ae=>ae[1]));y.push([P,N,q,E,F])}return y}function I(v,f=15){if(!v||v.length===0)return[];const y=[];let A=[],P=null;if([...v].sort((N,q)=>N[0]-q[0]).forEach((N,q)=>{const F=N[0],E=N[1];if(P||(P=b(F,f)),F<P+f*6e4)A.push([F,E]);else{if(A.length>0){const ae=A.reduce((ce,de)=>ce+de[1],0);y.push([P,ae])}A=[[F,E]],P=b(F,f)}}),A.length>0){const N=A.reduce((q,F)=>q+F[1],0);y.push([P,N])}return y}function R(v){return!v||v.length===0?[]:v.map(f=>[f[0],f[1]])}function O(){if(!C.value||!i.value)return;const v={id:Date.now(),coin:i.value,price:parseFloat(C.value),active:!0,createdAt:new Date,triggered:!1};g.value.push(v),C.value="",k.value=!1,Q(),t.notify({type:"positive",message:`Price alert set for ${v.coin.toUpperCase()} at ${v.price}`})}function W(v){const f=g.value.find(y=>y.id===v);g.value=g.value.filter(y=>y.id!==v),Q(),f&&t.notify({type:"info",message:`Alert removed for ${f.coin.toUpperCase()}`})}function $(){if(!s.value||!i.value)return;const v=i.value;s.value[v]&&g.value.forEach(f=>{if(f.active&&f.coin===v){const y=s.value[v];if(y.length===0)return;const A=y[y.length-1][2],P=Math.abs(A-f.price),x=f.price*.005;P<=x&&!f.triggered&&(f.triggered=!0,w(f.coin,f.price,A),t.notify({type:"warning",message:` ${f.coin.toUpperCase()} reached ${A.toFixed(2)} (Target: ${f.price})`,timeout:0,actions:[{label:"Dismiss",color:"white"}]})),P>x&&f.triggered&&(f.triggered=!1)}})}async function te(){var v;try{const{data:f}=await $e.get("https://api.coingecko.com/api/v3/coins/markets",{params:{vs_currency:"eur",order:"market_cap_desc",per_page:10,page:1}});r.value=f.map(y=>({label:`${y.name} (${y.symbol.toUpperCase()})`,value:y.id})),i.value=((v=r.value[0])==null?void 0:v.value)||null}catch(f){console.error("Fehler beim Laden der Top-Coins:",f),r.value=[{label:"Bitcoin (BTC)",value:"bitcoin"},{label:"Ethereum (ETH)",value:"ethereum"},{label:"Solana (SOL)",value:"solana"},{label:"Ripple (XRP)",value:"ripple"},{label:"Cardano (ADA)",value:"cardano"}],i.value=r.value[0].value,t.notify({type:"warning",message:"Top coin list unavailable, using fallback list"})}}async function X(){try{const{data:v}=await $e.get("https://api.coingecko.com/api/v3/coins/list");n.value=v.map(f=>({label:`${f.name} (${f.symbol.toUpperCase()})`,value:f.id}))}catch(v){console.error("Fehler beim Laden der Coin-Liste:",v)}}function z(v,f){const y=(v||"").trim().toLowerCase();f(()=>y?n.value.filter(A=>A.label.toLowerCase().includes(y)):r.value)}async function Z(){var v;if(i.value){a.value=!0;try{const f=await $e.get(`http://localhost:3000/api/crypto/${i.value}`);s.value={},o.value={},l.value={};const y=i.value,A=(v=f==null?void 0:f.data)==null?void 0:v.prices;if(!Array.isArray(A)||A.length===0)throw new Error("No price data returned");l.value[y]=A;const P=f.data.total_volumes||[];u.value==="candlestick"?(s.value[y]=G(A,S),o.value[y]=I(P,S)):(s.value[y]=R(A),o.value[y]=I(P,S)),$(),Q()}catch(f){console.error("Fehler beim Laden der Kurse vom Server:",f),t.notify({type:"negative",message:"Failed to load cryptocurrency data"})}finally{a.value=!1}}}function Q(){if(!s.value||!i.value||!s.value[i.value]){e.value={title:{text:"No data available",left:"center",top:"center"}};return}const v=i.value,f=[],y="#667eea",A=[];if(g.value.filter(x=>x.coin===v&&x.active).forEach(x=>{A.push({yAxis:x.price,name:`Alert: ${x.price}`,lineStyle:{color:x.triggered?"#10b981":"#ef4444",type:"dashed",width:2},label:{formatter:`Alert: ${x.price}`,position:"end"}})}),u.value==="candlestick"?f.push({name:v.toUpperCase(),type:"candlestick",data:s.value[v],itemStyle:{color:"#10b981",color0:"#ef4444",borderColor:"#10b981",borderColor0:"#ef4444",borderWidth:1},markLine:A.length>0?{data:A,symbol:"none"}:void 0}):f.push({name:v.toUpperCase(),type:"line",data:s.value[v],symbol:"none",lineStyle:{color:y,width:3},itemStyle:{color:y},markLine:A.length>0?{data:A,symbol:"none"}:void 0}),m.value.length>0&&l.value[v]){const x=l.value[v];m.value.forEach(N=>{let q=[],F=p(N);switch(N){case"ema20":q=M(x,20);break;case"sma50":q=B(x,50);break;case"ema50":q=M(x,50);break}q.length>0&&f.push({name:`${v.toUpperCase()} ${N.toUpperCase()}`,type:"line",data:q,symbol:"none",lineStyle:{color:F,width:2,type:"dashed"},itemStyle:{color:F}})})}d.value&&o.value[v]&&f.push({name:`${v.toUpperCase()} Volume`,type:"bar",data:o.value[v],xAxisIndex:1,yAxisIndex:1,itemStyle:{color:"#667eea",opacity:.6}});const P=d.value?[{left:"3%",right:"3%",bottom:"40%",top:"15%",containLabel:!0},{left:"3%",right:"3%",height:"20%",bottom:"5%",top:"75%",containLabel:!0}]:[{left:"3%",right:"3%",bottom:"15%",top:"15%",containLabel:!0}];e.value={animation:!1,tooltip:{trigger:"axis",axisPointer:{type:"cross",lineStyle:{color:"#7581BD",width:1}},formatter:x=>{const N=new Date(x[0].value[0]);let F=`<div style="font-weight: bold; margin-bottom: 5px;">${`${N.getDate().toString().padStart(2,"0")}.${(N.getMonth()+1).toString().padStart(2,"0")}.${N.getFullYear()} ${N.getHours().toString().padStart(2,"0")}:${N.getMinutes().toString().padStart(2,"0")}`}</div>`;return x.forEach(E=>{var ae,ce,de,Ce,he,dt;if(E.seriesName.includes("Volume"))F+=`<div style="margin: 2px 0;">
                  <strong>${E.seriesName}</strong><br>
                  Volume: <strong>${(E.value[1]/1e6).toFixed(2)} Mio. </strong>
                </div>`;else if(u.value==="candlestick"&&E.value&&E.value.length>=5&&!E.seriesName.includes("EMA")&&!E.seriesName.includes("SMA")){const Le=E.value[2]>=E.value[1],Ca=Le?"":"";F+=`<div style="color: ${Le?"#10b981":"#ef4444"}; margin: 2px 0;">
                  <strong>${E.seriesName}</strong> ${Ca}<br>
                  O: <strong>${((ae=E.value[1])==null?void 0:ae.toFixed(2))||"0.00"}</strong> |
                  H: <strong>${((ce=E.value[4])==null?void 0:ce.toFixed(2))||"0.00"}</strong><br>
                  C: <strong>${((de=E.value[2])==null?void 0:de.toFixed(2))||"0.00"}</strong> |
                  L: <strong>${((Ce=E.value[3])==null?void 0:Ce.toFixed(2))||"0.00"}</strong>
                </div>`}else if(E.value&&E.value.length>=2&&!E.seriesName.includes("Volume")){const Le=E.seriesName.includes("EMA")||E.seriesName.includes("SMA")?`${((he=E.value[1])==null?void 0:he.toFixed(2))||"0.00"}`:`${((dt=E.value[1])==null?void 0:dt.toFixed(2))||"0.00"}`;F+=`<div style="margin: 2px 0;">
                  <strong>${E.seriesName}</strong><br>
                  ${E.seriesName.includes("EMA")||E.seriesName.includes("SMA")?"Value":"Price"}: <strong>${Le}</strong>
                </div>`}}),F}},legend:{top:10,right:10,type:"scroll",textStyle:{color:"#1f2937"}},grid:P,xAxis:d.value?[{type:"time",gridIndex:0,axisLine:{onZero:!1},splitLine:{show:!0},minInterval:9e5,axisLabel:{formatter:x=>{const N=new Date(x);return`${N.getHours().toString().padStart(2,"0")}:${N.getMinutes().toString().padStart(2,"0")}`},color:"#6b7280"}},{type:"time",gridIndex:1,minInterval:9e5,axisLabel:{show:!1}}]:{type:"time",axisLine:{onZero:!1},splitLine:{show:!0},minInterval:9e5,axisLabel:{formatter:x=>{const N=new Date(x);return`${N.getHours().toString().padStart(2,"0")}:${N.getMinutes().toString().padStart(2,"0")}`},color:"#6b7280"}},yAxis:d.value?[{type:"value",name:"EUR",scale:!0,gridIndex:0,splitLine:{show:!0},axisLabel:{formatter:x=>`${x.toLocaleString()}`,color:"#6b7280"},nameTextStyle:{color:"#6b7280"}},{type:"value",name:"Volume (Mio. )",gridIndex:1,axisLabel:{formatter:x=>`${(x/1e6).toFixed(1)}M`,color:"#6b7280"},nameTextStyle:{color:"#6b7280"}}]:{type:"value",name:"EUR",scale:!0,splitLine:{show:!0},axisLabel:{formatter:x=>`${x.toLocaleString()}`,color:"#6b7280"},nameTextStyle:{color:"#6b7280"}},dataZoom:[{type:"slider",start:0,end:100,bottom:d.value?"30%":"20%",height:20},{type:"inside"}],series:f}}return be(i,(v,f)=>{v!==f&&Z()}),be([u,d,m],()=>{i.value&&Q()},{deep:!0}),be(g,()=>{i.value&&Q()},{deep:!0}),Ra(()=>{te(),X(),setTimeout(()=>{i.value&&Z()},1e3),setInterval(()=>{i.value&&Z()},6e4),setInterval($,5e3)}),{chartOptions:e,loading:a,availableCoins:n,topCoins:r,selectedCoin:i,cryptoData:s,chartTypes:c,selectedChartType:u,showVolume:d,indicators:h,selectedIndicators:m,priceAlerts:g,newAlertPrice:C,notifications:_,showAlertDialog:k,addPriceAlert:O,removeAlert:W,removeNotification:D,getIndicatorColor:p,filterCoins:z,fetchData:Z,timeframeMinutes:S,toggleDarkMode:L}}}),K=t=>(Fa("data-v-dbd35c45"),t=t(),za(),t),ni={class:"modern-dashboard"},ii={class:"dark-mode-toggle"},oi={class:"dashboard-header"},si=K(()=>T("div",{class:"header-content"},[T("h1",null,"Crypto Chart Analysis"),T("p",null,"Real-time cryptocurrency data with technical indicators & alerts")],-1)),li={class:"header-actions"},ui={class:"quick-stats"},ci={class:"stat-card selected-coin"},di={class:"stat-icon"},hi={class:"stat-content"},vi={key:0,class:"stat-value"},pi={key:1,class:"stat-value"},fi=K(()=>T("div",{class:"stat-label"},"Selected Coin",-1)),gi={class:"stat-card alerts"},mi={class:"stat-icon"},yi={class:"stat-content"},bi={class:"stat-value"},Si=K(()=>T("div",{class:"stat-label"},"Active Alerts",-1)),Ai={class:"stat-card timeframe"},_i={class:"stat-icon"},ki={class:"stat-content"},Ci={class:"stat-value"},Li=K(()=>T("div",{class:"stat-label"},"Timeframe",-1)),Di={class:"stat-card indicators"},wi={class:"stat-content"},Ii={class:"stat-value"},Pi=K(()=>T("div",{class:"stat-label"},"Technical Indicators",-1)),Ti={class:"row q-gutter-md items-center controls-row"},xi={key:0,class:"alerts-section"},Mi={class:"text-subtitle2 q-mb-xs"},Ni={class:"row q-gutter-sm"},Ei={class:"chart-container"},Oi={class:"chart-header"},Vi={key:0},Bi={key:1},Ri={class:"chart-legend"},$i={key:0,class:"legend-item"},Fi=K(()=>T("div",{class:"legend-color bullish"},null,-1)),zi=K(()=>T("span",null,"Bullish",-1)),Gi=[Fi,zi],Wi={key:1,class:"legend-item"},Ui=K(()=>T("div",{class:"legend-color bearish"},null,-1)),Qi=K(()=>T("span",null,"Bearish",-1)),qi=[Ui,Qi],Hi={key:2,class:"legend-item"},Yi=K(()=>T("div",{class:"legend-color volume"},null,-1)),ji=K(()=>T("span",null,"Volume",-1)),Ki=[Yi,ji],Xi={class:"chart-wrapper"},Zi=K(()=>T("div",{class:"text-h6"},"Create Price Alert",-1)),Ji={class:"q-gutter-y-md"},eo={class:"alert-coin-info"},to=K(()=>T("div",{class:"text-subtitle2"},"Selected Coin:",-1)),ao={class:"text-h6 text-primary"},ro=K(()=>T("div",{class:"text-caption text-grey"},"  Alert will trigger when price is within 0.5% of target price. ",-1));function no(t,e,a,r,n,i){const s=Ba("v-chart");return Y(),J("div",ni,[T("div",ii,[V(ie,{round:"",color:t.$q.dark.isActive?"grey-9":"yellow",icon:t.$q.dark.isActive?"dark_mode":"light_mode",class:"toggle-btn",onClick:t.toggleDarkMode,size:"lg"},null,8,["color","icon","onClick"])]),T("div",oi,[si,T("div",li,[V(ie,{icon:"refresh",round:"",flat:"",onClick:t.fetchData,disable:!t.selectedCoin||t.loading},null,8,["onClick","disable"]),V(ie,{icon:"notifications",round:"",flat:"",color:"red",onClick:e[0]||(e[0]=o=>t.showAlertDialog=!0),disable:!t.selectedCoin},null,8,["disable"])])]),T("div",ui,[T("div",ci,[T("div",di,[V(me,{name:"currency_bitcoin"})]),T("div",hi,[t.selectedCoin?(Y(),J("div",vi,ne(t.selectedCoin.toUpperCase()),1)):(Y(),J("div",pi,"None")),fi])]),T("div",gi,[T("div",mi,[V(me,{name:"notifications"})]),T("div",yi,[T("div",bi,ne(t.priceAlerts.filter(o=>o.active&&o.coin===t.selectedCoin).length),1),Si])]),T("div",Ai,[T("div",_i,[V(me,{name:"schedule"})]),T("div",ki,[T("div",Ci,ne(t.timeframeMinutes)+"min",1),Li])]),T("div",Di,[T("div",wi,[T("div",Ii,ne(t.selectedIndicators.length),1),Pi])])]),V(Re,{class:"controls-card"},{default:ee(()=>[V(De,null,{default:ee(()=>[T("div",Ti,[V(Oe,{modelValue:t.selectedCoin,"onUpdate:modelValue":e[1]||(e[1]=o=>t.selectedCoin=o),options:t.topCoins,"use-input":"","input-debounce":"300",filter:t.filterCoins,label:"Select Cryptocurrency","emit-value":"","map-options":"",filled:"",class:"coin-select"},null,8,["modelValue","options","filter"]),V(Oe,{modelValue:t.selectedChartType,"onUpdate:modelValue":e[2]||(e[2]=o=>t.selectedChartType=o),options:t.chartTypes,label:"Chart Type","emit-value":"","map-options":"",filled:""},null,8,["modelValue","options"]),V(Oe,{modelValue:t.selectedIndicators,"onUpdate:modelValue":e[3]||(e[3]=o=>t.selectedIndicators=o),options:t.indicators,multiple:"",label:"Technical Indicators","emit-value":"","map-options":"",filled:""},null,8,["modelValue","options"]),V(ti,{modelValue:t.showVolume,"onUpdate:modelValue":e[4]||(e[4]=o=>t.showVolume=o),label:"Show Volume",color:"primary"},null,8,["modelValue"]),V(Ct),V(Fr,{class:"col-auto nav-action-group"},{default:ee(()=>[V(ie,{label:"Financial Dashboard",color:"primary",icon:"analytics",to:"/chart",outline:""}),V(ie,{label:"Bank Import",color:"deep-purple",icon:"account_balance",to:"/bank-import",outline:""})]),_:1})])]),_:1})]),_:1}),t.selectedCoin&&t.priceAlerts.filter(o=>o.coin===t.selectedCoin).length>0?(Y(),J("div",xi,[V(Re,{class:"alerts-card"},{default:ee(()=>[V(De,null,{default:ee(()=>[T("div",Mi," Active Price Alerts for "+ne(t.selectedCoin.toUpperCase())+": ",1),T("div",Ni,[(Y(!0),J(gt,null,mt(t.priceAlerts.filter(o=>o.coin===t.selectedCoin),o=>(Y(),yt(Ya,{key:o.id,color:o.triggered?"green":"red","text-color":"white",removable:"",onRemove:l=>t.removeAlert(o.id)},{default:ee(()=>[V(me,{name:o.triggered?"notifications_active":"notifications",class:"q-mr-xs"},null,8,["name"]),bt(" "+ne(o.price)+" ",1),o.triggered?(Y(),yt(ai,{key:0},{default:ee(()=>[bt("Alert triggered!")]),_:1})):ge("",!0)]),_:2},1032,["color","onRemove"]))),128))])]),_:1})]),_:1})])):ge("",!0),T("div",Ei,[T("div",Oi,[t.selectedCoin?(Y(),J("h3",Vi,ne(t.selectedCoin.toUpperCase())+" - Cryptocurrency Analysis ",1)):(Y(),J("h3",Bi,"Select a cryptocurrency to view analysis")),T("div",Ri,[t.selectedChartType==="candlestick"?(Y(),J("div",$i,Gi)):ge("",!0),t.selectedChartType==="candlestick"?(Y(),J("div",Wi,qi)):ge("",!0),t.showVolume?(Y(),J("div",Hi,Ki)):ge("",!0),(Y(!0),J(gt,null,mt(t.selectedIndicators,o=>(Y(),J("div",{class:"legend-item",key:o},[T("div",{class:"legend-color",style:$a({backgroundColor:t.getIndicatorColor(o)})},null,4),T("span",null,ne(o.toUpperCase()),1)]))),128))])]),T("div",Xi,[V(s,{class:"main-chart",option:t.chartOptions,autoresize:"",loading:t.loading},null,8,["option","loading"])])]),V(qr,{modelValue:t.showAlertDialog,"onUpdate:modelValue":e[6]||(e[6]=o=>t.showAlertDialog=o),persistent:""},{default:ee(()=>[V(Re,{class:"alert-dialog-card"},{default:ee(()=>[V(De,{class:"row items-center q-pb-none"},{default:ee(()=>[Zi,V(Ct),St(V(ie,{icon:"close",flat:"",round:"",dense:""},null,512),[[Nt]])]),_:1}),V(De,null,{default:ee(()=>[T("div",Ji,[T("div",eo,[to,T("div",ao,ne(t.selectedCoin?t.selectedCoin.toUpperCase():"None"),1)]),V(zr,{modelValue:t.newAlertPrice,"onUpdate:modelValue":e[5]||(e[5]=o=>t.newAlertPrice=o),label:"Target Price ()",type:"number",filled:"",placeholder:"e.g., 45000",disable:!t.selectedCoin},null,8,["modelValue","disable"]),ro])]),_:1}),V(Hr,{align:"right"},{default:ee(()=>[St(V(ie,{flat:"",label:"Cancel",color:"primary"},null,512),[[Nt]]),V(ie,{label:"Create Alert",color:"red",onClick:t.addPriceAlert,disable:!t.newAlertPrice||!t.selectedCoin},null,8,["onClick","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const yo=Oa(ri,[["render",no],["__scopeId","data-v-dbd35c45"]]);export{yo as default};
